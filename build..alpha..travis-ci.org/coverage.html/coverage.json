{"/home/travis/build/npmtest/node-npmtest-seneca/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":2,"38":2,"39":1,"40":2,"41":2,"42":1,"43":2,"44":2,"45":1,"46":2,"47":2,"48":1,"49":1,"50":1,"51":1,"52":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1,1],"10":[1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":2,"9":2,"10":2,"11":2,"12":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":102,"loc":{"start":{"line":102,"column":83},"end":{"line":105,"column":10}},"skip":true},"7":{"name":"(anonymous_7)","line":113,"loc":{"start":{"line":113,"column":77},"end":{"line":116,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":129,"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":40}},"skip":true},"9":{"name":"(anonymous_9)","line":137,"loc":{"start":{"line":137,"column":77},"end":{"line":140,"column":10}},"skip":true},"10":{"name":"(anonymous_10)","line":148,"loc":{"start":{"line":148,"column":83},"end":{"line":151,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":159,"loc":{"start":{"line":159,"column":79},"end":{"line":162,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":170,"loc":{"start":{"line":170,"column":75},"end":{"line":173,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":185,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":184,"column":5}},"24":{"start":{"line":92,"column":8},"end":{"line":94,"column":63}},"25":{"start":{"line":95,"column":8},"end":{"line":95,"column":14}},"26":{"start":{"line":102,"column":8},"end":{"line":111,"column":10},"skip":true},"27":{"start":{"line":109,"column":12},"end":{"line":109,"column":55},"skip":true},"28":{"start":{"line":110,"column":12},"end":{"line":110,"column":48},"skip":true},"29":{"start":{"line":113,"column":8},"end":{"line":126,"column":10},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":76},"skip":true},"31":{"start":{"line":121,"column":12},"end":{"line":121,"column":73},"skip":true},"32":{"start":{"line":122,"column":12},"end":{"line":122,"column":74},"skip":true},"33":{"start":{"line":123,"column":12},"end":{"line":123,"column":79},"skip":true},"34":{"start":{"line":124,"column":12},"end":{"line":124,"column":25},"skip":true},"35":{"start":{"line":125,"column":12},"end":{"line":125,"column":45},"skip":true},"36":{"start":{"line":128,"column":8},"end":{"line":135,"column":14},"skip":true},"37":{"start":{"line":133,"column":16},"end":{"line":133,"column":29},"skip":true},"38":{"start":{"line":134,"column":16},"end":{"line":134,"column":55},"skip":true},"39":{"start":{"line":137,"column":8},"end":{"line":146,"column":10},"skip":true},"40":{"start":{"line":144,"column":12},"end":{"line":144,"column":25},"skip":true},"41":{"start":{"line":145,"column":12},"end":{"line":145,"column":45},"skip":true},"42":{"start":{"line":148,"column":8},"end":{"line":157,"column":10},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":25},"skip":true},"44":{"start":{"line":156,"column":12},"end":{"line":156,"column":48},"skip":true},"45":{"start":{"line":159,"column":8},"end":{"line":168,"column":10},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":25},"skip":true},"47":{"start":{"line":167,"column":12},"end":{"line":167,"column":46},"skip":true},"48":{"start":{"line":170,"column":8},"end":{"line":179,"column":10},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":94},"skip":true},"50":{"start":{"line":178,"column":12},"end":{"line":178,"column":48},"skip":true},"51":{"start":{"line":182,"column":8},"end":{"line":182,"column":35},"skip":true},"52":{"start":{"line":183,"column":8},"end":{"line":183,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":95,"column":14}},{"start":{"line":101,"column":4},"end":{"line":183,"column":14},"skip":true}]},"9":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":18},"end":{"line":92,"column":32}},{"start":{"line":93,"column":12},"end":{"line":93,"column":53}},{"start":{"line":94,"column":12},"end":{"line":94,"column":61}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":45},"end":{"line":102,"column":79},"skip":true},{"start":{"line":102,"column":83},"end":{"line":111,"column":9},"skip":true}]},"11":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":42},"end":{"line":113,"column":73},"skip":true},{"start":{"line":113,"column":77},"end":{"line":126,"column":9},"skip":true}]},"12":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":48},"end":{"line":128,"column":85},"skip":true},{"start":{"line":129,"column":12},"end":{"line":135,"column":13},"skip":true}]},"13":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":42},"end":{"line":137,"column":73},"skip":true},{"start":{"line":137,"column":77},"end":{"line":146,"column":9},"skip":true}]},"14":{"line":148,"type":"binary-expr","locations":[{"start":{"line":148,"column":45},"end":{"line":148,"column":79},"skip":true},{"start":{"line":148,"column":83},"end":{"line":157,"column":9},"skip":true}]},"15":{"line":159,"type":"binary-expr","locations":[{"start":{"line":159,"column":43},"end":{"line":159,"column":75},"skip":true},{"start":{"line":159,"column":79},"end":{"line":168,"column":9},"skip":true}]},"16":{"line":170,"type":"binary-expr","locations":[{"start":{"line":170,"column":41},"end":{"line":170,"column":71},"skip":true},{"start":{"line":170,"column":75},"end":{"line":179,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_seneca */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"92":1,"95":1,"102":1,"109":1,"110":1,"113":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":1,"128":1,"133":2,"134":2,"137":1,"144":2,"145":2,"148":1,"155":2,"156":2,"159":1,"166":2,"167":2,"170":1,"177":1,"178":1,"182":1,"183":1}},"/home/travis/build/npmtest/node-npmtest-seneca/lib.npmtest_seneca.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/lib.npmtest_seneca.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":51}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":57}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_seneca */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_seneca = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_seneca = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-seneca/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":2,"38":2,"39":2,"40":2,"41":0,"42":2,"43":2,"44":2,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,2],"16":[2,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":314,"loc":{"start":{"line":314,"column":32},"end":{"line":314,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":325,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":324,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":294,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":302,"column":8},"end":{"line":302,"column":82},"skip":true},"70":{"start":{"line":305,"column":8},"end":{"line":307,"column":9},"skip":true},"71":{"start":{"line":306,"column":12},"end":{"line":306,"column":82},"skip":true},"72":{"start":{"line":309,"column":8},"end":{"line":311,"column":9},"skip":true},"73":{"start":{"line":310,"column":12},"end":{"line":310,"column":18},"skip":true},"74":{"start":{"line":312,"column":8},"end":{"line":312,"column":54},"skip":true},"75":{"start":{"line":313,"column":8},"end":{"line":313,"column":69},"skip":true},"76":{"start":{"line":314,"column":8},"end":{"line":322,"column":36},"skip":true},"77":{"start":{"line":315,"column":12},"end":{"line":315,"column":61},"skip":true},"78":{"start":{"line":316,"column":12},"end":{"line":319,"column":13},"skip":true},"79":{"start":{"line":317,"column":16},"end":{"line":317,"column":75},"skip":true},"80":{"start":{"line":318,"column":16},"end":{"line":318,"column":23},"skip":true},"81":{"start":{"line":320,"column":12},"end":{"line":320,"column":38},"skip":true},"82":{"start":{"line":321,"column":12},"end":{"line":321,"column":27},"skip":true},"83":{"start":{"line":323,"column":8},"end":{"line":323,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":50}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":323,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":295,"type":"binary-expr","locations":[{"start":{"line":295,"column":12},"end":{"line":295,"column":64},"skip":true},{"start":{"line":296,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":302,"type":"binary-expr","locations":[{"start":{"line":302,"column":43},"end":{"line":302,"column":75},"skip":true},{"start":{"line":302,"column":79},"end":{"line":302,"column":81},"skip":true}]},"25":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true},{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true}]},"26":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true},{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true}]},"27":{"line":312,"type":"binary-expr","locations":[{"start":{"line":312,"column":27},"end":{"line":312,"column":43},"skip":true},{"start":{"line":312,"column":47},"end":{"line":312,"column":53},"skip":true}]},"28":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true},{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-seneca && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_seneca */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_seneca","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_seneca.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        local.assetsDict['/assets.npmtest_seneca.rollup.js'] =","            local.assetsDict['/assets.npmtest_seneca.rollup.js'] ||","            local.fs.readFileSync(","                // buildCustomOrg-hack","                local.npmtest_seneca.__dirname +","                    '/lib.npmtest_seneca.js',","                'utf8'","            ).replace((/^#!/), '//');","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":2,"127":2,"128":2,"129":2,"130":1,"133":2,"134":2,"139":2,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"294":1,"302":1,"305":1,"306":1,"309":1,"310":1,"312":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"320":1,"321":1,"323":1}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/seneca.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/seneca.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":0,"30":1,"31":0,"32":0,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":1,"52":1,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":1,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":1,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":1,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":1,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":1,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":1,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":1,"258":0,"259":1,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":1,"275":0,"276":0,"277":0,"278":0,"279":0,"280":1,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":1,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":1,"306":0,"307":0,"308":1,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":1,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":1,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":1,"344":0,"345":1,"346":0,"347":1,"348":0,"349":0,"350":0,"351":0,"352":1,"353":0,"354":0,"355":0,"356":0,"357":1,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":1,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":1,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":1,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":0,"450":1,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"468":1,"469":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"478":0,"479":1,"480":0,"481":0,"482":0,"483":0,"484":0,"485":0,"486":0,"487":0,"488":1,"489":0,"490":0,"491":0,"492":0,"493":0,"494":0,"495":0,"496":0,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"504":0,"505":0,"506":0,"507":0,"508":0,"509":0,"510":0,"511":0,"512":0,"513":0,"514":0,"515":1,"516":0,"517":0,"518":0,"519":0,"520":0,"521":0,"522":0,"523":0,"524":0,"525":1,"526":0,"527":0,"528":1,"529":0,"530":0,"531":0,"532":0,"533":0,"534":0,"535":1,"536":0,"537":0,"538":0,"539":0,"540":0,"541":0,"542":0,"543":0,"544":0,"545":0,"546":0,"547":0,"548":0,"549":0,"550":0,"551":0,"552":0,"553":0,"554":0,"555":0,"556":0,"557":0,"558":0,"559":0,"560":0,"561":0,"562":0,"563":1,"564":0,"565":1,"566":0,"567":0,"568":1,"569":0,"570":0,"571":0,"572":0,"573":0,"574":0,"575":0,"576":0,"577":0,"578":0,"579":0,"580":0,"581":0,"582":0,"583":0,"584":0,"585":0,"586":0,"587":0,"588":1,"589":0,"590":0,"591":0,"592":0,"593":0,"594":0,"595":0,"596":0,"597":1,"598":0,"599":0,"600":1,"601":0,"602":0,"603":0,"604":0,"605":0,"606":0,"607":0,"608":0,"609":1,"610":0,"611":1,"612":0,"613":0,"614":0,"615":0,"616":1,"617":0,"618":0,"619":0,"620":0,"621":0,"622":1,"623":0,"624":0,"625":0,"626":0,"627":0,"628":0,"629":0,"630":1,"631":1,"632":0,"633":0,"634":0,"635":0,"636":0,"637":0,"638":0,"639":1,"640":0,"641":0,"642":0,"643":1,"644":0,"645":0,"646":0,"647":1,"648":0,"649":0,"650":0,"651":0,"652":0,"653":0,"654":0,"655":0,"656":0,"657":0,"658":0,"659":0,"660":0,"661":0,"662":0,"663":0,"664":0,"665":0,"666":0,"667":0,"668":0,"669":0,"670":0,"671":0,"672":0,"673":0,"674":0,"675":0,"676":0,"677":0,"678":0,"679":0,"680":0,"681":0,"682":0,"683":0,"684":0,"685":0,"686":0},"b":{"1":[0,0],"2":[0,0],"3":[0,1],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0,0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0],"115":[0,0],"116":[0,0],"117":[0,0],"118":[0,0],"119":[0,0],"120":[0,0],"121":[0,0],"122":[0,0],"123":[0,0],"124":[0,0],"125":[0,0],"126":[0,0,0],"127":[0,0],"128":[0,0],"129":[0,0],"130":[0,0],"131":[0,0],"132":[0,0],"133":[0,0],"134":[0,0],"135":[0,0],"136":[0,0],"137":[0,0],"138":[0,0],"139":[0,0],"140":[0,0],"141":[0,0],"142":[0,0],"143":[0,0],"144":[0,0],"145":[0,0],"146":[0,0],"147":[0,0],"148":[0,0],"149":[0,0],"150":[0,0],"151":[0,0],"152":[0,0],"153":[0,0],"154":[0,0],"155":[0,0],"156":[0,0],"157":[0,0],"158":[0,0],"159":[0,0],"160":[0,0],"161":[0,0],"162":[0,0],"163":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0},"fnMap":{"1":{"name":"router","line":196,"loc":{"start":{"line":196,"column":10},"end":{"line":196,"column":29}}},"2":{"name":"Seneca","line":202,"loc":{"start":{"line":202,"column":0},"end":{"line":202,"column":19}}},"3":{"name":"init","line":210,"loc":{"start":{"line":210,"column":17},"end":{"line":210,"column":62}}},"4":{"name":"(anonymous_4)","line":235,"loc":{"start":{"line":235,"column":26},"end":{"line":235,"column":48}}},"5":{"name":"(anonymous_5)","line":239,"loc":{"start":{"line":239,"column":15},"end":{"line":239,"column":27}}},"6":{"name":"top_use","line":253,"loc":{"start":{"line":253,"column":21},"end":{"line":253,"column":41}}},"7":{"name":"top_test","line":263,"loc":{"start":{"line":263,"column":22},"end":{"line":263,"column":43}}},"8":{"name":"make_seneca","line":283,"loc":{"start":{"line":283,"column":0},"end":{"line":283,"column":39}}},"9":{"name":"refnid","line":302,"loc":{"start":{"line":302,"column":15},"end":{"line":302,"column":34}}},"10":{"name":"status","line":502,"loc":{"start":{"line":502,"column":16},"end":{"line":502,"column":35}}},"11":{"name":"stats","line":515,"loc":{"start":{"line":515,"column":18},"end":{"line":515,"column":36}}},"12":{"name":"api_depends","line":559,"loc":{"start":{"line":559,"column":2},"end":{"line":559,"column":26}}},"13":{"name":"(anonymous_13)","line":566,"loc":{"start":{"line":566,"column":18},"end":{"line":566,"column":37}}},"14":{"name":"api_export","line":576,"loc":{"start":{"line":576,"column":2},"end":{"line":576,"column":28}}},"15":{"name":"api_sub","line":592,"loc":{"start":{"line":592,"column":2},"end":{"line":592,"column":22}}},"16":{"name":"handle_sub","line":607,"loc":{"start":{"line":607,"column":28},"end":{"line":607,"column":63}}},"17":{"name":"subfunc","line":619,"loc":{"start":{"line":619,"column":27},"end":{"line":619,"column":54}}},"18":{"name":"annotate","line":643,"loc":{"start":{"line":643,"column":4},"end":{"line":643,"column":41}}},"19":{"name":"annotation","line":644,"loc":{"start":{"line":644,"column":13},"end":{"line":644,"column":48}}},"20":{"name":"api_add","line":664,"loc":{"start":{"line":664,"column":2},"end":{"line":664,"column":22}}},"21":{"name":"default_action","line":677,"loc":{"start":{"line":677,"column":32},"end":{"line":677,"column":68}}},"22":{"name":"(anonymous_22)","line":710,"loc":{"start":{"line":710,"column":20},"end":{"line":710,"column":36}}},"23":{"name":"make_action_stats","line":790,"loc":{"start":{"line":790,"column":2},"end":{"line":790,"column":39}}},"24":{"name":"modify_action","line":807,"loc":{"start":{"line":807,"column":2},"end":{"line":807,"column":43}}},"25":{"name":"(anonymous_25)","line":808,"loc":{"start":{"line":808,"column":38},"end":{"line":808,"column":56}}},"26":{"name":"findpins","line":817,"loc":{"start":{"line":817,"column":32},"end":{"line":817,"column":53}}},"27":{"name":"(anonymous_27)","line":824,"loc":{"start":{"line":824,"column":21},"end":{"line":824,"column":40}}},"28":{"name":"(anonymous_28)","line":827,"loc":{"start":{"line":827,"column":8},"end":{"line":827,"column":24}}},"29":{"name":"api_act_if","line":838,"loc":{"start":{"line":838,"column":2},"end":{"line":838,"column":25}}},"30":{"name":"api_act","line":851,"loc":{"start":{"line":851,"column":2},"end":{"line":851,"column":22}}},"31":{"name":"api_wrap","line":872,"loc":{"start":{"line":872,"column":2},"end":{"line":872,"column":41}}},"32":{"name":"(anonymous_32)","line":879,"loc":{"start":{"line":879,"column":16},"end":{"line":879,"column":29}}},"33":{"name":"(anonymous_33)","line":880,"loc":{"start":{"line":880,"column":34},"end":{"line":880,"column":56}}},"34":{"name":"(anonymous_34)","line":886,"loc":{"start":{"line":886,"column":20},"end":{"line":886,"column":32}}},"35":{"name":"(anonymous_35)","line":887,"loc":{"start":{"line":887,"column":15},"end":{"line":887,"column":30}}},"36":{"name":"api_close","line":898,"loc":{"start":{"line":898,"column":2},"end":{"line":898,"column":28}}},"37":{"name":"do_close","line":903,"loc":{"start":{"line":903,"column":4},"end":{"line":903,"column":25}}},"38":{"name":"(anonymous_38)","line":907,"loc":{"start":{"line":907,"column":40},"end":{"line":907,"column":66}}},"39":{"name":"(anonymous_39)","line":914,"loc":{"start":{"line":914,"column":56},"end":{"line":914,"column":71}}},"40":{"name":"api_ready","line":935,"loc":{"start":{"line":935,"column":2},"end":{"line":935,"column":29}}},"41":{"name":"register_ready","line":938,"loc":{"start":{"line":938,"column":17},"end":{"line":938,"column":44}}},"42":{"name":"api_use","line":953,"loc":{"start":{"line":953,"column":2},"end":{"line":953,"column":38}}},"43":{"name":"api_seneca","line":980,"loc":{"start":{"line":980,"column":2},"end":{"line":980,"column":25}}},"44":{"name":"api_toString","line":985,"loc":{"start":{"line":985,"column":2},"end":{"line":985,"column":27}}},"45":{"name":"api_inward","line":990,"loc":{"start":{"line":990,"column":2},"end":{"line":990,"column":31}}},"46":{"name":"api_outward","line":999,"loc":{"start":{"line":999,"column":2},"end":{"line":999,"column":33}}},"47":{"name":"do_act","line":1008,"loc":{"start":{"line":1008,"column":2},"end":{"line":1008,"column":47}}},"48":{"name":"act_fn","line":1025,"loc":{"start":{"line":1025,"column":10},"end":{"line":1025,"column":33}}},"49":{"name":"reply","line":1027,"loc":{"start":{"line":1027,"column":48},"end":{"line":1027,"column":66}}},"50":{"name":"act_tm","line":1039,"loc":{"start":{"line":1039,"column":12},"end":{"line":1039,"column":31}}},"51":{"name":"execute_action","line":1051,"loc":{"start":{"line":1051,"column":4},"end":{"line":1051,"column":55}}},"52":{"name":"handle_result","line":1081,"loc":{"start":{"line":1081,"column":4},"end":{"line":1081,"column":30}}},"53":{"name":"handle_inward_break","line":1170,"loc":{"start":{"line":1170,"column":2},"end":{"line":1170,"column":78}}},"54":{"name":"act_error","line":1202,"loc":{"start":{"line":1202,"column":2},"end":{"line":1203,"column":43}}},"55":{"name":"callback_error","line":1257,"loc":{"start":{"line":1257,"column":2},"end":{"line":1258,"column":43}}},"56":{"name":"api_fix","line":1299,"loc":{"start":{"line":1299,"column":2},"end":{"line":1299,"column":22}}},"57":{"name":"fix_add","line":1306,"loc":{"start":{"line":1306,"column":14},"end":{"line":1306,"column":34}}},"58":{"name":"api_delegate","line":1316,"loc":{"start":{"line":1316,"column":2},"end":{"line":1316,"column":36}}},"59":{"name":"toString","line":1326,"loc":{"start":{"line":1326,"column":24},"end":{"line":1326,"column":45}}},"60":{"name":"(anonymous_60)","line":1329,"loc":{"start":{"line":1329,"column":24},"end":{"line":1329,"column":40}}},"61":{"name":"delegate","line":1344,"loc":{"start":{"line":1344,"column":24},"end":{"line":1344,"column":62}}},"62":{"name":"client","line":1353,"loc":{"start":{"line":1353,"column":22},"end":{"line":1353,"column":41}}},"63":{"name":"listen","line":1357,"loc":{"start":{"line":1357,"column":22},"end":{"line":1357,"column":41}}},"64":{"name":"api_options","line":1365,"loc":{"start":{"line":1365,"column":2},"end":{"line":1365,"column":40}}},"65":{"name":"api_error","line":1394,"loc":{"start":{"line":1394,"column":2},"end":{"line":1394,"column":34}}},"66":{"name":"api_test","line":1401,"loc":{"start":{"line":1401,"column":2},"end":{"line":1401,"column":42}}},"67":{"name":"api_decorate","line":1419,"loc":{"start":{"line":1419,"column":2},"end":{"line":1419,"column":27}}},"68":{"name":"next_act","line":1434,"loc":{"start":{"line":1434,"column":18},"end":{"line":1434,"column":39}}},"69":{"name":"(anonymous_69)","line":1447,"loc":{"start":{"line":1447,"column":11},"end":{"line":1447,"column":27}}},"70":{"name":"gate","line":1455,"loc":{"start":{"line":1455,"column":14},"end":{"line":1455,"column":31}}},"71":{"name":"ungate","line":1461,"loc":{"start":{"line":1461,"column":16},"end":{"line":1461,"column":35}}},"72":{"name":"action_seneca_fatal","line":1482,"loc":{"start":{"line":1482,"column":2},"end":{"line":1482,"column":44}}},"73":{"name":"action_seneca_close","line":1486,"loc":{"start":{"line":1486,"column":2},"end":{"line":1486,"column":44}}},"74":{"name":"action_seneca_stats","line":1491,"loc":{"start":{"line":1491,"column":2},"end":{"line":1491,"column":44}}},"75":{"name":"(anonymous_75)","line":1515,"loc":{"start":{"line":1515,"column":38},"end":{"line":1515,"column":54}}},"76":{"name":"action_options_get","line":1529,"loc":{"start":{"line":1529,"column":2},"end":{"line":1529,"column":43}}},"77":{"name":"(anonymous_77)","line":1539,"loc":{"start":{"line":1539,"column":36},"end":{"line":1539,"column":62}}},"78":{"name":"load_logger","line":1545,"loc":{"start":{"line":1545,"column":2},"end":{"line":1545,"column":46}}},"79":{"name":"action_queue_clear","line":1551,"loc":{"start":{"line":1551,"column":2},"end":{"line":1551,"column":33}}},"80":{"name":"make_private","line":1571,"loc":{"start":{"line":1571,"column":0},"end":{"line":1571,"column":25}}},"81":{"name":"make_callpoint","line":1588,"loc":{"start":{"line":1588,"column":0},"end":{"line":1588,"column":33}}},"82":{"name":"(anonymous_82)","line":1590,"loc":{"start":{"line":1590,"column":11},"end":{"line":1590,"column":23}}},"83":{"name":"make_log","line":1601,"loc":{"start":{"line":1601,"column":0},"end":{"line":1601,"column":39}}},"84":{"name":"log","line":1602,"loc":{"start":{"line":1602,"column":28},"end":{"line":1602,"column":48}}},"85":{"name":"prepare_log","line":1612,"loc":{"start":{"line":1612,"column":0},"end":{"line":1612,"column":37}}},"86":{"name":"prepare_log_data","line":1613,"loc":{"start":{"line":1613,"column":9},"end":{"line":1613,"column":38}}},"87":{"name":"make_log_levels","line":1625,"loc":{"start":{"line":1625,"column":0},"end":{"line":1625,"column":41}}},"88":{"name":"log_level","line":1626,"loc":{"start":{"line":1626,"column":2},"end":{"line":1626,"column":29}}},"89":{"name":"(anonymous_89)","line":1627,"loc":{"start":{"line":1627,"column":11},"end":{"line":1627,"column":27}}},"90":{"name":"make_modified_log","line":1638,"loc":{"start":{"line":1638,"column":0},"end":{"line":1638,"column":43}}},"91":{"name":"log_modifier","line":1639,"loc":{"start":{"line":1639,"column":9},"end":{"line":1639,"column":38}}},"92":{"name":"default_log_modifier","line":1645,"loc":{"start":{"line":1645,"column":0},"end":{"line":1645,"column":37}}},"93":{"name":"act_make_delegate","line":1652,"loc":{"start":{"line":1652,"column":0},"end":{"line":1652,"column":52}}},"94":{"name":"act_delegate_log_modifier","line":1671,"loc":{"start":{"line":1671,"column":36},"end":{"line":1671,"column":78}}},"95":{"name":"(anonymous_95)","line":1681,"loc":{"start":{"line":1681,"column":21},"end":{"line":1681,"column":52}}},"96":{"name":"(anonymous_96)","line":1715,"loc":{"start":{"line":1715,"column":22},"end":{"line":1715,"column":53}}},"97":{"name":"(anonymous_97)","line":1725,"loc":{"start":{"line":1725,"column":21},"end":{"line":1725,"column":42}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":30}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":28}},"6":{"start":{"line":14,"column":0},"end":{"line":14,"column":43}},"7":{"start":{"line":15,"column":0},"end":{"line":15,"column":30}},"8":{"start":{"line":16,"column":0},"end":{"line":16,"column":35}},"9":{"start":{"line":17,"column":0},"end":{"line":17,"column":24}},"10":{"start":{"line":18,"column":0},"end":{"line":18,"column":28}},"11":{"start":{"line":19,"column":0},"end":{"line":19,"column":30}},"12":{"start":{"line":20,"column":0},"end":{"line":20,"column":36}},"13":{"start":{"line":21,"column":0},"end":{"line":21,"column":26}},"14":{"start":{"line":22,"column":0},"end":{"line":22,"column":35}},"15":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}},"16":{"start":{"line":27,"column":0},"end":{"line":27,"column":36}},"17":{"start":{"line":28,"column":0},"end":{"line":28,"column":36}},"18":{"start":{"line":29,"column":0},"end":{"line":29,"column":36}},"19":{"start":{"line":30,"column":0},"end":{"line":30,"column":40}},"20":{"start":{"line":31,"column":0},"end":{"line":31,"column":39}},"21":{"start":{"line":32,"column":0},"end":{"line":32,"column":38}},"22":{"start":{"line":33,"column":0},"end":{"line":33,"column":34}},"23":{"start":{"line":34,"column":0},"end":{"line":34,"column":42}},"24":{"start":{"line":38,"column":0},"end":{"line":38,"column":47}},"25":{"start":{"line":39,"column":0},"end":{"line":39,"column":47}},"26":{"start":{"line":43,"column":0},"end":{"line":47,"column":2}},"27":{"start":{"line":49,"column":0},"end":{"line":182,"column":1}},"28":{"start":{"line":186,"column":0},"end":{"line":198,"column":1}},"29":{"start":{"line":196,"column":31},"end":{"line":196,"column":47}},"30":{"start":{"line":202,"column":0},"end":{"line":205,"column":1}},"31":{"start":{"line":203,"column":2},"end":{"line":203,"column":32}},"32":{"start":{"line":204,"column":2},"end":{"line":204,"column":25}},"33":{"start":{"line":206,"column":0},"end":{"line":206,"column":42}},"34":{"start":{"line":210,"column":0},"end":{"line":244,"column":1}},"35":{"start":{"line":211,"column":2},"end":{"line":213,"column":50}},"36":{"start":{"line":215,"column":2},"end":{"line":215,"column":43}},"37":{"start":{"line":216,"column":2},"end":{"line":216,"column":32}},"38":{"start":{"line":220,"column":2},"end":{"line":220,"column":76}},"39":{"start":{"line":222,"column":2},"end":{"line":222,"column":30}},"40":{"start":{"line":225,"column":2},"end":{"line":225,"column":65}},"41":{"start":{"line":226,"column":2},"end":{"line":226,"column":67}},"42":{"start":{"line":227,"column":2},"end":{"line":227,"column":61}},"43":{"start":{"line":230,"column":2},"end":{"line":232,"column":3}},"44":{"start":{"line":231,"column":4},"end":{"line":231,"column":43}},"45":{"start":{"line":235,"column":2},"end":{"line":237,"column":4}},"46":{"start":{"line":236,"column":4},"end":{"line":236,"column":26}},"47":{"start":{"line":239,"column":2},"end":{"line":241,"column":4}},"48":{"start":{"line":240,"column":4},"end":{"line":240,"column":72}},"49":{"start":{"line":243,"column":2},"end":{"line":243,"column":15}},"50":{"start":{"line":247,"column":0},"end":{"line":247,"column":30}},"51":{"start":{"line":250,"column":0},"end":{"line":250,"column":45}},"52":{"start":{"line":253,"column":0},"end":{"line":260,"column":1}},"53":{"start":{"line":254,"column":2},"end":{"line":254,"column":43}},"54":{"start":{"line":255,"column":2},"end":{"line":255,"column":72}},"55":{"start":{"line":255,"column":45},"end":{"line":255,"column":71}},"56":{"start":{"line":257,"column":2},"end":{"line":257,"column":33}},"57":{"start":{"line":259,"column":2},"end":{"line":259,"column":46}},"58":{"start":{"line":263,"column":0},"end":{"line":271,"column":1}},"59":{"start":{"line":264,"column":2},"end":{"line":264,"column":43}},"60":{"start":{"line":265,"column":2},"end":{"line":265,"column":72}},"61":{"start":{"line":265,"column":45},"end":{"line":265,"column":71}},"62":{"start":{"line":267,"column":2},"end":{"line":267,"column":58}},"63":{"start":{"line":268,"column":2},"end":{"line":268,"column":40}},"64":{"start":{"line":270,"column":2},"end":{"line":270,"column":17}},"65":{"start":{"line":273,"column":0},"end":{"line":273,"column":33}},"66":{"start":{"line":277,"column":0},"end":{"line":279,"column":1}},"67":{"start":{"line":278,"column":2},"end":{"line":278,"column":18}},"68":{"start":{"line":283,"column":0},"end":{"line":1567,"column":1}},"69":{"start":{"line":284,"column":2},"end":{"line":284,"column":41}},"70":{"start":{"line":287,"column":2},"end":{"line":287,"column":31}},"71":{"start":{"line":290,"column":2},"end":{"line":290,"column":25}},"72":{"start":{"line":291,"column":2},"end":{"line":291,"column":26}},"73":{"start":{"line":294,"column":2},"end":{"line":294,"column":26}},"74":{"start":{"line":297,"column":2},"end":{"line":297,"column":72}},"75":{"start":{"line":298,"column":2},"end":{"line":298,"column":34}},"76":{"start":{"line":301,"column":2},"end":{"line":301,"column":38}},"77":{"start":{"line":302,"column":2},"end":{"line":302,"column":65}},"78":{"start":{"line":302,"column":36},"end":{"line":302,"column":64}},"79":{"start":{"line":305,"column":2},"end":{"line":305,"column":72}},"80":{"start":{"line":306,"column":2},"end":{"line":306,"column":72}},"81":{"start":{"line":308,"column":2},"end":{"line":308,"column":52}},"82":{"start":{"line":311,"column":2},"end":{"line":311,"column":18}},"83":{"start":{"line":312,"column":2},"end":{"line":312,"column":30}},"84":{"start":{"line":313,"column":2},"end":{"line":313,"column":21}},"85":{"start":{"line":314,"column":2},"end":{"line":314,"column":19}},"86":{"start":{"line":315,"column":2},"end":{"line":315,"column":32}},"87":{"start":{"line":317,"column":2},"end":{"line":317,"column":57}},"88":{"start":{"line":359,"column":2},"end":{"line":359,"column":20}},"89":{"start":{"line":405,"column":2},"end":{"line":405,"column":20}},"90":{"start":{"line":407,"column":2},"end":{"line":407,"column":20}},"91":{"start":{"line":408,"column":2},"end":{"line":408,"column":20}},"92":{"start":{"line":409,"column":2},"end":{"line":409,"column":43}},"93":{"start":{"line":410,"column":2},"end":{"line":410,"column":43}},"94":{"start":{"line":411,"column":2},"end":{"line":411,"column":26}},"95":{"start":{"line":412,"column":2},"end":{"line":412,"column":24}},"96":{"start":{"line":413,"column":2},"end":{"line":413,"column":26}},"97":{"start":{"line":414,"column":2},"end":{"line":414,"column":26}},"98":{"start":{"line":415,"column":2},"end":{"line":415,"column":24}},"99":{"start":{"line":416,"column":2},"end":{"line":416,"column":24}},"100":{"start":{"line":417,"column":2},"end":{"line":417,"column":28}},"101":{"start":{"line":418,"column":2},"end":{"line":418,"column":24}},"102":{"start":{"line":419,"column":2},"end":{"line":419,"column":30}},"103":{"start":{"line":420,"column":2},"end":{"line":420,"column":26}},"104":{"start":{"line":421,"column":2},"end":{"line":421,"column":28}},"105":{"start":{"line":422,"column":2},"end":{"line":422,"column":22}},"106":{"start":{"line":425,"column":2},"end":{"line":425,"column":24}},"107":{"start":{"line":428,"column":2},"end":{"line":428,"column":49}},"108":{"start":{"line":429,"column":2},"end":{"line":429,"column":28}},"109":{"start":{"line":430,"column":2},"end":{"line":430,"column":26}},"110":{"start":{"line":431,"column":2},"end":{"line":431,"column":22}},"111":{"start":{"line":432,"column":2},"end":{"line":432,"column":26}},"112":{"start":{"line":433,"column":2},"end":{"line":433,"column":20}},"113":{"start":{"line":434,"column":2},"end":{"line":434,"column":30}},"114":{"start":{"line":437,"column":2},"end":{"line":437,"column":26}},"115":{"start":{"line":440,"column":2},"end":{"line":440,"column":29}},"116":{"start":{"line":443,"column":2},"end":{"line":443,"column":38}},"117":{"start":{"line":444,"column":2},"end":{"line":444,"column":40}},"118":{"start":{"line":445,"column":2},"end":{"line":445,"column":64}},"119":{"start":{"line":448,"column":2},"end":{"line":456,"column":10}},"120":{"start":{"line":459,"column":2},"end":{"line":459,"column":19}},"121":{"start":{"line":461,"column":2},"end":{"line":465,"column":3}},"122":{"start":{"line":462,"column":4},"end":{"line":462,"column":16}},"123":{"start":{"line":463,"column":4},"end":{"line":463,"column":40}},"124":{"start":{"line":464,"column":4},"end":{"line":464,"column":41}},"125":{"start":{"line":467,"column":2},"end":{"line":467,"column":37}},"126":{"start":{"line":469,"column":2},"end":{"line":475,"column":4}},"127":{"start":{"line":477,"column":2},"end":{"line":477,"column":25}},"128":{"start":{"line":481,"column":2},"end":{"line":481,"column":59}},"129":{"start":{"line":482,"column":2},"end":{"line":482,"column":27}},"130":{"start":{"line":484,"column":2},"end":{"line":484,"column":57}},"131":{"start":{"line":485,"column":2},"end":{"line":485,"column":49}},"132":{"start":{"line":490,"column":2},"end":{"line":490,"column":28}},"133":{"start":{"line":492,"column":2},"end":{"line":497,"column":12}},"134":{"start":{"line":500,"column":2},"end":{"line":509,"column":3}},"135":{"start":{"line":501,"column":4},"end":{"line":501,"column":41}},"136":{"start":{"line":502,"column":4},"end":{"line":508,"column":26}},"137":{"start":{"line":503,"column":6},"end":{"line":507,"column":8}},"138":{"start":{"line":511,"column":2},"end":{"line":519,"column":3}},"139":{"start":{"line":512,"column":4},"end":{"line":512,"column":79}},"140":{"start":{"line":514,"column":4},"end":{"line":518,"column":5}},"141":{"start":{"line":515,"column":6},"end":{"line":517,"column":27}},"142":{"start":{"line":516,"column":8},"end":{"line":516,"column":38}},"143":{"start":{"line":521,"column":2},"end":{"line":521,"column":23}},"144":{"start":{"line":522,"column":2},"end":{"line":522,"column":51}},"145":{"start":{"line":523,"column":2},"end":{"line":528,"column":4}},"146":{"start":{"line":530,"column":2},"end":{"line":530,"column":44}},"147":{"start":{"line":531,"column":2},"end":{"line":531,"column":44}},"148":{"start":{"line":533,"column":2},"end":{"line":533,"column":30}},"149":{"start":{"line":535,"column":2},"end":{"line":535,"column":32}},"150":{"start":{"line":536,"column":2},"end":{"line":536,"column":26}},"151":{"start":{"line":539,"column":2},"end":{"line":551,"column":33}},"152":{"start":{"line":553,"column":2},"end":{"line":556,"column":36}},"153":{"start":{"line":559,"column":2},"end":{"line":574,"column":3}},"154":{"start":{"line":560,"column":4},"end":{"line":560,"column":19}},"155":{"start":{"line":562,"column":4},"end":{"line":562,"column":69}},"156":{"start":{"line":564,"column":4},"end":{"line":564,"column":41}},"157":{"start":{"line":566,"column":4},"end":{"line":573,"column":6}},"158":{"start":{"line":567,"column":6},"end":{"line":572,"column":22}},"159":{"start":{"line":569,"column":8},"end":{"line":569,"column":90}},"160":{"start":{"line":570,"column":8},"end":{"line":570,"column":20}},"161":{"start":{"line":572,"column":11},"end":{"line":572,"column":22}},"162":{"start":{"line":576,"column":2},"end":{"line":590,"column":3}},"163":{"start":{"line":577,"column":4},"end":{"line":577,"column":19}},"164":{"start":{"line":580,"column":4},"end":{"line":582,"column":5}},"165":{"start":{"line":581,"column":6},"end":{"line":581,"column":19}},"166":{"start":{"line":584,"column":4},"end":{"line":584,"column":41}},"167":{"start":{"line":585,"column":4},"end":{"line":587,"column":5}},"168":{"start":{"line":586,"column":6},"end":{"line":586,"column":60}},"169":{"start":{"line":589,"column":4},"end":{"line":589,"column":20}},"170":{"start":{"line":592,"column":2},"end":{"line":660,"column":3}},"171":{"start":{"line":593,"column":4},"end":{"line":593,"column":19}},"172":{"start":{"line":595,"column":4},"end":{"line":595,"column":77}},"173":{"start":{"line":596,"column":4},"end":{"line":596,"column":33}},"174":{"start":{"line":597,"column":4},"end":{"line":604,"column":5}},"175":{"start":{"line":603,"column":6},"end":{"line":603,"column":24}},"176":{"start":{"line":606,"column":4},"end":{"line":641,"column":5}},"177":{"start":{"line":607,"column":6},"end":{"line":634,"column":7}},"178":{"start":{"line":608,"column":8},"end":{"line":608,"column":37}},"179":{"start":{"line":610,"column":8},"end":{"line":612,"column":9}},"180":{"start":{"line":611,"column":10},"end":{"line":611,"column":16}},"181":{"start":{"line":614,"column":8},"end":{"line":614,"column":52}},"182":{"start":{"line":616,"column":8},"end":{"line":633,"column":9}},"183":{"start":{"line":617,"column":10},"end":{"line":617,"column":43}},"184":{"start":{"line":619,"column":10},"end":{"line":632,"column":12}},"185":{"start":{"line":620,"column":12},"end":{"line":631,"column":13}},"186":{"start":{"line":621,"column":14},"end":{"line":621,"column":46}},"187":{"start":{"line":625,"column":14},"end":{"line":625,"column":87}},"188":{"start":{"line":626,"column":14},"end":{"line":630,"column":17}},"189":{"start":{"line":639,"column":6},"end":{"line":639,"column":61}},"190":{"start":{"line":640,"column":6},"end":{"line":640,"column":63}},"191":{"start":{"line":643,"column":4},"end":{"line":650,"column":5}},"192":{"start":{"line":644,"column":6},"end":{"line":649,"column":7}},"193":{"start":{"line":645,"column":8},"end":{"line":645,"column":28}},"194":{"start":{"line":646,"column":8},"end":{"line":646,"column":32}},"195":{"start":{"line":647,"column":8},"end":{"line":647,"column":25}},"196":{"start":{"line":648,"column":8},"end":{"line":648,"column":32}},"197":{"start":{"line":652,"column":4},"end":{"line":652,"column":47}},"198":{"start":{"line":653,"column":4},"end":{"line":656,"column":5}},"199":{"start":{"line":654,"column":6},"end":{"line":654,"column":48}},"200":{"start":{"line":655,"column":6},"end":{"line":655,"column":44}},"201":{"start":{"line":657,"column":4},"end":{"line":657,"column":29}},"202":{"start":{"line":659,"column":4},"end":{"line":659,"column":15}},"203":{"start":{"line":664,"column":2},"end":{"line":787,"column":3}},"204":{"start":{"line":665,"column":4},"end":{"line":665,"column":19}},"205":{"start":{"line":666,"column":4},"end":{"line":666,"column":75}},"206":{"start":{"line":668,"column":4},"end":{"line":668,"column":34}},"207":{"start":{"line":670,"column":4},"end":{"line":670,"column":46}},"208":{"start":{"line":672,"column":4},"end":{"line":674,"column":5}},"209":{"start":{"line":673,"column":6},"end":{"line":673,"column":66}},"210":{"start":{"line":677,"column":4},"end":{"line":679,"column":5}},"211":{"start":{"line":678,"column":6},"end":{"line":678,"column":49}},"212":{"start":{"line":681,"column":4},"end":{"line":681,"column":36}},"213":{"start":{"line":683,"column":4},"end":{"line":683,"column":42}},"214":{"start":{"line":686,"column":4},"end":{"line":686,"column":56}},"215":{"start":{"line":687,"column":4},"end":{"line":690,"column":39}},"216":{"start":{"line":692,"column":4},"end":{"line":692,"column":35}},"217":{"start":{"line":693,"column":4},"end":{"line":695,"column":5}},"218":{"start":{"line":694,"column":6},"end":{"line":694,"column":39}},"219":{"start":{"line":697,"column":4},"end":{"line":697,"column":36}},"220":{"start":{"line":698,"column":4},"end":{"line":698,"column":42}},"221":{"start":{"line":701,"column":4},"end":{"line":701,"column":46}},"222":{"start":{"line":703,"column":4},"end":{"line":704,"column":51}},"223":{"start":{"line":706,"column":4},"end":{"line":707,"column":65}},"224":{"start":{"line":709,"column":4},"end":{"line":709,"column":54}},"225":{"start":{"line":710,"column":4},"end":{"line":715,"column":6}},"226":{"start":{"line":711,"column":6},"end":{"line":714,"column":7}},"227":{"start":{"line":712,"column":8},"end":{"line":712,"column":37}},"228":{"start":{"line":713,"column":8},"end":{"line":713,"column":25}},"229":{"start":{"line":717,"column":4},"end":{"line":717,"column":23}},"230":{"start":{"line":720,"column":4},"end":{"line":720,"column":35}},"231":{"start":{"line":722,"column":4},"end":{"line":722,"column":33}},"232":{"start":{"line":724,"column":4},"end":{"line":724,"column":25}},"233":{"start":{"line":725,"column":4},"end":{"line":725,"column":25}},"234":{"start":{"line":728,"column":4},"end":{"line":728,"column":45}},"235":{"start":{"line":731,"column":4},"end":{"line":731,"column":46}},"236":{"start":{"line":734,"column":4},"end":{"line":734,"column":38}},"237":{"start":{"line":736,"column":4},"end":{"line":746,"column":5}},"238":{"start":{"line":737,"column":6},"end":{"line":745,"column":7}},"239":{"start":{"line":738,"column":8},"end":{"line":738,"column":24}},"240":{"start":{"line":743,"column":11},"end":{"line":745,"column":7}},"241":{"start":{"line":744,"column":8},"end":{"line":744,"column":24}},"242":{"start":{"line":748,"column":4},"end":{"line":760,"column":5}},"243":{"start":{"line":749,"column":6},"end":{"line":755,"column":7}},"244":{"start":{"line":750,"column":8},"end":{"line":750,"column":46}},"245":{"start":{"line":751,"column":8},"end":{"line":751,"column":24}},"246":{"start":{"line":754,"column":8},"end":{"line":754,"column":37}},"247":{"start":{"line":756,"column":6},"end":{"line":756,"column":66}},"248":{"start":{"line":759,"column":6},"end":{"line":759,"column":28}},"249":{"start":{"line":764,"column":4},"end":{"line":766,"column":5}},"250":{"start":{"line":765,"column":6},"end":{"line":765,"column":36}},"251":{"start":{"line":768,"column":4},"end":{"line":769,"column":74}},"252":{"start":{"line":771,"column":4},"end":{"line":771,"column":42}},"253":{"start":{"line":773,"column":4},"end":{"line":784,"column":5}},"254":{"start":{"line":774,"column":6},"end":{"line":781,"column":8}},"255":{"start":{"line":783,"column":6},"end":{"line":783,"column":46}},"256":{"start":{"line":786,"column":4},"end":{"line":786,"column":15}},"257":{"start":{"line":790,"column":2},"end":{"line":804,"column":3}},"258":{"start":{"line":791,"column":4},"end":{"line":803,"column":5}},"259":{"start":{"line":807,"column":2},"end":{"line":813,"column":3}},"260":{"start":{"line":808,"column":4},"end":{"line":810,"column":6}},"261":{"start":{"line":809,"column":6},"end":{"line":809,"column":44}},"262":{"start":{"line":812,"column":4},"end":{"line":812,"column":18}},"263":{"start":{"line":817,"column":2},"end":{"line":834,"column":3}},"264":{"start":{"line":818,"column":4},"end":{"line":818,"column":45}},"265":{"start":{"line":819,"column":4},"end":{"line":819,"column":74}},"266":{"start":{"line":819,"column":47},"end":{"line":819,"column":73}},"267":{"start":{"line":821,"column":4},"end":{"line":821,"column":17}},"268":{"start":{"line":822,"column":4},"end":{"line":822,"column":37}},"269":{"start":{"line":824,"column":4},"end":{"line":831,"column":6}},"270":{"start":{"line":825,"column":6},"end":{"line":825,"column":63}},"271":{"start":{"line":826,"column":6},"end":{"line":830,"column":8}},"272":{"start":{"line":828,"column":10},"end":{"line":828,"column":27}},"273":{"start":{"line":833,"column":4},"end":{"line":833,"column":15}},"274":{"start":{"line":838,"column":2},"end":{"line":846,"column":3}},"275":{"start":{"line":839,"column":4},"end":{"line":839,"column":19}},"276":{"start":{"line":840,"column":4},"end":{"line":840,"column":57}},"277":{"start":{"line":842,"column":4},"end":{"line":845,"column":20}},"278":{"start":{"line":843,"column":6},"end":{"line":843,"column":47}},"279":{"start":{"line":845,"column":9},"end":{"line":845,"column":20}},"280":{"start":{"line":851,"column":2},"end":{"line":869,"column":3}},"281":{"start":{"line":852,"column":4},"end":{"line":852,"column":45}},"282":{"start":{"line":853,"column":4},"end":{"line":853,"column":74}},"283":{"start":{"line":853,"column":47},"end":{"line":853,"column":73}},"284":{"start":{"line":855,"column":4},"end":{"line":855,"column":19}},"285":{"start":{"line":856,"column":4},"end":{"line":856,"column":60}},"286":{"start":{"line":857,"column":4},"end":{"line":857,"column":52}},"287":{"start":{"line":858,"column":4},"end":{"line":858,"column":27}},"288":{"start":{"line":860,"column":4},"end":{"line":865,"column":5}},"289":{"start":{"line":861,"column":6},"end":{"line":864,"column":55}},"290":{"start":{"line":867,"column":4},"end":{"line":867,"column":30}},"291":{"start":{"line":868,"column":4},"end":{"line":868,"column":15}},"292":{"start":{"line":872,"column":2},"end":{"line":884,"column":3}},"293":{"start":{"line":873,"column":4},"end":{"line":873,"column":22}},"294":{"start":{"line":875,"column":4},"end":{"line":875,"column":49}},"295":{"start":{"line":876,"column":4},"end":{"line":876,"column":41}},"296":{"start":{"line":878,"column":4},"end":{"line":878,"column":38}},"297":{"start":{"line":879,"column":4},"end":{"line":883,"column":6}},"298":{"start":{"line":880,"column":6},"end":{"line":882,"column":8}},"299":{"start":{"line":881,"column":8},"end":{"line":881,"column":46}},"300":{"start":{"line":886,"column":2},"end":{"line":894,"column":3}},"301":{"start":{"line":887,"column":4},"end":{"line":893,"column":6}},"302":{"start":{"line":888,"column":6},"end":{"line":890,"column":7}},"303":{"start":{"line":889,"column":8},"end":{"line":889,"column":33}},"304":{"start":{"line":892,"column":6},"end":{"line":892,"column":64}},"305":{"start":{"line":898,"column":2},"end":{"line":930,"column":3}},"306":{"start":{"line":899,"column":4},"end":{"line":899,"column":21}},"307":{"start":{"line":901,"column":4},"end":{"line":901,"column":26}},"308":{"start":{"line":903,"column":4},"end":{"line":929,"column":5}},"309":{"start":{"line":904,"column":6},"end":{"line":904,"column":26}},"310":{"start":{"line":907,"column":6},"end":{"line":911,"column":8}},"311":{"start":{"line":908,"column":8},"end":{"line":910,"column":9}},"312":{"start":{"line":909,"column":10},"end":{"line":909,"column":53}},"313":{"start":{"line":913,"column":6},"end":{"line":913,"column":80}},"314":{"start":{"line":914,"column":6},"end":{"line":928,"column":8}},"315":{"start":{"line":915,"column":8},"end":{"line":916,"column":47}},"316":{"start":{"line":918,"column":8},"end":{"line":918,"column":43}},"317":{"start":{"line":919,"column":8},"end":{"line":919,"column":44}},"318":{"start":{"line":920,"column":8},"end":{"line":920,"column":44}},"319":{"start":{"line":921,"column":8},"end":{"line":921,"column":40}},"320":{"start":{"line":922,"column":8},"end":{"line":922,"column":46}},"321":{"start":{"line":923,"column":8},"end":{"line":923,"column":42}},"322":{"start":{"line":925,"column":8},"end":{"line":927,"column":9}},"323":{"start":{"line":926,"column":10},"end":{"line":926,"column":39}},"324":{"start":{"line":935,"column":2},"end":{"line":948,"column":3}},"325":{"start":{"line":936,"column":4},"end":{"line":936,"column":19}},"326":{"start":{"line":938,"column":4},"end":{"line":945,"column":6}},"327":{"start":{"line":939,"column":6},"end":{"line":944,"column":7}},"328":{"start":{"line":940,"column":8},"end":{"line":940,"column":24}},"329":{"start":{"line":943,"column":8},"end":{"line":943,"column":55}},"330":{"start":{"line":947,"column":4},"end":{"line":947,"column":15}},"331":{"start":{"line":953,"column":2},"end":{"line":977,"column":3}},"332":{"start":{"line":954,"column":4},"end":{"line":954,"column":19}},"333":{"start":{"line":955,"column":4},"end":{"line":955,"column":18}},"334":{"start":{"line":961,"column":4},"end":{"line":964,"column":5}},"335":{"start":{"line":962,"column":6},"end":{"line":962,"column":24}},"336":{"start":{"line":963,"column":6},"end":{"line":963,"column":17}},"337":{"start":{"line":966,"column":4},"end":{"line":972,"column":5}},"338":{"start":{"line":967,"column":6},"end":{"line":967,"column":49}},"339":{"start":{"line":970,"column":6},"end":{"line":970,"column":44}},"340":{"start":{"line":971,"column":6},"end":{"line":971,"column":17}},"341":{"start":{"line":974,"column":4},"end":{"line":974,"column":29}},"342":{"start":{"line":976,"column":4},"end":{"line":976,"column":15}},"343":{"start":{"line":980,"column":2},"end":{"line":982,"column":3}},"344":{"start":{"line":981,"column":4},"end":{"line":981,"column":15}},"345":{"start":{"line":985,"column":2},"end":{"line":987,"column":3}},"346":{"start":{"line":986,"column":4},"end":{"line":986,"column":24}},"347":{"start":{"line":990,"column":2},"end":{"line":996,"column":3}},"348":{"start":{"line":991,"column":4},"end":{"line":991,"column":40}},"349":{"start":{"line":992,"column":4},"end":{"line":992,"column":31}},"350":{"start":{"line":994,"column":4},"end":{"line":994,"column":31}},"351":{"start":{"line":995,"column":4},"end":{"line":995,"column":15}},"352":{"start":{"line":999,"column":2},"end":{"line":1005,"column":3}},"353":{"start":{"line":1000,"column":4},"end":{"line":1000,"column":41}},"354":{"start":{"line":1001,"column":4},"end":{"line":1001,"column":32}},"355":{"start":{"line":1003,"column":4},"end":{"line":1003,"column":33}},"356":{"start":{"line":1004,"column":4},"end":{"line":1004,"column":15}},"357":{"start":{"line":1008,"column":2},"end":{"line":1167,"column":3}},"358":{"start":{"line":1009,"column":4},"end":{"line":1009,"column":29}},"359":{"start":{"line":1010,"column":4},"end":{"line":1010,"column":30}},"360":{"start":{"line":1011,"column":4},"end":{"line":1011,"column":35}},"361":{"start":{"line":1012,"column":4},"end":{"line":1012,"column":39}},"362":{"start":{"line":1013,"column":4},"end":{"line":1013,"column":35}},"363":{"start":{"line":1014,"column":4},"end":{"line":1014,"column":24}},"364":{"start":{"line":1016,"column":4},"end":{"line":1016,"column":31}},"365":{"start":{"line":1018,"column":4},"end":{"line":1022,"column":5}},"366":{"start":{"line":1019,"column":6},"end":{"line":1019,"column":44}},"367":{"start":{"line":1020,"column":6},"end":{"line":1021,"column":43}},"368":{"start":{"line":1024,"column":4},"end":{"line":1044,"column":5}},"369":{"start":{"line":1026,"column":8},"end":{"line":1037,"column":9}},"370":{"start":{"line":1027,"column":10},"end":{"line":1032,"column":12}},"371":{"start":{"line":1028,"column":12},"end":{"line":1030,"column":13}},"372":{"start":{"line":1029,"column":14},"end":{"line":1029,"column":50}},"373":{"start":{"line":1031,"column":12},"end":{"line":1031,"column":18}},"374":{"start":{"line":1035,"column":10},"end":{"line":1035,"column":49}},"375":{"start":{"line":1036,"column":10},"end":{"line":1036,"column":16}},"376":{"start":{"line":1040,"column":8},"end":{"line":1040,"column":23}},"377":{"start":{"line":1041,"column":8},"end":{"line":1041,"column":68}},"378":{"start":{"line":1046,"column":4},"end":{"line":1046,"column":46}},"379":{"start":{"line":1049,"column":4},"end":{"line":1049,"column":24}},"380":{"start":{"line":1051,"column":4},"end":{"line":1078,"column":5}},"381":{"start":{"line":1052,"column":6},"end":{"line":1052,"column":76}},"382":{"start":{"line":1054,"column":6},"end":{"line":1054,"column":33}},"383":{"start":{"line":1055,"column":6},"end":{"line":1055,"column":66}},"384":{"start":{"line":1057,"column":6},"end":{"line":1057,"column":34}},"385":{"start":{"line":1058,"column":6},"end":{"line":1058,"column":32}},"386":{"start":{"line":1059,"column":6},"end":{"line":1059,"column":35}},"387":{"start":{"line":1060,"column":6},"end":{"line":1060,"column":35}},"388":{"start":{"line":1061,"column":6},"end":{"line":1061,"column":46}},"389":{"start":{"line":1062,"column":6},"end":{"line":1062,"column":43}},"390":{"start":{"line":1064,"column":6},"end":{"line":1064,"column":41}},"391":{"start":{"line":1065,"column":6},"end":{"line":1065,"column":61}},"392":{"start":{"line":1067,"column":6},"end":{"line":1069,"column":7}},"393":{"start":{"line":1068,"column":8},"end":{"line":1068,"column":14}},"394":{"start":{"line":1071,"column":6},"end":{"line":1075,"column":7}},"395":{"start":{"line":1072,"column":8},"end":{"line":1074,"column":39}},"396":{"start":{"line":1077,"column":6},"end":{"line":1077,"column":55}},"397":{"start":{"line":1081,"column":4},"end":{"line":1166,"column":5}},"398":{"start":{"line":1082,"column":6},"end":{"line":1082,"column":47}},"399":{"start":{"line":1083,"column":6},"end":{"line":1083,"column":76}},"400":{"start":{"line":1083,"column":49},"end":{"line":1083,"column":75}},"401":{"start":{"line":1085,"column":6},"end":{"line":1089,"column":7}},"402":{"start":{"line":1088,"column":8},"end":{"line":1088,"column":29}},"403":{"start":{"line":1091,"column":6},"end":{"line":1091,"column":39}},"404":{"start":{"line":1092,"column":6},"end":{"line":1092,"column":37}},"405":{"start":{"line":1094,"column":6},"end":{"line":1094,"column":29}},"406":{"start":{"line":1095,"column":6},"end":{"line":1095,"column":55}},"407":{"start":{"line":1097,"column":6},"end":{"line":1097,"column":24}},"408":{"start":{"line":1099,"column":6},"end":{"line":1103,"column":7}},"409":{"start":{"line":1105,"column":6},"end":{"line":1105,"column":63}},"410":{"start":{"line":1106,"column":6},"end":{"line":1106,"column":24}},"411":{"start":{"line":1108,"column":6},"end":{"line":1113,"column":7}},"412":{"start":{"line":1109,"column":8},"end":{"line":1112,"column":9}},"413":{"start":{"line":1110,"column":10},"end":{"line":1111,"column":45}},"414":{"start":{"line":1115,"column":6},"end":{"line":1145,"column":7}},"415":{"start":{"line":1116,"column":8},"end":{"line":1117,"column":75}},"416":{"start":{"line":1119,"column":8},"end":{"line":1121,"column":9}},"417":{"start":{"line":1120,"column":10},"end":{"line":1120,"column":38}},"418":{"start":{"line":1123,"column":8},"end":{"line":1123,"column":29}},"419":{"start":{"line":1124,"column":8},"end":{"line":1124,"column":28}},"420":{"start":{"line":1126,"column":8},"end":{"line":1128,"column":9}},"421":{"start":{"line":1127,"column":10},"end":{"line":1127,"column":50}},"422":{"start":{"line":1131,"column":8},"end":{"line":1131,"column":49}},"423":{"start":{"line":1132,"column":8},"end":{"line":1132,"column":25}},"424":{"start":{"line":1134,"column":8},"end":{"line":1140,"column":13}},"425":{"start":{"line":1142,"column":8},"end":{"line":1144,"column":9}},"426":{"start":{"line":1143,"column":10},"end":{"line":1143,"column":50}},"427":{"start":{"line":1147,"column":6},"end":{"line":1165,"column":7}},"428":{"start":{"line":1148,"column":8},"end":{"line":1150,"column":9}},"429":{"start":{"line":1149,"column":10},"end":{"line":1149,"column":42}},"430":{"start":{"line":1155,"column":8},"end":{"line":1155,"column":29}},"431":{"start":{"line":1157,"column":8},"end":{"line":1161,"column":9}},"432":{"start":{"line":1158,"column":10},"end":{"line":1160,"column":32}},"433":{"start":{"line":1163,"column":8},"end":{"line":1164,"column":70}},"434":{"start":{"line":1170,"column":2},"end":{"line":1199,"column":3}},"435":{"start":{"line":1171,"column":4},"end":{"line":1171,"column":29}},"436":{"start":{"line":1171,"column":17},"end":{"line":1171,"column":29}},"437":{"start":{"line":1173,"column":4},"end":{"line":1173,"column":22}},"438":{"start":{"line":1174,"column":4},"end":{"line":1174,"column":26}},"439":{"start":{"line":1176,"column":4},"end":{"line":1198,"column":5}},"440":{"start":{"line":1177,"column":6},"end":{"line":1178,"column":43}},"441":{"start":{"line":1180,"column":6},"end":{"line":1184,"column":7}},"442":{"start":{"line":1181,"column":8},"end":{"line":1183,"column":11}},"443":{"start":{"line":1186,"column":6},"end":{"line":1186,"column":35}},"444":{"start":{"line":1187,"column":6},"end":{"line":1187,"column":17}},"445":{"start":{"line":1189,"column":9},"end":{"line":1198,"column":5}},"446":{"start":{"line":1190,"column":6},"end":{"line":1194,"column":7}},"447":{"start":{"line":1191,"column":8},"end":{"line":1193,"column":10}},"448":{"start":{"line":1196,"column":6},"end":{"line":1196,"column":51}},"449":{"start":{"line":1197,"column":6},"end":{"line":1197,"column":17}},"450":{"start":{"line":1202,"column":2},"end":{"line":1255,"column":3}},"451":{"start":{"line":1204,"column":4},"end":{"line":1204,"column":22}},"452":{"start":{"line":1205,"column":4},"end":{"line":1205,"column":27}},"453":{"start":{"line":1207,"column":4},"end":{"line":1228,"column":5}},"454":{"start":{"line":1208,"column":6},"end":{"line":1217,"column":11}},"455":{"start":{"line":1219,"column":6},"end":{"line":1219,"column":21}},"456":{"start":{"line":1223,"column":9},"end":{"line":1228,"column":5}},"457":{"start":{"line":1226,"column":6},"end":{"line":1226,"column":20}},"458":{"start":{"line":1227,"column":6},"end":{"line":1227,"column":21}},"459":{"start":{"line":1230,"column":4},"end":{"line":1230,"column":35}},"460":{"start":{"line":1231,"column":4},"end":{"line":1231,"column":49}},"461":{"start":{"line":1233,"column":4},"end":{"line":1240,"column":8}},"462":{"start":{"line":1241,"column":4},"end":{"line":1241,"column":30}},"463":{"start":{"line":1243,"column":4},"end":{"line":1243,"column":29}},"464":{"start":{"line":1244,"column":4},"end":{"line":1244,"column":38}},"465":{"start":{"line":1247,"column":4},"end":{"line":1249,"column":5}},"466":{"start":{"line":1248,"column":6},"end":{"line":1248,"column":50}},"467":{"start":{"line":1251,"column":4},"end":{"line":1254,"column":5}},"468":{"start":{"line":1257,"column":2},"end":{"line":1296,"column":3}},"469":{"start":{"line":1259,"column":4},"end":{"line":1259,"column":27}},"470":{"start":{"line":1261,"column":4},"end":{"line":1274,"column":5}},"471":{"start":{"line":1262,"column":6},"end":{"line":1271,"column":11}},"472":{"start":{"line":1273,"column":6},"end":{"line":1273,"column":21}},"473":{"start":{"line":1276,"column":4},"end":{"line":1276,"column":35}},"474":{"start":{"line":1277,"column":4},"end":{"line":1277,"column":49}},"475":{"start":{"line":1279,"column":4},"end":{"line":1289,"column":9}},"476":{"start":{"line":1291,"column":4},"end":{"line":1291,"column":49}},"477":{"start":{"line":1293,"column":4},"end":{"line":1295,"column":5}},"478":{"start":{"line":1294,"column":6},"end":{"line":1294,"column":39}},"479":{"start":{"line":1299,"column":2},"end":{"line":1313,"column":3}},"480":{"start":{"line":1300,"column":4},"end":{"line":1300,"column":19}},"481":{"start":{"line":1302,"column":4},"end":{"line":1302,"column":54}},"482":{"start":{"line":1304,"column":4},"end":{"line":1304,"column":44}},"483":{"start":{"line":1306,"column":4},"end":{"line":1310,"column":5}},"484":{"start":{"line":1307,"column":6},"end":{"line":1307,"column":80}},"485":{"start":{"line":1308,"column":6},"end":{"line":1308,"column":52}},"486":{"start":{"line":1309,"column":6},"end":{"line":1309,"column":41}},"487":{"start":{"line":1312,"column":4},"end":{"line":1312,"column":14}},"488":{"start":{"line":1316,"column":2},"end":{"line":1362,"column":3}},"489":{"start":{"line":1317,"column":4},"end":{"line":1317,"column":19}},"490":{"start":{"line":1318,"column":4},"end":{"line":1318,"column":31}},"491":{"start":{"line":1320,"column":4},"end":{"line":1320,"column":38}},"492":{"start":{"line":1321,"column":4},"end":{"line":1321,"column":52}},"493":{"start":{"line":1323,"column":4},"end":{"line":1323,"column":27}},"494":{"start":{"line":1325,"column":4},"end":{"line":1325,"column":15}},"495":{"start":{"line":1326,"column":4},"end":{"line":1338,"column":5}},"496":{"start":{"line":1327,"column":6},"end":{"line":1327,"column":33}},"497":{"start":{"line":1327,"column":19},"end":{"line":1327,"column":33}},"498":{"start":{"line":1328,"column":6},"end":{"line":1328,"column":18}},"499":{"start":{"line":1329,"column":6},"end":{"line":1332,"column":8}},"500":{"start":{"line":1330,"column":8},"end":{"line":1330,"column":35}},"501":{"start":{"line":1330,"column":29},"end":{"line":1330,"column":35}},"502":{"start":{"line":1331,"column":8},"end":{"line":1331,"column":18}},"503":{"start":{"line":1334,"column":6},"end":{"line":1335,"column":63}},"504":{"start":{"line":1337,"column":6},"end":{"line":1337,"column":20}},"505":{"start":{"line":1340,"column":4},"end":{"line":1342,"column":48}},"506":{"start":{"line":1344,"column":4},"end":{"line":1347,"column":5}},"507":{"start":{"line":1345,"column":6},"end":{"line":1345,"column":74}},"508":{"start":{"line":1346,"column":6},"end":{"line":1346,"column":43}},"509":{"start":{"line":1351,"column":4},"end":{"line":1351,"column":25}},"510":{"start":{"line":1353,"column":4},"end":{"line":1355,"column":5}},"511":{"start":{"line":1354,"column":6},"end":{"line":1354,"column":47}},"512":{"start":{"line":1357,"column":4},"end":{"line":1359,"column":5}},"513":{"start":{"line":1358,"column":6},"end":{"line":1358,"column":47}},"514":{"start":{"line":1361,"column":4},"end":{"line":1361,"column":19}},"515":{"start":{"line":1365,"column":2},"end":{"line":1391,"column":3}},"516":{"start":{"line":1366,"column":4},"end":{"line":1366,"column":19}},"517":{"start":{"line":1368,"column":4},"end":{"line":1374,"column":5}},"518":{"start":{"line":1369,"column":6},"end":{"line":1373,"column":32}},"519":{"start":{"line":1376,"column":4},"end":{"line":1378,"column":39}},"520":{"start":{"line":1380,"column":4},"end":{"line":1386,"column":5}},"521":{"start":{"line":1381,"column":6},"end":{"line":1385,"column":7}},"522":{"start":{"line":1382,"column":8},"end":{"line":1384,"column":9}},"523":{"start":{"line":1383,"column":10},"end":{"line":1383,"column":43}},"524":{"start":{"line":1390,"column":4},"end":{"line":1390,"column":28}},"525":{"start":{"line":1394,"column":2},"end":{"line":1397,"column":3}},"526":{"start":{"line":1395,"column":4},"end":{"line":1395,"column":44}},"527":{"start":{"line":1396,"column":4},"end":{"line":1396,"column":15}},"528":{"start":{"line":1401,"column":2},"end":{"line":1416,"column":3}},"529":{"start":{"line":1402,"column":4},"end":{"line":1405,"column":5}},"530":{"start":{"line":1403,"column":6},"end":{"line":1403,"column":26}},"531":{"start":{"line":1404,"column":6},"end":{"line":1404,"column":23}},"532":{"start":{"line":1407,"column":4},"end":{"line":1411,"column":6}},"533":{"start":{"line":1413,"column":4},"end":{"line":1413,"column":59}},"534":{"start":{"line":1415,"column":4},"end":{"line":1415,"column":15}},"535":{"start":{"line":1419,"column":2},"end":{"line":1430,"column":3}},"536":{"start":{"line":1420,"column":4},"end":{"line":1420,"column":53}},"537":{"start":{"line":1424,"column":4},"end":{"line":1424,"column":32}},"538":{"start":{"line":1425,"column":4},"end":{"line":1425,"column":63}},"539":{"start":{"line":1426,"column":4},"end":{"line":1426,"column":105}},"540":{"start":{"line":1427,"column":4},"end":{"line":1427,"column":95}},"541":{"start":{"line":1429,"column":4},"end":{"line":1429,"column":64}},"542":{"start":{"line":1434,"column":2},"end":{"line":1451,"column":3}},"543":{"start":{"line":1435,"column":4},"end":{"line":1435,"column":45}},"544":{"start":{"line":1436,"column":4},"end":{"line":1436,"column":74}},"545":{"start":{"line":1436,"column":47},"end":{"line":1436,"column":73}},"546":{"start":{"line":1438,"column":4},"end":{"line":1438,"column":25}},"547":{"start":{"line":1440,"column":4},"end":{"line":1444,"column":6}},"548":{"start":{"line":1447,"column":4},"end":{"line":1450,"column":5}},"549":{"start":{"line":1448,"column":6},"end":{"line":1448,"column":24}},"550":{"start":{"line":1449,"column":6},"end":{"line":1449,"column":31}},"551":{"start":{"line":1455,"column":2},"end":{"line":1457,"column":3}},"552":{"start":{"line":1456,"column":4},"end":{"line":1456,"column":39}},"553":{"start":{"line":1461,"column":2},"end":{"line":1464,"column":3}},"554":{"start":{"line":1462,"column":4},"end":{"line":1462,"column":32}},"555":{"start":{"line":1463,"column":4},"end":{"line":1463,"column":15}},"556":{"start":{"line":1468,"column":2},"end":{"line":1468,"column":63}},"557":{"start":{"line":1469,"column":2},"end":{"line":1469,"column":63}},"558":{"start":{"line":1470,"column":2},"end":{"line":1470,"column":64}},"559":{"start":{"line":1471,"column":2},"end":{"line":1471,"column":64}},"560":{"start":{"line":1475,"column":2},"end":{"line":1475,"column":80}},"561":{"start":{"line":1476,"column":2},"end":{"line":1476,"column":79}},"562":{"start":{"line":1478,"column":2},"end":{"line":1478,"column":13}},"563":{"start":{"line":1482,"column":2},"end":{"line":1484,"column":3}},"564":{"start":{"line":1483,"column":4},"end":{"line":1483,"column":10}},"565":{"start":{"line":1486,"column":2},"end":{"line":1489,"column":3}},"566":{"start":{"line":1487,"column":4},"end":{"line":1487,"column":22}},"567":{"start":{"line":1488,"column":4},"end":{"line":1488,"column":10}},"568":{"start":{"line":1491,"column":2},"end":{"line":1525,"column":3}},"569":{"start":{"line":1492,"column":4},"end":{"line":1492,"column":21}},"570":{"start":{"line":1493,"column":4},"end":{"line":1493,"column":13}},"571":{"start":{"line":1495,"column":4},"end":{"line":1519,"column":5}},"572":{"start":{"line":1496,"column":6},"end":{"line":1496,"column":49}},"573":{"start":{"line":1497,"column":6},"end":{"line":1497,"column":61}},"574":{"start":{"line":1500,"column":6},"end":{"line":1500,"column":37}},"575":{"start":{"line":1501,"column":6},"end":{"line":1501,"column":28}},"576":{"start":{"line":1502,"column":6},"end":{"line":1502,"column":44}},"577":{"start":{"line":1504,"column":6},"end":{"line":1504,"column":51}},"578":{"start":{"line":1505,"column":6},"end":{"line":1505,"column":55}},"579":{"start":{"line":1507,"column":6},"end":{"line":1509,"column":66}},"580":{"start":{"line":1511,"column":6},"end":{"line":1518,"column":7}},"581":{"start":{"line":1512,"column":8},"end":{"line":1512,"column":29}},"582":{"start":{"line":1515,"column":8},"end":{"line":1517,"column":10}},"583":{"start":{"line":1516,"column":10},"end":{"line":1516,"column":73}},"584":{"start":{"line":1521,"column":4},"end":{"line":1523,"column":5}},"585":{"start":{"line":1522,"column":6},"end":{"line":1522,"column":23}},"586":{"start":{"line":1524,"column":4},"end":{"line":1524,"column":16}},"587":{"start":{"line":1527,"column":2},"end":{"line":1527,"column":34}},"588":{"start":{"line":1529,"column":2},"end":{"line":1537,"column":3}},"589":{"start":{"line":1530,"column":4},"end":{"line":1530,"column":41}},"590":{"start":{"line":1532,"column":4},"end":{"line":1532,"column":32}},"591":{"start":{"line":1533,"column":4},"end":{"line":1533,"column":53}},"592":{"start":{"line":1534,"column":4},"end":{"line":1534,"column":46}},"593":{"start":{"line":1536,"column":4},"end":{"line":1536,"column":36}},"594":{"start":{"line":1539,"column":2},"end":{"line":1543,"column":4}},"595":{"start":{"line":1540,"column":4},"end":{"line":1542,"column":5}},"596":{"start":{"line":1541,"column":6},"end":{"line":1541,"column":39}},"597":{"start":{"line":1545,"column":2},"end":{"line":1549,"column":3}},"598":{"start":{"line":1546,"column":4},"end":{"line":1546,"column":55}},"599":{"start":{"line":1548,"column":4},"end":{"line":1548,"column":58}},"600":{"start":{"line":1551,"column":2},"end":{"line":1564,"column":3}},"601":{"start":{"line":1552,"column":4},"end":{"line":1552,"column":22}},"602":{"start":{"line":1554,"column":4},"end":{"line":1554,"column":48}},"603":{"start":{"line":1555,"column":4},"end":{"line":1557,"column":5}},"604":{"start":{"line":1556,"column":6},"end":{"line":1556,"column":13}},"605":{"start":{"line":1559,"column":4},"end":{"line":1563,"column":5}},"606":{"start":{"line":1560,"column":6},"end":{"line":1562,"column":7}},"607":{"start":{"line":1561,"column":8},"end":{"line":1561,"column":42}},"608":{"start":{"line":1566,"column":2},"end":{"line":1566,"column":13}},"609":{"start":{"line":1571,"column":0},"end":{"line":1584,"column":1}},"610":{"start":{"line":1572,"column":2},"end":{"line":1583,"column":3}},"611":{"start":{"line":1588,"column":0},"end":{"line":1598,"column":1}},"612":{"start":{"line":1589,"column":2},"end":{"line":1595,"column":3}},"613":{"start":{"line":1590,"column":4},"end":{"line":1594,"column":5}},"614":{"start":{"line":1591,"column":6},"end":{"line":1593,"column":60}},"615":{"start":{"line":1597,"column":2},"end":{"line":1597,"column":15}},"616":{"start":{"line":1601,"column":0},"end":{"line":1610,"column":1}},"617":{"start":{"line":1602,"column":2},"end":{"line":1604,"column":3}},"618":{"start":{"line":1603,"column":4},"end":{"line":1603,"column":40}},"619":{"start":{"line":1606,"column":2},"end":{"line":1606,"column":63}},"620":{"start":{"line":1607,"column":2},"end":{"line":1607,"column":32}},"621":{"start":{"line":1609,"column":2},"end":{"line":1609,"column":12}},"622":{"start":{"line":1612,"column":0},"end":{"line":1623,"column":1}},"623":{"start":{"line":1613,"column":2},"end":{"line":1622,"column":3}},"624":{"start":{"line":1614,"column":4},"end":{"line":1614,"column":45}},"625":{"start":{"line":1615,"column":4},"end":{"line":1615,"column":74}},"626":{"start":{"line":1615,"column":47},"end":{"line":1615,"column":73}},"627":{"start":{"line":1617,"column":4},"end":{"line":1617,"column":23}},"628":{"start":{"line":1618,"column":4},"end":{"line":1620,"column":19}},"629":{"start":{"line":1621,"column":4},"end":{"line":1621,"column":28}},"630":{"start":{"line":1625,"column":0},"end":{"line":1636,"column":1}},"631":{"start":{"line":1626,"column":2},"end":{"line":1630,"column":3}},"632":{"start":{"line":1627,"column":4},"end":{"line":1629,"column":5}},"633":{"start":{"line":1628,"column":6},"end":{"line":1628,"column":24}},"634":{"start":{"line":1631,"column":2},"end":{"line":1631,"column":79}},"635":{"start":{"line":1632,"column":2},"end":{"line":1632,"column":77}},"636":{"start":{"line":1633,"column":2},"end":{"line":1633,"column":77}},"637":{"start":{"line":1634,"column":2},"end":{"line":1634,"column":79}},"638":{"start":{"line":1635,"column":2},"end":{"line":1635,"column":79}},"639":{"start":{"line":1638,"column":0},"end":{"line":1643,"column":1}},"640":{"start":{"line":1639,"column":2},"end":{"line":1642,"column":3}},"641":{"start":{"line":1640,"column":4},"end":{"line":1640,"column":18}},"642":{"start":{"line":1641,"column":4},"end":{"line":1641,"column":24}},"643":{"start":{"line":1645,"column":0},"end":{"line":1649,"column":1}},"644":{"start":{"line":1646,"column":2},"end":{"line":1646,"column":56}},"645":{"start":{"line":1647,"column":2},"end":{"line":1647,"column":59}},"646":{"start":{"line":1648,"column":2},"end":{"line":1648,"column":56}},"647":{"start":{"line":1652,"column":0},"end":{"line":1732,"column":1}},"648":{"start":{"line":1653,"column":2},"end":{"line":1653,"column":25}},"649":{"start":{"line":1655,"column":2},"end":{"line":1660,"column":3}},"650":{"start":{"line":1662,"column":2},"end":{"line":1662,"column":49}},"651":{"start":{"line":1665,"column":2},"end":{"line":1667,"column":3}},"652":{"start":{"line":1666,"column":4},"end":{"line":1666,"column":41}},"653":{"start":{"line":1671,"column":2},"end":{"line":1677,"column":4}},"654":{"start":{"line":1672,"column":4},"end":{"line":1672,"column":29}},"655":{"start":{"line":1674,"column":4},"end":{"line":1674,"column":62}},"656":{"start":{"line":1675,"column":4},"end":{"line":1675,"column":59}},"657":{"start":{"line":1676,"column":4},"end":{"line":1676,"column":50}},"658":{"start":{"line":1679,"column":2},"end":{"line":1729,"column":3}},"659":{"start":{"line":1681,"column":4},"end":{"line":1713,"column":5}},"660":{"start":{"line":1682,"column":6},"end":{"line":1682,"column":36}},"661":{"start":{"line":1683,"column":6},"end":{"line":1683,"column":34}},"662":{"start":{"line":1684,"column":6},"end":{"line":1684,"column":61}},"663":{"start":{"line":1686,"column":6},"end":{"line":1686,"column":26}},"664":{"start":{"line":1687,"column":6},"end":{"line":1687,"column":28}},"665":{"start":{"line":1688,"column":6},"end":{"line":1688,"column":29}},"666":{"start":{"line":1689,"column":6},"end":{"line":1689,"column":28}},"667":{"start":{"line":1690,"column":6},"end":{"line":1690,"column":33}},"668":{"start":{"line":1692,"column":6},"end":{"line":1692,"column":26}},"669":{"start":{"line":1693,"column":6},"end":{"line":1693,"column":40}},"670":{"start":{"line":1694,"column":6},"end":{"line":1694,"column":43}},"671":{"start":{"line":1696,"column":6},"end":{"line":1696,"column":54}},"672":{"start":{"line":1697,"column":6},"end":{"line":1697,"column":66}},"673":{"start":{"line":1698,"column":6},"end":{"line":1698,"column":50}},"674":{"start":{"line":1699,"column":6},"end":{"line":1699,"column":41}},"675":{"start":{"line":1700,"column":6},"end":{"line":1700,"column":35}},"676":{"start":{"line":1702,"column":6},"end":{"line":1704,"column":7}},"677":{"start":{"line":1707,"column":6},"end":{"line":1709,"column":38}},"678":{"start":{"line":1711,"column":6},"end":{"line":1711,"column":66}},"679":{"start":{"line":1712,"column":6},"end":{"line":1712,"column":67}},"680":{"start":{"line":1715,"column":4},"end":{"line":1722,"column":5}},"681":{"start":{"line":1716,"column":6},"end":{"line":1720,"column":8}},"682":{"start":{"line":1721,"column":6},"end":{"line":1721,"column":41}},"683":{"start":{"line":1725,"column":4},"end":{"line":1728,"column":5}},"684":{"start":{"line":1726,"column":6},"end":{"line":1726,"column":50}},"685":{"start":{"line":1727,"column":6},"end":{"line":1727,"column":43}},"686":{"start":{"line":1731,"column":2},"end":{"line":1731,"column":17}}},"branchMap":{"1":{"line":211,"type":"cond-expr","locations":[{"start":{"line":212,"column":10},"end":{"line":212,"column":60}},{"start":{"line":213,"column":8},"end":{"line":213,"column":50}}]},"2":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":2},"end":{"line":230,"column":2}},{"start":{"line":230,"column":2},"end":{"line":230,"column":2}}]},"3":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":0},"end":{"line":277,"column":0}},{"start":{"line":277,"column":0},"end":{"line":277,"column":0}}]},"4":{"line":284,"type":"binary-expr","locations":[{"start":{"line":284,"column":20},"end":{"line":284,"column":35}},{"start":{"line":284,"column":39},"end":{"line":284,"column":41}}]},"5":{"line":305,"type":"binary-expr","locations":[{"start":{"line":305,"column":26},"end":{"line":305,"column":47}},{"start":{"line":305,"column":51},"end":{"line":305,"column":72}}]},"6":{"line":306,"type":"binary-expr","locations":[{"start":{"line":306,"column":26},"end":{"line":306,"column":47}},{"start":{"line":306,"column":51},"end":{"line":306,"column":72}}]},"7":{"line":444,"type":"binary-expr","locations":[{"start":{"line":444,"column":11},"end":{"line":444,"column":17}},{"start":{"line":444,"column":21},"end":{"line":444,"column":40}}]},"8":{"line":445,"type":"cond-expr","locations":[{"start":{"line":445,"column":36},"end":{"line":445,"column":55}},{"start":{"line":445,"column":58},"end":{"line":445,"column":64}}]},"9":{"line":461,"type":"if","locations":[{"start":{"line":461,"column":2},"end":{"line":461,"column":2}},{"start":{"line":461,"column":2},"end":{"line":461,"column":2}}]},"10":{"line":461,"type":"binary-expr","locations":[{"start":{"line":461,"column":6},"end":{"line":461,"column":25}},{"start":{"line":461,"column":29},"end":{"line":461,"column":41}}]},"11":{"line":500,"type":"if","locations":[{"start":{"line":500,"column":2},"end":{"line":500,"column":2}},{"start":{"line":500,"column":2},"end":{"line":500,"column":2}}]},"12":{"line":500,"type":"binary-expr","locations":[{"start":{"line":500,"column":6},"end":{"line":500,"column":28}},{"start":{"line":500,"column":32},"end":{"line":500,"column":49}}]},"13":{"line":501,"type":"binary-expr","locations":[{"start":{"line":501,"column":21},"end":{"line":501,"column":35}},{"start":{"line":501,"column":39},"end":{"line":501,"column":41}}]},"14":{"line":511,"type":"if","locations":[{"start":{"line":511,"column":2},"end":{"line":511,"column":2}},{"start":{"line":511,"column":2},"end":{"line":511,"column":2}}]},"15":{"line":514,"type":"if","locations":[{"start":{"line":514,"column":4},"end":{"line":514,"column":4}},{"start":{"line":514,"column":4},"end":{"line":514,"column":4}}]},"16":{"line":564,"type":"binary-expr","locations":[{"start":{"line":564,"column":15},"end":{"line":564,"column":24}},{"start":{"line":564,"column":28},"end":{"line":564,"column":41}}]},"17":{"line":567,"type":"if","locations":[{"start":{"line":567,"column":6},"end":{"line":567,"column":6}},{"start":{"line":567,"column":6},"end":{"line":567,"column":6}}]},"18":{"line":567,"type":"binary-expr","locations":[{"start":{"line":567,"column":10},"end":{"line":567,"column":60}},{"start":{"line":568,"column":8},"end":{"line":568,"column":70}}]},"19":{"line":580,"type":"if","locations":[{"start":{"line":580,"column":4},"end":{"line":580,"column":4}},{"start":{"line":580,"column":4},"end":{"line":580,"column":4}}]},"20":{"line":585,"type":"if","locations":[{"start":{"line":585,"column":4},"end":{"line":585,"column":4}},{"start":{"line":585,"column":4},"end":{"line":585,"column":4}}]},"21":{"line":597,"type":"if","locations":[{"start":{"line":597,"column":4},"end":{"line":597,"column":4}},{"start":{"line":597,"column":4},"end":{"line":597,"column":4}}]},"22":{"line":597,"type":"binary-expr","locations":[{"start":{"line":597,"column":8},"end":{"line":597,"column":27}},{"start":{"line":598,"column":6},"end":{"line":598,"column":26}},{"start":{"line":599,"column":6},"end":{"line":599,"column":28}},{"start":{"line":600,"column":6},"end":{"line":600,"column":28}},{"start":{"line":601,"column":6},"end":{"line":601,"column":30}},{"start":{"line":602,"column":6},"end":{"line":602,"column":29}}]},"23":{"line":606,"type":"if","locations":[{"start":{"line":606,"column":4},"end":{"line":606,"column":4}},{"start":{"line":606,"column":4},"end":{"line":606,"column":4}}]},"24":{"line":608,"type":"binary-expr","locations":[{"start":{"line":608,"column":21},"end":{"line":608,"column":31}},{"start":{"line":608,"column":35},"end":{"line":608,"column":37}}]},"25":{"line":610,"type":"if","locations":[{"start":{"line":610,"column":8},"end":{"line":610,"column":8}},{"start":{"line":610,"column":8},"end":{"line":610,"column":8}}]},"26":{"line":610,"type":"binary-expr","locations":[{"start":{"line":610,"column":12},"end":{"line":610,"column":29}},{"start":{"line":610,"column":33},"end":{"line":610,"column":56}}]},"27":{"line":616,"type":"if","locations":[{"start":{"line":616,"column":8},"end":{"line":616,"column":8}},{"start":{"line":616,"column":8},"end":{"line":616,"column":8}}]},"28":{"line":653,"type":"if","locations":[{"start":{"line":653,"column":4},"end":{"line":653,"column":4}},{"start":{"line":653,"column":4},"end":{"line":653,"column":4}}]},"29":{"line":672,"type":"if","locations":[{"start":{"line":672,"column":4},"end":{"line":672,"column":4}},{"start":{"line":672,"column":4},"end":{"line":672,"column":4}}]},"30":{"line":677,"type":"binary-expr","locations":[{"start":{"line":677,"column":17},"end":{"line":677,"column":28}},{"start":{"line":677,"column":32},"end":{"line":679,"column":5}}]},"31":{"line":678,"type":"binary-expr","locations":[{"start":{"line":678,"column":28},"end":{"line":678,"column":40}},{"start":{"line":678,"column":44},"end":{"line":678,"column":48}}]},"32":{"line":681,"type":"binary-expr","locations":[{"start":{"line":681,"column":18},"end":{"line":681,"column":30}},{"start":{"line":681,"column":34},"end":{"line":681,"column":36}}]},"33":{"line":686,"type":"binary-expr","locations":[{"start":{"line":686,"column":26},"end":{"line":686,"column":45}},{"start":{"line":686,"column":49},"end":{"line":686,"column":56}}]},"34":{"line":687,"type":"binary-expr","locations":[{"start":{"line":687,"column":30},"end":{"line":687,"column":53}},{"start":{"line":688,"column":6},"end":{"line":690,"column":39}}]},"35":{"line":689,"type":"cond-expr","locations":[{"start":{"line":690,"column":9},"end":{"line":690,"column":33}},{"start":{"line":690,"column":36},"end":{"line":690,"column":38}}]},"36":{"line":689,"type":"cond-expr","locations":[{"start":{"line":689,"column":37},"end":{"line":689,"column":43}},{"start":{"line":689,"column":46},"end":{"line":689,"column":64}}]},"37":{"line":693,"type":"if","locations":[{"start":{"line":693,"column":4},"end":{"line":693,"column":4}},{"start":{"line":693,"column":4},"end":{"line":693,"column":4}}]},"38":{"line":703,"type":"cond-expr","locations":[{"start":{"line":704,"column":8},"end":{"line":704,"column":33}},{"start":{"line":704,"column":36},"end":{"line":704,"column":51}}]},"39":{"line":703,"type":"binary-expr","locations":[{"start":{"line":703,"column":22},"end":{"line":703,"column":41}},{"start":{"line":703,"column":45},"end":{"line":703,"column":77}}]},"40":{"line":706,"type":"cond-expr","locations":[{"start":{"line":707,"column":8},"end":{"line":707,"column":40}},{"start":{"line":707,"column":43},"end":{"line":707,"column":65}}]},"41":{"line":706,"type":"binary-expr","locations":[{"start":{"line":706,"column":29},"end":{"line":706,"column":50}},{"start":{"line":706,"column":54},"end":{"line":706,"column":93}}]},"42":{"line":709,"type":"binary-expr","locations":[{"start":{"line":709,"column":32},"end":{"line":709,"column":47}},{"start":{"line":709,"column":51},"end":{"line":709,"column":53}}]},"43":{"line":711,"type":"if","locations":[{"start":{"line":711,"column":6},"end":{"line":711,"column":6}},{"start":{"line":711,"column":6},"end":{"line":711,"column":6}}]},"44":{"line":736,"type":"if","locations":[{"start":{"line":736,"column":4},"end":{"line":736,"column":4}},{"start":{"line":736,"column":4},"end":{"line":736,"column":4}}]},"45":{"line":737,"type":"if","locations":[{"start":{"line":737,"column":6},"end":{"line":737,"column":6}},{"start":{"line":737,"column":6},"end":{"line":737,"column":6}}]},"46":{"line":737,"type":"binary-expr","locations":[{"start":{"line":737,"column":10},"end":{"line":737,"column":28}},{"start":{"line":737,"column":32},"end":{"line":737,"column":56}}]},"47":{"line":743,"type":"if","locations":[{"start":{"line":743,"column":11},"end":{"line":743,"column":11}},{"start":{"line":743,"column":11},"end":{"line":743,"column":11}}]},"48":{"line":743,"type":"binary-expr","locations":[{"start":{"line":743,"column":15},"end":{"line":743,"column":25}},{"start":{"line":743,"column":29},"end":{"line":743,"column":66}}]},"49":{"line":748,"type":"if","locations":[{"start":{"line":748,"column":4},"end":{"line":748,"column":4}},{"start":{"line":748,"column":4},"end":{"line":748,"column":4}}]},"50":{"line":749,"type":"if","locations":[{"start":{"line":749,"column":6},"end":{"line":749,"column":6}},{"start":{"line":749,"column":6},"end":{"line":749,"column":6}}]},"51":{"line":764,"type":"if","locations":[{"start":{"line":764,"column":4},"end":{"line":764,"column":4}},{"start":{"line":764,"column":4},"end":{"line":764,"column":4}}]},"52":{"line":764,"type":"binary-expr","locations":[{"start":{"line":764,"column":8},"end":{"line":764,"column":14}},{"start":{"line":764,"column":18},"end":{"line":764,"column":25}},{"start":{"line":764,"column":29},"end":{"line":764,"column":56}}]},"53":{"line":769,"type":"binary-expr","locations":[{"start":{"line":769,"column":6},"end":{"line":769,"column":44}},{"start":{"line":769,"column":48},"end":{"line":769,"column":74}}]},"54":{"line":773,"type":"if","locations":[{"start":{"line":773,"column":4},"end":{"line":773,"column":4}},{"start":{"line":773,"column":4},"end":{"line":773,"column":4}}]},"55":{"line":776,"type":"cond-expr","locations":[{"start":{"line":776,"column":28},"end":{"line":776,"column":33}},{"start":{"line":776,"column":36},"end":{"line":776,"column":41}}]},"56":{"line":825,"type":"cond-expr","locations":[{"start":{"line":825,"column":38},"end":{"line":825,"column":53}},{"start":{"line":825,"column":56},"end":{"line":825,"column":63}}]},"57":{"line":842,"type":"if","locations":[{"start":{"line":842,"column":4},"end":{"line":842,"column":4}},{"start":{"line":842,"column":4},"end":{"line":842,"column":4}}]},"58":{"line":860,"type":"if","locations":[{"start":{"line":860,"column":4},"end":{"line":860,"column":4}},{"start":{"line":860,"column":4},"end":{"line":860,"column":4}}]},"59":{"line":860,"type":"binary-expr","locations":[{"start":{"line":860,"column":8},"end":{"line":860,"column":27}},{"start":{"line":860,"column":31},"end":{"line":860,"column":38}}]},"60":{"line":875,"type":"cond-expr","locations":[{"start":{"line":875,"column":35},"end":{"line":875,"column":39}},{"start":{"line":875,"column":42},"end":{"line":875,"column":49}}]},"61":{"line":876,"type":"cond-expr","locations":[{"start":{"line":876,"column":32},"end":{"line":876,"column":34}},{"start":{"line":876,"column":37},"end":{"line":876,"column":41}}]},"62":{"line":878,"type":"cond-expr","locations":[{"start":{"line":878,"column":27},"end":{"line":878,"column":30}},{"start":{"line":878,"column":33},"end":{"line":878,"column":38}}]},"63":{"line":888,"type":"if","locations":[{"start":{"line":888,"column":6},"end":{"line":888,"column":6}},{"start":{"line":888,"column":6},"end":{"line":888,"column":6}}]},"64":{"line":892,"type":"cond-expr","locations":[{"start":{"line":892,"column":26},"end":{"line":892,"column":58}},{"start":{"line":892,"column":62},"end":{"line":892,"column":63}}]},"65":{"line":892,"type":"cond-expr","locations":[{"start":{"line":892,"column":46},"end":{"line":892,"column":47}},{"start":{"line":892,"column":50},"end":{"line":892,"column":58}}]},"66":{"line":908,"type":"if","locations":[{"start":{"line":908,"column":8},"end":{"line":908,"column":8}},{"start":{"line":908,"column":8},"end":{"line":908,"column":8}}]},"67":{"line":925,"type":"if","locations":[{"start":{"line":925,"column":8},"end":{"line":925,"column":8}},{"start":{"line":925,"column":8},"end":{"line":925,"column":8}}]},"68":{"line":939,"type":"if","locations":[{"start":{"line":939,"column":6},"end":{"line":939,"column":6}},{"start":{"line":939,"column":6},"end":{"line":939,"column":6}}]},"69":{"line":961,"type":"if","locations":[{"start":{"line":961,"column":4},"end":{"line":961,"column":4}},{"start":{"line":961,"column":4},"end":{"line":961,"column":4}}]},"70":{"line":1016,"type":"binary-expr","locations":[{"start":{"line":1016,"column":14},"end":{"line":1016,"column":21}},{"start":{"line":1016,"column":25},"end":{"line":1016,"column":31}}]},"71":{"line":1018,"type":"if","locations":[{"start":{"line":1018,"column":4},"end":{"line":1018,"column":4}},{"start":{"line":1018,"column":4},"end":{"line":1018,"column":4}}]},"72":{"line":1028,"type":"if","locations":[{"start":{"line":1028,"column":12},"end":{"line":1028,"column":12}},{"start":{"line":1028,"column":12},"end":{"line":1028,"column":12}}]},"73":{"line":1043,"type":"cond-expr","locations":[{"start":{"line":1043,"column":45},"end":{"line":1043,"column":57}},{"start":{"line":1043,"column":60},"end":{"line":1043,"column":64}}]},"74":{"line":1054,"type":"binary-expr","locations":[{"start":{"line":1054,"column":18},"end":{"line":1054,"column":27}},{"start":{"line":1054,"column":31},"end":{"line":1054,"column":33}}]},"75":{"line":1067,"type":"if","locations":[{"start":{"line":1067,"column":6},"end":{"line":1067,"column":6}},{"start":{"line":1067,"column":6},"end":{"line":1067,"column":6}}]},"76":{"line":1071,"type":"if","locations":[{"start":{"line":1071,"column":6},"end":{"line":1071,"column":6}},{"start":{"line":1071,"column":6},"end":{"line":1071,"column":6}}]},"77":{"line":1085,"type":"if","locations":[{"start":{"line":1085,"column":6},"end":{"line":1085,"column":6}},{"start":{"line":1085,"column":6},"end":{"line":1085,"column":6}}]},"78":{"line":1085,"type":"binary-expr","locations":[{"start":{"line":1085,"column":10},"end":{"line":1085,"column":37}},{"start":{"line":1086,"column":10},"end":{"line":1086,"column":30}},{"start":{"line":1087,"column":10},"end":{"line":1087,"column":32}}]},"79":{"line":1092,"type":"binary-expr","locations":[{"start":{"line":1092,"column":21},"end":{"line":1092,"column":25}},{"start":{"line":1092,"column":29},"end":{"line":1092,"column":37}}]},"80":{"line":1108,"type":"if","locations":[{"start":{"line":1108,"column":6},"end":{"line":1108,"column":6}},{"start":{"line":1108,"column":6},"end":{"line":1108,"column":6}}]},"81":{"line":1109,"type":"if","locations":[{"start":{"line":1109,"column":8},"end":{"line":1109,"column":8}},{"start":{"line":1109,"column":8},"end":{"line":1109,"column":8}}]},"82":{"line":1110,"type":"binary-expr","locations":[{"start":{"line":1110,"column":16},"end":{"line":1110,"column":29}},{"start":{"line":1111,"column":12},"end":{"line":1111,"column":45}}]},"83":{"line":1115,"type":"if","locations":[{"start":{"line":1115,"column":6},"end":{"line":1115,"column":6}},{"start":{"line":1115,"column":6},"end":{"line":1115,"column":6}}]},"84":{"line":1119,"type":"if","locations":[{"start":{"line":1119,"column":8},"end":{"line":1119,"column":8}},{"start":{"line":1119,"column":8},"end":{"line":1119,"column":8}}]},"85":{"line":1126,"type":"if","locations":[{"start":{"line":1126,"column":8},"end":{"line":1126,"column":8}},{"start":{"line":1126,"column":8},"end":{"line":1126,"column":8}}]},"86":{"line":1126,"type":"binary-expr","locations":[{"start":{"line":1126,"column":12},"end":{"line":1126,"column":20}},{"start":{"line":1126,"column":24},"end":{"line":1126,"column":57}}]},"87":{"line":1142,"type":"if","locations":[{"start":{"line":1142,"column":8},"end":{"line":1142,"column":8}},{"start":{"line":1142,"column":8},"end":{"line":1142,"column":8}}]},"88":{"line":1148,"type":"if","locations":[{"start":{"line":1148,"column":8},"end":{"line":1148,"column":8}},{"start":{"line":1148,"column":8},"end":{"line":1148,"column":8}}]},"89":{"line":1157,"type":"if","locations":[{"start":{"line":1157,"column":8},"end":{"line":1157,"column":8}},{"start":{"line":1157,"column":8},"end":{"line":1157,"column":8}}]},"90":{"line":1158,"type":"cond-expr","locations":[{"start":{"line":1159,"column":14},"end":{"line":1159,"column":45}},{"start":{"line":1160,"column":14},"end":{"line":1160,"column":32}}]},"91":{"line":1171,"type":"if","locations":[{"start":{"line":1171,"column":4},"end":{"line":1171,"column":4}},{"start":{"line":1171,"column":4},"end":{"line":1171,"column":4}}]},"92":{"line":1176,"type":"if","locations":[{"start":{"line":1176,"column":4},"end":{"line":1176,"column":4}},{"start":{"line":1176,"column":4},"end":{"line":1176,"column":4}}]},"93":{"line":1177,"type":"binary-expr","locations":[{"start":{"line":1177,"column":16},"end":{"line":1177,"column":28}},{"start":{"line":1178,"column":12},"end":{"line":1178,"column":43}}]},"94":{"line":1180,"type":"if","locations":[{"start":{"line":1180,"column":6},"end":{"line":1180,"column":6}},{"start":{"line":1180,"column":6},"end":{"line":1180,"column":6}}]},"95":{"line":1180,"type":"binary-expr","locations":[{"start":{"line":1180,"column":10},"end":{"line":1180,"column":20}},{"start":{"line":1180,"column":24},"end":{"line":1180,"column":40}}]},"96":{"line":1182,"type":"binary-expr","locations":[{"start":{"line":1182,"column":10},"end":{"line":1182,"column":17}},{"start":{"line":1182,"column":21},"end":{"line":1182,"column":23}}]},"97":{"line":1189,"type":"if","locations":[{"start":{"line":1189,"column":9},"end":{"line":1189,"column":9}},{"start":{"line":1189,"column":9},"end":{"line":1189,"column":9}}]},"98":{"line":1190,"type":"if","locations":[{"start":{"line":1190,"column":6},"end":{"line":1190,"column":6}},{"start":{"line":1190,"column":6},"end":{"line":1190,"column":6}}]},"99":{"line":1190,"type":"binary-expr","locations":[{"start":{"line":1190,"column":10},"end":{"line":1190,"column":20}},{"start":{"line":1190,"column":24},"end":{"line":1190,"column":40}}]},"100":{"line":1192,"type":"binary-expr","locations":[{"start":{"line":1192,"column":10},"end":{"line":1192,"column":17}},{"start":{"line":1192,"column":21},"end":{"line":1192,"column":23}}]},"101":{"line":1205,"type":"binary-expr","locations":[{"start":{"line":1205,"column":14},"end":{"line":1205,"column":21}},{"start":{"line":1205,"column":25},"end":{"line":1205,"column":27}}]},"102":{"line":1207,"type":"if","locations":[{"start":{"line":1207,"column":4},"end":{"line":1207,"column":4}},{"start":{"line":1207,"column":4},"end":{"line":1207,"column":4}}]},"103":{"line":1212,"type":"cond-expr","locations":[{"start":{"line":1212,"column":45},"end":{"line":1212,"column":61}},{"start":{"line":1212,"column":64},"end":{"line":1212,"column":75}}]},"104":{"line":1212,"type":"binary-expr","locations":[{"start":{"line":1212,"column":20},"end":{"line":1212,"column":29}},{"start":{"line":1212,"column":33},"end":{"line":1212,"column":41}}]},"105":{"line":1223,"type":"if","locations":[{"start":{"line":1223,"column":9},"end":{"line":1223,"column":9}},{"start":{"line":1223,"column":9},"end":{"line":1223,"column":9}}]},"106":{"line":1223,"type":"binary-expr","locations":[{"start":{"line":1223,"column":13},"end":{"line":1223,"column":21}},{"start":{"line":1224,"column":6},"end":{"line":1224,"column":31}},{"start":{"line":1225,"column":6},"end":{"line":1225,"column":42}}]},"107":{"line":1230,"type":"binary-expr","locations":[{"start":{"line":1230,"column":18},"end":{"line":1230,"column":29}},{"start":{"line":1230,"column":33},"end":{"line":1230,"column":35}}]},"108":{"line":1231,"type":"binary-expr","locations":[{"start":{"line":1231,"column":25},"end":{"line":1231,"column":43}},{"start":{"line":1231,"column":47},"end":{"line":1231,"column":49}}]},"109":{"line":1247,"type":"if","locations":[{"start":{"line":1247,"column":4},"end":{"line":1247,"column":4}},{"start":{"line":1247,"column":4},"end":{"line":1247,"column":4}}]},"110":{"line":1247,"type":"binary-expr","locations":[{"start":{"line":1247,"column":8},"end":{"line":1247,"column":21}},{"start":{"line":1247,"column":26},"end":{"line":1247,"column":30}},{"start":{"line":1247,"column":34},"end":{"line":1247,"column":45}}]},"111":{"line":1259,"type":"binary-expr","locations":[{"start":{"line":1259,"column":14},"end":{"line":1259,"column":21}},{"start":{"line":1259,"column":25},"end":{"line":1259,"column":27}}]},"112":{"line":1261,"type":"if","locations":[{"start":{"line":1261,"column":4},"end":{"line":1261,"column":4}},{"start":{"line":1261,"column":4},"end":{"line":1261,"column":4}}]},"113":{"line":1276,"type":"binary-expr","locations":[{"start":{"line":1276,"column":18},"end":{"line":1276,"column":29}},{"start":{"line":1276,"column":33},"end":{"line":1276,"column":35}}]},"114":{"line":1277,"type":"binary-expr","locations":[{"start":{"line":1277,"column":25},"end":{"line":1277,"column":43}},{"start":{"line":1277,"column":47},"end":{"line":1277,"column":49}}]},"115":{"line":1293,"type":"if","locations":[{"start":{"line":1293,"column":4},"end":{"line":1293,"column":4}},{"start":{"line":1293,"column":4},"end":{"line":1293,"column":4}}]},"116":{"line":1318,"type":"binary-expr","locations":[{"start":{"line":1318,"column":16},"end":{"line":1318,"column":25}},{"start":{"line":1318,"column":29},"end":{"line":1318,"column":31}}]},"117":{"line":1327,"type":"if","locations":[{"start":{"line":1327,"column":6},"end":{"line":1327,"column":6}},{"start":{"line":1327,"column":6},"end":{"line":1327,"column":6}}]},"118":{"line":1330,"type":"if","locations":[{"start":{"line":1330,"column":8},"end":{"line":1330,"column":8}},{"start":{"line":1330,"column":8},"end":{"line":1330,"column":8}}]},"119":{"line":1335,"type":"cond-expr","locations":[{"start":{"line":1335,"column":30},"end":{"line":1335,"column":57}},{"start":{"line":1335,"column":60},"end":{"line":1335,"column":62}}]},"120":{"line":1340,"type":"cond-expr","locations":[{"start":{"line":1341,"column":8},"end":{"line":1341,"column":47}},{"start":{"line":1342,"column":8},"end":{"line":1342,"column":47}}]},"121":{"line":1345,"type":"binary-expr","locations":[{"start":{"line":1345,"column":50},"end":{"line":1345,"column":67}},{"start":{"line":1345,"column":71},"end":{"line":1345,"column":73}}]},"122":{"line":1368,"type":"if","locations":[{"start":{"line":1368,"column":4},"end":{"line":1368,"column":4}},{"start":{"line":1368,"column":4},"end":{"line":1368,"column":4}}]},"123":{"line":1376,"type":"cond-expr","locations":[{"start":{"line":1377,"column":8},"end":{"line":1377,"column":31}},{"start":{"line":1378,"column":8},"end":{"line":1378,"column":38}}]},"124":{"line":1380,"type":"if","locations":[{"start":{"line":1380,"column":4},"end":{"line":1380,"column":4}},{"start":{"line":1380,"column":4},"end":{"line":1380,"column":4}}]},"125":{"line":1381,"type":"if","locations":[{"start":{"line":1381,"column":6},"end":{"line":1381,"column":6}},{"start":{"line":1381,"column":6},"end":{"line":1381,"column":6}}]},"126":{"line":1381,"type":"binary-expr","locations":[{"start":{"line":1381,"column":10},"end":{"line":1381,"column":17}},{"start":{"line":1381,"column":21},"end":{"line":1381,"column":32}},{"start":{"line":1381,"column":36},"end":{"line":1381,"column":62}}]},"127":{"line":1390,"type":"cond-expr","locations":[{"start":{"line":1390,"column":19},"end":{"line":1390,"column":23}},{"start":{"line":1390,"column":26},"end":{"line":1390,"column":28}}]},"128":{"line":1402,"type":"if","locations":[{"start":{"line":1402,"column":4},"end":{"line":1402,"column":4}},{"start":{"line":1402,"column":4},"end":{"line":1402,"column":4}}]},"129":{"line":1402,"type":"binary-expr","locations":[{"start":{"line":1402,"column":8},"end":{"line":1402,"column":40}},{"start":{"line":1402,"column":44},"end":{"line":1402,"column":63}}]},"130":{"line":1408,"type":"cond-expr","locations":[{"start":{"line":1408,"column":40},"end":{"line":1408,"column":44}},{"start":{"line":1408,"column":48},"end":{"line":1408,"column":73}}]},"131":{"line":1408,"type":"binary-expr","locations":[{"start":{"line":1408,"column":48},"end":{"line":1408,"column":58}},{"start":{"line":1408,"column":62},"end":{"line":1408,"column":73}}]},"132":{"line":1410,"type":"binary-expr","locations":[{"start":{"line":1410,"column":11},"end":{"line":1410,"column":18}},{"start":{"line":1410,"column":22},"end":{"line":1410,"column":28}}]},"133":{"line":1438,"type":"binary-expr","locations":[{"start":{"line":1438,"column":13},"end":{"line":1438,"column":17}},{"start":{"line":1438,"column":21},"end":{"line":1438,"column":25}}]},"134":{"line":1492,"type":"binary-expr","locations":[{"start":{"line":1492,"column":11},"end":{"line":1492,"column":15}},{"start":{"line":1492,"column":19},"end":{"line":1492,"column":21}}]},"135":{"line":1495,"type":"if","locations":[{"start":{"line":1495,"column":4},"end":{"line":1495,"column":4}},{"start":{"line":1495,"column":4},"end":{"line":1495,"column":4}}]},"136":{"line":1495,"type":"binary-expr","locations":[{"start":{"line":1495,"column":8},"end":{"line":1495,"column":20}},{"start":{"line":1495,"column":24},"end":{"line":1495,"column":59}}]},"137":{"line":1508,"type":"binary-expr","locations":[{"start":{"line":1508,"column":7},"end":{"line":1508,"column":27}},{"start":{"line":1509,"column":9},"end":{"line":1509,"column":65}}]},"138":{"line":1509,"type":"cond-expr","locations":[{"start":{"line":1509,"column":41},"end":{"line":1509,"column":46}},{"start":{"line":1509,"column":49},"end":{"line":1509,"column":65}}]},"139":{"line":1511,"type":"if","locations":[{"start":{"line":1511,"column":6},"end":{"line":1511,"column":6}},{"start":{"line":1511,"column":6},"end":{"line":1511,"column":6}}]},"140":{"line":1521,"type":"if","locations":[{"start":{"line":1521,"column":4},"end":{"line":1521,"column":4}},{"start":{"line":1521,"column":4},"end":{"line":1521,"column":4}}]},"141":{"line":1532,"type":"binary-expr","locations":[{"start":{"line":1532,"column":15},"end":{"line":1532,"column":24}},{"start":{"line":1532,"column":28},"end":{"line":1532,"column":32}}]},"142":{"line":1533,"type":"cond-expr","locations":[{"start":{"line":1533,"column":23},"end":{"line":1533,"column":42}},{"start":{"line":1533,"column":46},"end":{"line":1533,"column":53}}]},"143":{"line":1533,"type":"binary-expr","locations":[{"start":{"line":1533,"column":23},"end":{"line":1533,"column":36}},{"start":{"line":1533,"column":40},"end":{"line":1533,"column":42}}]},"144":{"line":1534,"type":"cond-expr","locations":[{"start":{"line":1534,"column":25},"end":{"line":1534,"column":39}},{"start":{"line":1534,"column":42},"end":{"line":1534,"column":46}}]},"145":{"line":1540,"type":"if","locations":[{"start":{"line":1540,"column":4},"end":{"line":1540,"column":4}},{"start":{"line":1540,"column":4},"end":{"line":1540,"column":4}}]},"146":{"line":1546,"type":"binary-expr","locations":[{"start":{"line":1546,"column":17},"end":{"line":1546,"column":27}},{"start":{"line":1546,"column":31},"end":{"line":1546,"column":55}}]},"147":{"line":1555,"type":"if","locations":[{"start":{"line":1555,"column":4},"end":{"line":1555,"column":4}},{"start":{"line":1555,"column":4},"end":{"line":1555,"column":4}}]},"148":{"line":1559,"type":"if","locations":[{"start":{"line":1559,"column":4},"end":{"line":1559,"column":4}},{"start":{"line":1559,"column":4},"end":{"line":1559,"column":4}}]},"149":{"line":1589,"type":"if","locations":[{"start":{"line":1589,"column":2},"end":{"line":1589,"column":2}},{"start":{"line":1589,"column":2},"end":{"line":1589,"column":2}}]},"150":{"line":1602,"type":"binary-expr","locations":[{"start":{"line":1602,"column":12},"end":{"line":1602,"column":24}},{"start":{"line":1602,"column":28},"end":{"line":1604,"column":3}}]},"151":{"line":1618,"type":"cond-expr","locations":[{"start":{"line":1618,"column":31},"end":{"line":1618,"column":33}},{"start":{"line":1619,"column":12},"end":{"line":1620,"column":19}}]},"152":{"line":1619,"type":"cond-expr","locations":[{"start":{"line":1619,"column":29},"end":{"line":1619,"column":31}},{"start":{"line":1620,"column":12},"end":{"line":1620,"column":19}}]},"153":{"line":1646,"type":"cond-expr","locations":[{"start":{"line":1646,"column":36},"end":{"line":1646,"column":43}},{"start":{"line":1646,"column":46},"end":{"line":1646,"column":56}}]},"154":{"line":1647,"type":"cond-expr","locations":[{"start":{"line":1647,"column":38},"end":{"line":1647,"column":45}},{"start":{"line":1647,"column":48},"end":{"line":1647,"column":59}}]},"155":{"line":1648,"type":"cond-expr","locations":[{"start":{"line":1648,"column":34},"end":{"line":1648,"column":44}},{"start":{"line":1648,"column":47},"end":{"line":1648,"column":56}}]},"156":{"line":1653,"type":"binary-expr","locations":[{"start":{"line":1653,"column":12},"end":{"line":1653,"column":19}},{"start":{"line":1653,"column":23},"end":{"line":1653,"column":25}}]},"157":{"line":1665,"type":"if","locations":[{"start":{"line":1665,"column":2},"end":{"line":1665,"column":2}},{"start":{"line":1665,"column":2},"end":{"line":1665,"column":2}}]},"158":{"line":1674,"type":"binary-expr","locations":[{"start":{"line":1674,"column":23},"end":{"line":1674,"column":39}},{"start":{"line":1674,"column":43},"end":{"line":1674,"column":62}}]},"159":{"line":1675,"type":"binary-expr","locations":[{"start":{"line":1675,"column":22},"end":{"line":1675,"column":37}},{"start":{"line":1675,"column":41},"end":{"line":1675,"column":59}}]},"160":{"line":1676,"type":"binary-expr","locations":[{"start":{"line":1676,"column":19},"end":{"line":1676,"column":31}},{"start":{"line":1676,"column":35},"end":{"line":1676,"column":50}}]},"161":{"line":1679,"type":"if","locations":[{"start":{"line":1679,"column":2},"end":{"line":1679,"column":2}},{"start":{"line":1679,"column":2},"end":{"line":1679,"column":2}}]},"162":{"line":1684,"type":"binary-expr","locations":[{"start":{"line":1684,"column":27},"end":{"line":1684,"column":45}},{"start":{"line":1684,"column":49},"end":{"line":1684,"column":61}}]},"163":{"line":1726,"type":"cond-expr","locations":[{"start":{"line":1726,"column":31},"end":{"line":1726,"column":43}},{"start":{"line":1726,"column":46},"end":{"line":1726,"column":50}}]}},"code":["/* Copyright (c) 2010-2016 Richard Rodger and other contributors, MIT License */","'use strict'","","","// Node API modules.","var Assert = require('assert')","var Events = require('events')","var Util = require('util')","","","// External modules.","var _ = require('lodash')","var Eraro = require('eraro')","var GateExecutor = require('gate-executor')","var Jsonic = require('jsonic')","var Makeuse = require('use-plugin')","var Nid = require('nid')","var Norma = require('norma')","var Patrun = require('patrun')","var Stats = require('rolling-stats')","var Ordu = require('ordu')","var Lrucache = require('lru-cache')","","","// Internal modules.","var Actions = require('./lib/actions')","var Common = require('./lib/common')","var Errors = require('./lib/errors')","var Legacy = require('./lib/legacy')","var Optioner = require('./lib/optioner')","var Package = require('./package.json')","var Plugins = require('./lib/plugins')","var Print = require('./lib/print')","var Transport = require('./lib/transport')","","","// Shortcuts","var errlog = Common.make_standard_err_log_entry","var actlog = Common.make_standard_act_log_entry","","","// Internal data and utilities","var error = Eraro({","  package: 'seneca',","  msgmap: Errors,","  override: true","})","","var option_defaults = {","  // Tag this Seneca instance, will be appended to instance identifier.","  tag: '-',","","  // Standard timeout for actions.","  timeout: 22222,","","  // Standard length of identifiers for actions.","  idlen: 12,","","  // Register (true) default plugins. Set false to not register when","  // using custom versions.","  default_plugins: {","    transport: true","  },","","  // Test mode. Use for unit testing.","  test: false,","","  // Wait time for plugins to close gracefully.","  deathdelay: 11111,","","  // Debug settings.","  debug: {","    // Throw (some) errors from seneca.act.","    fragile: false,","","    // Fatal errors ... aren't fatal. Not for production!","    undead: false,","","    // Print debug info to console","    print: {","      // Print options. Best used via --seneca.print.options.","      options: false","    },","","    // Trace action caller and place in args.caller$.","    act_caller: false,","","    // Shorten all identifiers to 2 characters.","    short_logs: false,","","    // Record and log callpoints (calling code locations).","    callpoint: false,","","    // Log deprecation warnings","    deprecation: true","  },","","  // Enforce strict behaviours. Relax when backwards compatibility needed.","  strict: {","    // Action result must be a plain object.","    result: true,","","    // Delegate fixedargs override action args.","    fixedargs: true,","","    // Adding a pattern overrides existing pattern only if matches exactly.","    add: false,","","    // If no action is found and find is false,","    // then no error returned along with empty object","    find: true,","","    // Maximum number of times an action can call itself","    maxloop: 11","  },","","  // Action cache. Makes inbound messages idempotent.","  actcache: {","    active: false,","    size: 11111","  },","","  // Action executor tracing. See gate-executor module.","  trace: {","    act: false,","    stack: false,","","    // Messages that do not match a known pattern","    unknown: true,","","    // Messages that have invalid content","    invalid: false","  },","","  // Action statistics settings. See rolling-stats module.","  stats: {","    size: 1024,","    interval: 60000,","    running: false","  },","","  // Plugin settings","  plugin: {},","","  // System wide functionality.","  system: {","    // seneca.add uses catchall (pattern='') prior","    catchall: false,","","    // Close instance on these signals, if true.","    close_signals: {","      SIGHUP: true,","      SIGTERM: true,","      SIGINT: true,","      SIGBREAK: true","    }","  },","","  // Internal functionality. Reserved for objects and functions only.","  internal: {},","","  // Log status at periodic intervals.","  status: {","    interval: 60000,","","    // By default, does not run.","    running: false","  },","","  // Backwards compatibility settings.","  legacy: {","","    // Action callback must always have signature callback(error, result).","    action_signature: false,","","    // Logger can be changed by options method.","    logging: false,","","    // Use old error codes.","    error_codes: false","  }","}","","","// Utility functions exposed by Seneca via `seneca.util`.","var seneca_util = {","  deepextend: Common.deepextend,","  recurse: Common.recurse,","  clean: Common.clean,","  copydata: Common.copydata,","  nil: Common.nil,","  parsepattern: Common.parsePattern,","  pattern: Common.pattern,","  print: Common.print,","  pincanon: Common.pincanon,","  router: function router () { return Patrun() },","  argprops: Common.argprops","}","","","// Seneca is an EventEmitter.","function Seneca () {","  Events.EventEmitter.call(this)","  this.setMaxListeners(0)","}","Util.inherits(Seneca, Events.EventEmitter)","","","// Create a Seneca instance.","module.exports = function init (seneca_options, more_options) {","  var initial_options = _.isString(seneca_options)","        ? _.extend({}, {from: seneca_options}, more_options)","      : _.extend({}, seneca_options, more_options)","","  var seneca = make_seneca(initial_options)","  var options = seneca.options()","","  // The 'internal' key of options is reserved for objects and functions","  // that provide functionality, and are thus not really printable","  seneca.log.debug({kind: 'notice', options: _.omit(options, ['internal'])})","","  Print.print_options(options)","","  // TODO: these are core API and should not be decorations","  seneca.decorate('hasplugin', Plugins.api_decorations.hasplugin)","  seneca.decorate('findplugin', Plugins.api_decorations.findplugin)","  seneca.decorate('plugins', Plugins.api_decorations.plugins)","","  // Register default plugins, unless turned off by options.","  if (options.default_plugins.transport) {","    seneca.use(require('seneca-transport'))","  }","","  // Register plugins specified in options.","  _.each(options.plugins, function (plugindesc) {","    seneca.use(plugindesc)","  })","","  seneca.ready(function () {","    this.log.info({kind: 'notice', notice: 'hello seneca ' + seneca.id})","  })","","  return seneca","}","","// Expose Seneca prototype for easier monkey-patching","module.exports.Seneca = Seneca","","// To reference builtin loggers when defining logging options.","module.exports.loghandler = Legacy.loghandler","","// Makes require('seneca').use(...) work by creating an on-the-fly instance.","module.exports.use = function top_use () {","  var argsarr = new Array(arguments.length)","  for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","  var instance = module.exports()","","  return instance.use.apply(instance, argsarr)","}","","// Makes require('seneca').test() work.","module.exports.test = function top_test () {","  var argsarr = new Array(arguments.length)","  for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","  var instance = module.exports({test: true, log: 'test'})","  instance.test.apply(instance, argsarr)","","  return instance","}","","module.exports.util = seneca_util","","","// Mostly for testing.","if (require.main === module) {","  module.exports()","}","","// Create a new Seneca instance.","// * _initial_options_ `o` &rarr; instance options","function make_seneca (initial_options) {","  initial_options = initial_options || {}","","  // Create a private context.","  var private$ = make_private()","","  // Create a new root Seneca instance.","  var root = new Seneca()","  root.make_log = make_log","","  // Expose private data to plugins.","  root.private$ = private$","","  // Resolve initial options.","  private$.optioner = Optioner(module, option_defaults, initial_options)","  var so = private$.optioner.get()","","  // Create internal tools.","  var actnid = Nid({length: so.idlen})","  var refnid = function refnid () { return '(' + actnid() + ')' }","","  // These need to come from options as required during construction.","  so.internal.actrouter = so.internal.actrouter || Patrun({ gex: true })","  so.internal.subrouter = so.internal.subrouter || Patrun({ gex: true })","","  var callpoint = make_callpoint(so.debug.callpoint)","","  // Define public member variables.","  root.root = root","  root.start_time = Date.now()","  root.fixedargs = {}","  root.context = {}","  root.version = Package.version","","  private$.actcache = Lrucache({ max: so.actcache.size })","","","  // Seneca methods. Official API.","","  // <a name=\"seneca.add\">**seneca.add**</a>","  //","  // Add a message pattern and action.","  //   * `pattern` <small>_string|object_</small> &rarr;","  //   Pattern definition as","  //   [jsonic](https://github.com/rjrodger/jsonic) string or object.","  //","  //   * `action` <small>_function (optional)_</small> &rarr;","  //   Action function.","  //","  // When a message that matches the pattern is submitted inward using","  // `seneca.act`, the action function is called with parameters:","  //   * `message` <small>_object_</small> &rarr; Message object.","  //   * `reply` <small>_function_</small> &rarr; Callback function.","  //","  // The `reply` callback is used to provide a response to the","  // message.  If the action function is not provided, the pattern","  // will be added with a default action function that does","  // nothing. The `reply` callback has parameters:","  //   * `error` <small>_Error (optional)_</small> &rarr;","  //   Provide this value if you wish to provide an error response to the message.","  //   * `response` <small>_object|array (optional)_</small> &rarr;","  //   Response data to the message.","  //","  // **The action function is not a lambda, and the `=>` function","  // syntax should not be used.** The context `this` of the action","  // function is a reference to the current Seneca instance, tha","  // should always be used for subsequent `seneca.act` calls, as this","  // enables accurate tracing of actions.","  //","  // If the pattern added has been added previously, then the new","  // action function overrides the old action function. The old action","  // function is available via the `seneca.prior` method of the","  // current Seneca instance (`this` in the new action function).  A","  // chain of priors is formed if additional action functions with the","  // same pattern are added. There is a tutorial on [Seneca","  // priors](http://senecajs.org/tutorials/priors.html).","  root.add = api_add","","  // # Seneca.act","  //","  // Send a message. If the message matches a pattern, execute the","  // action function.","  //   * `msg` <small>_object_</small> &rarr;","  //   The message data. Only data that can be fully represented as JSON is valid.","  //   * `callback` <small>_function (optional)_</small> &rarr;","  //   The callback function that will receive the response to the","  //   message, generated by the action function.","  //","  // The message data may contain control properties, indicated by a","  // `$` suffix.  These are described in the [control properties","  // reference](http://senecajs.org/documentation/control-properties.html)","  //","  // **The callback function should not be a lambda (`=>`)**. The current","  // Seneca instance is provided via `this`, and should be used for","  // subsequent `seneca.act` calls, as this enables accurate tracing","  // of actions.","  //","  // If the callback function is provided, then the message","  // interaction is assumed to be synchronous, and a response from the","  // action function will be expected. If the callback function is not","  // provided, the interaction is assumed to be asynchronous, and no","  // response is expected.","  //","  // The callback function has parameters:","  //   * `error` <small>_Error_</small> &rarr; If an error occurred,","  //   an Error object will be provided, otherwise this is `null`. If","  //   the action times out, an error will be provided.","  //   * `response` <small>_object|array_</small> &rarr;","  //   The response data from the action function, if any.","  //","  // For convenience, you can build the full message from separate","  // parts, including [jsonic](https://github.com/rjrodger/jsonic)","  // strings. The full set of parameters to `seneca.act` is:","  //   * `jsonic` <small>_string (optional)_</small> &rarr;","  //   Message properties in jsonic format. These have precedence over","  //   other message parts.","  //   * `part1` <small>_object (optional)_</small> &rarr;","  //   Message data having precedence over `part2`.","  //   * `part2` <small>_object (optional)_</small> &rarr;","  //   Message data.","  //   * `callback` <small>_function (optional)_</small> &rarr;","  //   As previously described.","  root.act = api_act // Perform action that matches pattern.","","  root.sub = api_sub // Subscribe to a message pattern.","  root.use = api_use // Define a plugin.","  root.listen = Transport.listen(callpoint) // Listen for inbound messages.","  root.client = Transport.client(callpoint) // Send outbound messages.","  root.export = api_export // Export plain objects from a plugin.","  root.has = Actions.has // True if action pattern defined.","  root.find = Actions.find // Find action by pattern","  root.list = Actions.list // List (a subset of) action patterns.","  root.ready = api_ready // Callback when plugins initialized.","  root.close = api_close // Close and shutdown plugins.","  root.options = api_options // Get and set options.","  root.error = api_error // Set global error handler.","  root.decorate = api_decorate // Decorate seneca object with functions","  root.inward = api_inward // Add a modifier function for messages inward","  root.outward = api_outward // Add a modifier function for responses outward","  root.test = api_test // Set test mode.","","  // Method aliases.","  root.hasact = root.has","","  // Non-API methods.","  root.register = Plugins.register(so, callpoint)","  root.depends = api_depends","  root.act_if = api_act_if","  root.wrap = api_wrap","  root.seneca = api_seneca","  root.fix = api_fix","  root.delegate = api_delegate","","  // Legacy API; Deprecated.","  root.findact = root.find","","  // DEPRECATED","  root.fail = Legacy.fail(so)","","  // Identifier generator.","  root.idgen = Nid({length: so.idlen})","  so.tag = so.tag || option_defaults.tag","  so.tag = so.tag === 'undefined' ? option_defaults.tag : so.tag","","  // Create a unique identifer for this instance.","  root.id = root.idgen() +","    '/' +","    root.start_time +","    '/' +","    process.pid +","    '/' +","    root.version +","    '/' +","    so.tag","","  // The instance tag, useful for grouping instances.","  root.tag = so.tag","","  if (so.debug.short_logs || so.log.short) {","    so.idlen = 2","    root.idgen = Nid({length: so.idlen})","    root.id = root.idgen() + '/' + so.tag","  }","","  root.fullname = 'Seneca/' + root.id","","  root.die = Common.makedie(root, {","    type: 'sys',","    plugin: 'seneca',","    tag: root.version,","    id: root.id,","    callpoint: callpoint","  })","","  root.util = seneca_util","","","  // Configure logging","  private$.exports = { options: Common.deepextend({}, so) }","  private$.decorations = {}","","  private$.logger = load_logger(root, so.internal.logger)","  root.log = make_log(root, default_log_modifier)","","","  // Error events are fatal, unless you're undead.  These are not the","  // same as action errors, these are unexpected internal issues.","  root.on('error', root.die)","","  private$.ge =","    GateExecutor({","      timeout: so.timeout","    })","    .clear(action_queue_clear)","    .start()","","  // setup status log","  if (so.status.interval > 0 && so.status.running) {","    private$.stats = private$.stats || {}","    setInterval(function status () {","      root.log.info({","        kind: 'status',","        alive: (Date.now() - private$.stats.start),","        act: private$.stats.act","      })","    }, so.status.interval)","  }","","  if (so.stats) {","    private$.timestats = new Stats.NamedStats(so.stats.size, so.stats.interval)","","    if (so.stats.running) {","      setInterval(function stats () {","        private$.timestats.calculate()","      }, so.stats.interval)","    }","  }","","  private$.plugins = {}","  private$.plugin_order = { byname: [], byref: [] }","  private$.use = Makeuse({","    prefix: 'seneca-',","    module: module,","    msgprefix: false,","    builtin: ''","  })","","  private$.actrouter = so.internal.actrouter","  private$.subrouter = so.internal.subrouter","","  root.toString = api_toString","","  private$.action_modifiers = []","  private$.ready_list = []","","","  private$.inward = Ordu({name: 'inward'})","    .add(Actions.inward.closed)","    .add(Actions.inward.resolve_msg_id)","    .add(Actions.inward.act_cache)","    .add(Actions.inward.act_default)","    .add(Actions.inward.act_not_found)","    .add(Actions.inward.act_stats)","    .add(Actions.inward.validate_msg)","    .add(Actions.inward.warnings)","    .add({tags: ['prior']}, Actions.inward.msg_meta)","    .add({tags: ['xprior']}, Actions.inward.prepare_delegate)","    .add(Actions.inward.msg_modify)","    .add(Actions.inward.announce)","","  private$.outward = Ordu({name: 'outward'})","    .add(Actions.outward.act_stats)","    .add(Actions.outward.act_cache)","    .add(Actions.outward.res_object)","","","  function api_depends () {","    var self = this","","    var args = Norma('{pluginname:s deps:a? moredeps:s*}', arguments)","","    var deps = args.deps || args.moredeps","","    _.every(deps, function (depname) {","      if (!_.includes(private$.plugin_order.byname, depname) &&","        !_.includes(private$.plugin_order.byname, 'seneca-' + depname)) {","        self.die(error('plugin_required', { name: args.pluginname, dependency: depname }))","        return false","      }","      else return true","    })","  }","","  function api_export (key) {","    var self = this","","    // Legacy aliases","    if (key === 'util') {","      key = 'basic'","    }","","    var exportval = private$.exports[key]","    if (!exportval) {","      return self.die(error('export_not_found', {key: key}))","    }","","    return exportval","  }","","  function api_sub () {","    var self = this","","    var subargs = Common.parsePattern(self, arguments, 'action:f actmeta:o?')","    var pattern = subargs.pattern","    if (pattern.in$ == null &&","      pattern.out$ == null &&","      pattern.error$ == null &&","      pattern.cache$ == null &&","      pattern.default$ == null &&","      pattern.client$ == null) {","      pattern.in$ = true","    }","","    if (!private$.handle_sub) {","      private$.handle_sub = function handle_sub (args, result) {","        args.meta$ = args.meta$ || {}","","        if (!args.meta$.prior || !args.meta$.prior.entry) {","          return","        }","","        var subfuncs = private$.subrouter.find(args)","","        if (subfuncs) {","          args.meta$.sub = subfuncs.pattern","","          _.each(subfuncs, function subfunc (subfunc) {","            try {","              subfunc.call(self, args, result)","            }","            catch (ex) {","              // TODO: not really satisfactory","              var err = error(ex, 'sub_function_catch', { args: args, result: result })","              self.log.error(errlog(err, {","                kind: 'sub',","                msg: args,","                actid: args.meta$.id","              }))","            }","          })","        }","      }","","      // TODO: other cases","","      // Subs are triggered via events","      self.on('act-in', annotate('in$', private$.handle_sub))","      self.on('act-out', annotate('out$', private$.handle_sub))","    }","","    function annotate (prop, handle_sub) {","      return function annotation (args, result) {","        args = _.clone(args)","        result = _.clone(result)","        args[prop] = true","        handle_sub(args, result)","      }","    }","","    var subs = private$.subrouter.find(pattern)","    if (!subs) {","      private$.subrouter.add(pattern, subs = [])","      subs.pattern = Common.pattern(pattern)","    }","    subs.push(subargs.action)","","    return self","  }","","","  // See [`seneca.add`](#seneca.add)","  function api_add () {","    var self = this","    var args = Common.parsePattern(self, arguments, 'action:f? actmeta:o?')","","    var raw_pattern = args.pattern","","    var pattern = self.util.clean(raw_pattern)","","    if (!_.keys(pattern)) {","      throw error('add_empty_pattern', {args: Common.clean(args)})","    }","","","    var action = args.action || function default_action (msg, done) {","      done.call(this, null, msg.default$ || null)","    }","","    var actmeta = args.actmeta || {}","","    actmeta.raw = _.cloneDeep(raw_pattern)","","    // TODO: refactor plugin name, tag and fullname handling.","    actmeta.plugin_name = actmeta.plugin_name || 'root$'","    actmeta.plugin_fullname = actmeta.plugin_fullname ||","      actmeta.plugin_name +","      ((actmeta.plugin_tag === '-' ? void 0 : actmeta.plugin_tag)","       ? '/' + actmeta.plugin_tag : '')","","    var add_callpoint = callpoint()","    if (add_callpoint) {","      actmeta.callpoint = add_callpoint","    }","","    actmeta.sub = !!raw_pattern.sub$","    actmeta.client = !!raw_pattern.client$","","    // Deprecate a pattern by providing a string message using deprecate$ key.","    actmeta.deprecate = raw_pattern.deprecate$","","    var strict_add = (raw_pattern.strict$ && raw_pattern.strict$.add !== null)","      ? !!raw_pattern.strict$.add : !!so.strict.add","","    var internal_catchall = (raw_pattern.internal$ && raw_pattern.internal$.catchall !== null)","      ? !!raw_pattern.internal$.catchall : !!so.internal.catchall","","    var pattern_rules = _.clone(action.validate || {})","    _.each(pattern, function (v, k) {","      if (_.isObject(v)) {","        pattern_rules[k] = _.clone(v)","        delete pattern[k]","      }","    })","","    var addroute = true","","    // TODO: deprecate","    actmeta.args = _.clone(pattern)","","    actmeta.rules = pattern_rules","","    actmeta.id = refnid()","    actmeta.func = action","","    // Canonical string form of the action pattern.","    actmeta.pattern = Common.pattern(pattern)","","    // Canonical object form of the action pattern.","    actmeta.msgcanon = Jsonic(actmeta.pattern)","","","    var priormeta = self.find(pattern)","","    if (priormeta) {","      if (!internal_catchall && '' === priormeta.pattern) {","        priormeta = null","      }","","      // only exact action patterns are overridden","      // use .wrap for pin-based patterns","      else if (strict_add && priormeta.pattern !== actmeta.pattern) {","        priormeta = null","      }","    }","","    if (priormeta) {","      if (_.isFunction(priormeta.handle)) {","        priormeta.handle(args.pattern, action)","        addroute = false","      }","      else {","        actmeta.priormeta = priormeta","      }","      actmeta.priorpath = priormeta.id + ';' + priormeta.priorpath","    }","    else {","      actmeta.priorpath = ''","    }","","    // FIX: need a much better way to support layered actions","    // this \".handle\" hack is just to make seneca.close work","    if (action && actmeta && _.isFunction(action.handle)) {","      actmeta.handle = action.handle","    }","","    private$.stats.actmap[actmeta.pattern] =","      private$.stats.actmap[actmeta.pattern] || make_action_stats(actmeta)","","    actmeta = modify_action(self, actmeta)","","    if (addroute) {","      self.log.debug({","        kind: 'add',","        case: actmeta.sub ? 'SUB' : 'ADD',","        id: actmeta.id,","        pattern: actmeta.pattern,","        name: action.name,","        callpoint: callpoint","      })","","      private$.actrouter.add(pattern, actmeta)","    }","","    return self","  }","","","  function make_action_stats (actmeta) {","    return {","      id: actmeta.id,","      plugin: {","        full: actmeta.plugin_fullname,","        name: actmeta.plugin_name,","        tag: actmeta.plugin_tag","      },","      prior: actmeta.priorpath,","      calls: 0,","      done: 0,","      fails: 0,","      time: {}","    }","  }","","","  function modify_action (seneca, actmeta) {","    _.each(private$.action_modifiers, function (actmod) {","      actmeta = actmod.call(seneca, actmeta)","    })","","    return actmeta","  }","","","  // TODO: deprecate","  root.findpins = root.pinact = function findpins () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var pins = []","    var patterns = _.flatten(argsarr)","","    _.each(patterns, function (pattern) {","      pattern = _.isString(pattern) ? Jsonic(pattern) : pattern","      pins = pins.concat(_.map(private$.actrouter.list(pattern),","        function (desc) {","          return desc.match","        }","      ))","    })","","    return pins","  }","","","  // DEPRECATED","  function api_act_if () {","    var self = this","    var args = Norma('{execute:b actargs:.*}', arguments)","","    if (args.execute) {","      return self.act.apply(self, args.actargs)","    }","    else return self","  }","","","  // Perform an action. The properties of the first argument are matched against","  // known patterns, and the most specific one wins.","  function api_act () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var self = this","    var spec = Common.parsePattern(self, argsarr, 'done:f?')","    var msg = _.extend(spec.pattern, self.fixedargs)","    var actdone = spec.done","","    if (so.debug.act_caller || so.test) {","      msg.caller$ = '\\n    Action call arguments and location: ' +","        (new Error(Util.inspect(msg).replace(/\\n/g, '')).stack)","          .replace(/.*\\/seneca\\.js:.*\\n/g, '')","          .replace(/.*\\/seneca\\/lib\\/.*\\.js:.*\\n/g, '')","    }","","    do_act(self, msg, actdone)","    return self","  }","","","  function api_wrap (pin, meta, wrapper) {","    var pinthis = this","","    wrapper = _.isFunction(meta) ? meta : wrapper","    meta = _.isFunction(meta) ? {} : meta","","    pin = _.isArray(pin) ? pin : [pin]","    _.each(pin, function (p) {","      _.each(pinthis.findpins(p), function (actpattern) {","        pinthis.add(actpattern, meta, wrapper)","      })","    })","  }","","  var handleClose = function () {","    root.close(function (err) {","      if (err) {","        Common.console_error(err)","      }","","      process.exit(err ? (err.exit === null ? 1 : err.exit) : 0)","    })","  }","","  // close seneca instance","  // sets public seneca.closed property","  function api_close (done) {","    var seneca = this","","    seneca.ready(do_close)","","    function do_close () {","      seneca.closed = true","","      // cleanup process event listeners","      _.each(so.internal.close_signals, function (active, signal) {","        if (active) {","          process.removeListener(signal, handleClose)","        }","      })","","      seneca.log.debug({kind: 'close', notice: 'start', callpoint: callpoint()})","      seneca.act('role:seneca,cmd:close,closing$:true', function (err) {","        seneca.log.debug(errlog(","          err, {kind: 'close', notice: 'end'}))","","        seneca.removeAllListeners('act-in')","        seneca.removeAllListeners('act-out')","        seneca.removeAllListeners('act-err')","        seneca.removeAllListeners('pin')","        seneca.removeAllListeners('after-pin')","        seneca.removeAllListeners('ready')","","        if (_.isFunction(done)) {","          return done.call(seneca, err)","        }","      })","    }","  }","","  // useful when defining services!","  // note: has EventEmitter.once semantics","  // if using .on('ready',fn) it will be be called for each ready event","  function api_ready (ready) {","    var self = this","","    setImmediate(function register_ready () {","      if (root.private$.ge.isclear()) {","        ready.call(self)","      }","      else {","        root.private$.ready_list.push(ready.bind(self))","      }","    })","","    return self","  }","","  // use('pluginname') - built-in, or provide calling code 'require' as seneca opt","  // use(require('pluginname')) - plugin object, init will be called","  // if first arg has property senecaplugin","  function api_use (arg0, arg1, arg2) {","    var self = this","    var plugindesc","","","    // DEPRECATED: Remove when Seneca >= 4.x","    // Allow chaining with seneca.use('options', {...})","    // see https://github.com/rjrodger/seneca/issues/80","    if (arg0 === 'options') {","      self.options(arg1)","      return self","    }","","    try {","      plugindesc = private$.use(arg0, arg1, arg2)","    }","    catch (e) {","      self.die(error(e, 'plugin_' + e.code))","      return self","    }","","    self.register(plugindesc)","","    return self","  }","","  // Return self. Mostly useful as a check that this is a Seneca instance.","  function api_seneca () {","    return this","  }","","  // Describe this instance using the form: Seneca/VERSION/ID","  function api_toString () {","    return this.fullname","  }","","","  function api_inward (inward) {","    Assert('function' === typeof inward)","    Assert(2 === inward.length)","","    private$.inward.add(inward)","    return this","  }","","","  function api_outward (outward) {","    Assert('function' === typeof outward)","    Assert(2 === outward.length)","","    private$.outward.add(outward)","    return this","  }","","","  function do_act (instance, origmsg, actdone) {","    var actstart = Date.now()","    var msg = _.clone(origmsg)","    var act_callpoint = callpoint()","    var is_sync = _.isFunction(actdone)","    var execute_instance = instance","    var timedout = false","","    actdone = actdone || _.noop","","    if (msg.gate$) {","      execute_instance = instance.delegate()","      execute_instance.private$.ge =","        execute_instance.private$.ge.gate()","    }","","    var execspec = {","      fn: function act_fn (done) {","        try {","          execute_action(execute_instance, msg, function reply () {","            if (!timedout) {","              handle_result.apply(this, arguments)","            }","            done()","          })","        }","        catch (e) {","          handle_result.call(execute_instance, e)","          done()","        }","      },","      ontm: function act_tm () {","        timedout = true","        handle_result.call(execute_instance, new Error('[TIMEOUT]'))","      },","      tm: 'number' === typeof msg.timeout$ ? msg.timeout$ : null","    }","","    execute_instance.private$.ge.add(execspec)","","","    var action_ctxt = {}","","    function execute_action (act_instance, msg, reply) {","      var actmeta = act_instance.find(msg, {catchall: so.internal.catchall})","","      msg.meta$ = msg.meta$ || {}","      var delegate = act_make_delegate(act_instance, msg, actmeta)","","      action_ctxt.start = actstart","      action_ctxt.sync = is_sync","      action_ctxt.seneca = delegate","      action_ctxt.actmeta = actmeta","      action_ctxt.options = delegate.options()","      action_ctxt.callpoint = act_callpoint","","      var data = {msg: msg, reply: reply}","      var inward = private$.inward.process(action_ctxt, data)","","      if (handle_inward_break(inward, act_instance, data, actmeta, origmsg)) {","        return","      }","","      if (!actmeta.sub) {","        delegate.log.debug(actlog(","          actmeta, msg, origmsg,","          { kind: 'act', case: 'IN' }))","      }","","      actmeta.func.call(delegate, data.msg, data.reply)","    }","","","    function handle_result () {","      var argsarr = new Array(arguments.length)","      for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","      if (!so.legacy.action_signature &&","          1 === argsarr.length &&","          !_.isError(argsarr[0])) {","        argsarr.unshift(null)","      }","","      var actmeta = action_ctxt.actmeta","      var delegate = this || instance","","      var actend = Date.now()","      action_ctxt.duration = actend - action_ctxt.start","","      var call_cb = true","","      var data = {","        msg: msg,","        err: argsarr[0],","        res: argsarr[1]","      }","","      var outward = private$.outward.process(action_ctxt, data)","      var err = data.err","","      if (outward) {","        if ('error' === outward.kind) {","          err = outward.error ||","            error(outward.code, outward.info)","        }","      }","","      if (err) {","        var out = act_error(instance, err, actmeta, argsarr, actdone,","                            actend - actstart, msg, origmsg, act_callpoint)","","        if (msg.fatal$) {","          return instance.die(out.err)","        }","","        call_cb = out.call_cb","        argsarr[0] = out.err","","        if (delegate && _.isFunction(delegate.on_act_err)) {","          delegate.on_act_err(actmeta, argsarr[0])","        }","      }","      else {","        instance.emit('act-out', msg, argsarr[1])","        argsarr[0] = null","","        delegate.log.debug(actlog(","          actmeta, msg, origmsg,","          { kind: 'act',","            case: 'OUT',","            duration: actend - actstart,","            result: argsarr[1]","          }))","","        if (_.isFunction(delegate.on_act_out)) {","          delegate.on_act_out(actmeta, argsarr[1])","        }","      }","","      try {","        if (call_cb) {","          actdone.apply(delegate, argsarr) // note: err == argsarr[0]","        }","      }","","      // for exceptions thrown inside the callback","      catch (ex) {","        var formattedErr = ex","        // handle throws of non-Error values","        if (!Util.isError(ex)) {","          formattedErr = _.isObject(ex)","            ? new Error(Jsonic.stringify(ex))","            : new Error('' + ex)","        }","","        callback_error(instance, formattedErr, actmeta, argsarr, actdone,","                       actend - actstart, msg, origmsg, act_callpoint)","      }","    }","  }","","","  function handle_inward_break (inward, act_instance, data, actmeta, origmsg) {","    if (!inward) return false","","    var msg = data.msg","    var reply = data.reply","","    if ('error' === inward.kind) {","      var err = inward.error ||","            error(inward.code, inward.info)","","      if (inward.log && inward.log.level) {","        act_instance.log[inward.log.level](errlog(err, errlog(","          actmeta || {}, msg.meta$.prior, msg, origmsg, inward.log.data","        )))","      }","","      reply.call(act_instance, err)","      return true","    }","    else if ('result' === inward.kind) {","      if (inward.log && inward.log.level) {","        act_instance.log[inward.log.level](actlog(","          actmeta || {}, msg, origmsg, inward.log.data","        ))","      }","","      reply.call(act_instance, null, inward.result)","      return true","    }","  }","","","  function act_error (instance, err, actmeta, result, cb,","    duration, msg, origmsg, act_callpoint) {","    var call_cb = true","    actmeta = actmeta || {}","","    if (!err.seneca) {","      err = error(err, 'act_execute', _.extend(","        {},","        err.details,","        {","          message: (err.eraro && err.orig) ? err.orig.message : err.message,","          pattern: actmeta.pattern,","          fn: actmeta.func,","          cb: cb,","          instance: instance.toString()","        }))","","      result[0] = err","    }","","    // Special legacy case for seneca-perm","    else if (err.orig &&","      _.isString(err.orig.code) &&","      err.orig.code.indexOf('perm/') === 0) {","      err = err.orig","      result[0] = err","    }","","    err.details = err.details || {}","    err.details.plugin = err.details.plugin || {}","","    var entry = actlog(","      actmeta, msg, origmsg,","      {","        // kind is act as this log entry relates to an action","        kind: 'act',","        case: 'ERR',","        duration: duration","      })","    entry = errlog(err, entry)","","    instance.log.error(entry)","    instance.emit('act-err', msg, err)","","    // when fatal$ is set, prefer to die instead","    if (so.errhandler && (!msg || !msg.fatal$)) {","      call_cb = !so.errhandler.call(instance, err)","    }","","    return {","      call_cb: call_cb,","      err: err","    }","  }","","  function callback_error (instance, err, actmeta, result, cb,","    duration, msg, origmsg, act_callpoint) {","    actmeta = actmeta || {}","","    if (!err.seneca) {","      err = error(err, 'act_callback', _.extend(","        {},","        err.details,","        {","          message: err.message,","          pattern: actmeta.pattern,","          fn: actmeta.func,","          cb: cb,","          instance: instance.toString()","        }))","","      result[0] = err","    }","","    err.details = err.details || {}","    err.details.plugin = err.details.plugin || {}","","    instance.log.error(actlog(","      actmeta, msg, origmsg,","      {","        // kind is act as this log entry relates to an action","        kind: 'act',","        case: 'ERR',","        info: err.message,","        code: err.code,","        err: err,","        duration: duration","      }))","","    instance.emit('act-err', msg, err, result[1])","","    if (so.errhandler) {","      so.errhandler.call(instance, err)","    }","  }","","","  function api_fix () {","    var self = this","","    var defargs = Common.parsePattern(self, arguments)","","    var fix = self.delegate(defargs.pattern)","","    fix.add = function fix_add () {","      var args = Common.parsePattern(fix, arguments, 'rest:.*', defargs.pattern)","      var addargs = [args.pattern].concat(args.rest)","      return self.add.apply(fix, addargs)","    }","","    return fix","  }","","","  function api_delegate (fixedargs) {","    var self = this","    fixedargs = fixedargs || {}","","    var delegate = Object.create(self)","    delegate.private$ = Object.create(self.private$)","","    delegate.did = refnid()","","    var strdesc","    delegate.toString = function toString () {","      if (strdesc) return strdesc","      var vfa = {}","      _.each(fixedargs, function (v, k) {","        if (~k.indexOf('$')) return","        vfa[k] = v","      })","","      strdesc = self.toString() +","        (_.keys(vfa).length ? '/' + Jsonic.stringify(vfa) : '')","","      return strdesc","    }","","    delegate.fixedargs = (so.strict.fixedargs","      ? _.extend({}, fixedargs, self.fixedargs)","      : _.extend({}, self.fixedargs, fixedargs))","","    delegate.delegate = function delegate (further_fixedargs) {","      var args = _.extend({}, delegate.fixedargs, further_fixedargs || {})","      return self.delegate.call(this, args)","    }","","    // Somewhere to put contextual data for this delegate.","    // For example, data for individual web requests.","    delegate.context = {}","","    delegate.client = function client () {","      return self.client.apply(this, arguments)","    }","","    delegate.listen = function listen () {","      return self.listen.apply(this, arguments)","    }","","    return delegate","  }","","","  function api_options (options, chain) {","    var self = this","","    if (options != null) {","      self.log.debug({","        kind: 'options',","        case: 'SET',","        options: options,","        callpoint: callpoint()})","    }","","    so = private$.exports.options = ((options == null)","      ? private$.optioner.get()","      : private$.optioner.set(options))","","    if (so.legacy.logging) {","      if (options && options.log && _.isArray(options.log.map)) {","        for (var i = 0; i < options.log.map.length; ++i) {","          self.logroute(options.log.map[i])","        }","      }","    }","","    // Allow chaining with seneca.options({...}, true)","    // see https://github.com/rjrodger/seneca/issues/80","    return chain ? self : so","  }","","","  function api_error (errhandler) {","    this.options({ errhandler: errhandler })","    return this","  }","","","  // TODO: should set all system.close_signals to false","  function api_test (errhandler, logspec) {","    if ('function' !== typeof errhandler && null !== errhandler) {","      logspec = errhandler","      errhandler = null","    }","","    this.options({","      errhandler: null === errhandler ? null : (errhandler || console.log),","      test: true,","      log: logspec || 'test'","    })","","    private$.logger = load_logger(root, so.internal.logger)","","    return this","  }","","  // Inspired by https://github.com/hapijs/hapi/blob/master/lib/plugin.js decorate","  function api_decorate () {","    var args = Norma('property:s value:.', arguments)","","    // TODO: review; needs to be more universally applicable","    // also messages should not be embedded directly","    var property = args.property","    Assert(property[0] !== '_', 'property cannot start with _')","    Assert(private$.decorations[property] === undefined, 'seneca is already decorated with the property')","    Assert(root[property] === undefined, 'cannot override a core seneca property: ' + property)","","    root[property] = private$.decorations[property] = args.value","  }","","  // DEPRECATED","  // for use with async","  root.next_act = function next_act () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var si = this || root","","    si.log.warn({","      kind: 'notice',","      case: 'DEPRECATION',","      notice: Errors.deprecation.seneca_next_act","    })","","","    return function (next) {","      argsarr.push(next)","      si.act.apply(si, argsarr)","    }","  }","","","  // TODO: follow api_ convention","  root.gate = function gate () {","    return this.delegate({gate$: true})","  }","","","  // TODO: follow api_ convention","  root.ungate = function ungate () {","    this.fixedargs.gate$ = false","    return this","  }","","","  // Add builtin actions.","  root.add({role: 'seneca', cmd: 'stats'}, action_seneca_stats)","  root.add({role: 'seneca', cmd: 'close'}, action_seneca_close)","  root.add({role: 'seneca', info: 'fatal'}, action_seneca_fatal)","  root.add({role: 'seneca', get: 'options'}, action_options_get)","","  // Legacy builtin actions.","  // Remove in Seneca 4.x","  root.add({role: 'seneca', stats: true, deprecate$: true}, action_seneca_stats)","  root.add({role: 'options', cmd: 'get', deprecate$: true}, action_options_get)","","  Print(root)","","  // Define builtin actions.","","  function action_seneca_fatal (args, done) {","    done()","  }","","  function action_seneca_close (args, done) {","    this.emit('close')","    done()","  }","","  function action_seneca_stats (args, done) {","    args = args || {}","    var stats","","    if (args.pattern && private$.stats.actmap[args.pattern]) {","      stats = private$.stats.actmap[args.pattern]","      stats.time = private$.timestats.calculate(args.pattern)","    }","    else {","      stats = _.clone(private$.stats)","      stats.now = new Date()","      stats.uptime = stats.now - stats.start","","      stats.now = new Date(stats.now).toISOString()","      stats.start = new Date(stats.start).toISOString()","","      var summary =","      (args.summary == null) ||","        (/^false$/i.exec(args.summary) ? false : !!(args.summary))","","      if (summary) {","        stats.actmap = void 0","      }","      else {","        _.each(private$.stats.actmap, function (a, p) {","          private$.stats.actmap[p].time = private$.timestats.calculate(p)","        })","      }","    }","","    if (done) {","      done(null, stats)","    }","    return stats","  }","","  root.stats = action_seneca_stats","","  function action_options_get (args, done) {","    var options = private$.optioner.get()","","    var base = args.base || null","    var root = base ? (options[base] || {}) : options","    var val = args.key ? root[args.key] : root","","    done(null, Common.copydata(val))","  }","","  _.each(so.internal.close_signals, function (active, signal) {","    if (active) {","      process.once(signal, handleClose)","    }","  })","","  function load_logger (instance, log_plugin) {","    log_plugin = log_plugin || require('./lib/logging')","","    return log_plugin.preload.call(instance).extend.logger","  }","","  function action_queue_clear () {","    root.emit('ready')","","    var ready = root.private$.ready_list.shift()","    if (ready) {","      ready()","    }","","    if (root.private$.ge.isclear()) {","      while (0 < root.private$.ready_list.length) {","        root.private$.ready_list.shift()()","      }","    }","  }","","  return root","}","","","// Private member variables of Seneca object.","function make_private () {","  return {","    stats: {","      start: Date.now(),","      act: {","        calls: 0,","        done: 0,","        fails: 0,","        cache: 0","      },","      actmap: {}","    }","  }","}","","","// Callpoint resolver. Indicates location in calling code.","function make_callpoint (active) {","  if (active) {","    return function () {","      return error.callpoint(","        new Error(),","        ['/seneca/seneca.js', '/seneca/lib/', '/lodash.js'])","    }","  }","","  return _.noop","}","","","function make_log (instance, modifier) {","  var log = instance.log || function log (data) {","    instance.private$.logger(this, data)","  }","","  log = prepare_log(instance, make_modified_log(log, modifier))","  make_log_levels(instance, log)","","  return log","}","","function prepare_log (instance, log) {","  return function prepare_log_data () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var a0 = argsarr[0]","    var data = _.isArray(a0) ? a0","          : _.isObject(a0) ? a0","          : argsarr","    log.call(instance, data)","  }","}","","function make_log_levels (instance, log) {","  function log_level (level) {","    return function (data) {","      data.level = level","    }","  }","  log.debug = prepare_log(instance, make_modified_log(log, log_level('debug')))","  log.info = prepare_log(instance, make_modified_log(log, log_level('info')))","  log.warn = prepare_log(instance, make_modified_log(log, log_level('warn')))","  log.error = prepare_log(instance, make_modified_log(log, log_level('error')))","  log.fatal = prepare_log(instance, make_modified_log(log, log_level('fatal')))","}","","function make_modified_log (log, modifier) {","  return function log_modifier (data) {","    modifier(data)","    log.call(this, data)","  }","}","","function default_log_modifier (data) {","  data.level = null == data.level ? 'debug' : data.level","  data.seneca = null == data.seneca ? root.id : data.seneca","  data.when = null == data.when ? Date.now() : data.when","}","","","function act_make_delegate (instance, msg, actmeta) {","  actmeta = actmeta || {}","","  var delegate_args = {","    plugin$: {","      name: actmeta.plugin_name,","      tag: actmeta.plugin_tag","    }","  }","","  var delegate = instance.delegate(delegate_args)","","  // special overrides","  if (msg.meta$.tx) {","    delegate.fixedargs.tx$ = msg.meta$.tx","  }","","  // automate actid log insertion","","  delegate.log = make_log(delegate, function act_delegate_log_modifier (data) {","    data.actid = msg.meta$.id","","    data.plugin_name = data.plugin_name || actmeta.plugin_name","    data.plugin_tag = data.plugin_tag || actmeta.plugin_tag","    data.pattern = data.pattern || actmeta.pattern","  })","","  if (actmeta.priormeta) {","    // TODO: support Common.parsePattern","    delegate.prior = function (prior_msg, prior_cb) {","      prior_msg = _.clone(prior_msg)","      prior_msg.tx$ = msg.meta$.tx","      prior_msg.default$ = prior_msg.default$ || msg.default$","","      delete prior_msg.id$","      delete prior_msg.gate$","      delete prior_msg.actid$","      delete prior_msg.meta$","      delete prior_msg.transport$","","      prior_msg.meta$ = {}","      prior_msg.meta$.start = Date.now()","      prior_msg.meta$.sync = msg.meta$.sync","","      prior_msg.meta$.prior = _.clone(msg.meta$.prior)","      prior_msg.meta$.prior.chain = _.clone(msg.meta$.prior.chain)","      prior_msg.meta$.prior.chain.push(actmeta.id)","      prior_msg.meta$.prior.entry = false","      prior_msg.meta$.prior.depth++","","      var prior_action_ctxt = {","        actmeta: actmeta.priormeta","      }","","      // TODO: handle inward result","      delegate.private$.inward.process(","        {tags: ['prior']},","        prior_action_ctxt, {msg: msg})","","      var pd = act_make_delegate(delegate, msg, actmeta.priormeta)","      actmeta.priormeta.func.call(pd, prior_msg, prior_cb.bind(pd))","    }","","    delegate.parent = function (prior_msg, prior_cb) {","      delegate.log.warn({","        kind: 'notice',","        case: 'DEPRECATION',","        notice: Errors.deprecation.seneca_parent","      })","      delegate.prior(prior_msg, prior_cb)","    }","  }","  else {","    delegate.prior = function (msg, done) {","      var out = msg.default$ ? msg.default$ : null","      return done.call(delegate, null, out)","    }","  }","","  return delegate","}",""],"l":{"6":1,"7":1,"8":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"38":1,"39":1,"43":1,"49":1,"186":1,"196":0,"202":1,"203":0,"204":0,"206":1,"210":1,"211":0,"215":0,"216":0,"220":0,"222":0,"225":0,"226":0,"227":0,"230":0,"231":0,"235":0,"236":0,"239":0,"240":0,"243":0,"247":1,"250":1,"253":1,"254":0,"255":0,"257":0,"259":0,"263":1,"264":0,"265":0,"267":0,"268":0,"270":0,"273":1,"277":1,"278":0,"283":1,"284":0,"287":0,"290":0,"291":0,"294":0,"297":0,"298":0,"301":0,"302":0,"305":0,"306":0,"308":0,"311":0,"312":0,"313":0,"314":0,"315":0,"317":0,"359":0,"405":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"425":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"437":0,"440":0,"443":0,"444":0,"445":0,"448":0,"459":0,"461":0,"462":0,"463":0,"464":0,"467":0,"469":0,"477":0,"481":0,"482":0,"484":0,"485":0,"490":0,"492":0,"500":0,"501":0,"502":0,"503":0,"511":0,"512":0,"514":0,"515":0,"516":0,"521":0,"522":0,"523":0,"530":0,"531":0,"533":0,"535":0,"536":0,"539":0,"553":0,"559":1,"560":0,"562":0,"564":0,"566":0,"567":0,"569":0,"570":0,"572":0,"576":1,"577":0,"580":0,"581":0,"584":0,"585":0,"586":0,"589":0,"592":1,"593":0,"595":0,"596":0,"597":0,"603":0,"606":0,"607":0,"608":0,"610":0,"611":0,"614":0,"616":0,"617":0,"619":0,"620":0,"621":0,"625":0,"626":0,"639":0,"640":0,"643":1,"644":0,"645":0,"646":0,"647":0,"648":0,"652":0,"653":0,"654":0,"655":0,"657":0,"659":0,"664":1,"665":0,"666":0,"668":0,"670":0,"672":0,"673":0,"677":0,"678":0,"681":0,"683":0,"686":0,"687":0,"692":0,"693":0,"694":0,"697":0,"698":0,"701":0,"703":0,"706":0,"709":0,"710":0,"711":0,"712":0,"713":0,"717":0,"720":0,"722":0,"724":0,"725":0,"728":0,"731":0,"734":0,"736":0,"737":0,"738":0,"743":0,"744":0,"748":0,"749":0,"750":0,"751":0,"754":0,"756":0,"759":0,"764":0,"765":0,"768":0,"771":0,"773":0,"774":0,"783":0,"786":0,"790":1,"791":0,"807":1,"808":0,"809":0,"812":0,"817":0,"818":0,"819":0,"821":0,"822":0,"824":0,"825":0,"826":0,"828":0,"833":0,"838":1,"839":0,"840":0,"842":0,"843":0,"845":0,"851":1,"852":0,"853":0,"855":0,"856":0,"857":0,"858":0,"860":0,"861":0,"867":0,"868":0,"872":1,"873":0,"875":0,"876":0,"878":0,"879":0,"880":0,"881":0,"886":0,"887":0,"888":0,"889":0,"892":0,"898":1,"899":0,"901":0,"903":1,"904":0,"907":0,"908":0,"909":0,"913":0,"914":0,"915":0,"918":0,"919":0,"920":0,"921":0,"922":0,"923":0,"925":0,"926":0,"935":1,"936":0,"938":0,"939":0,"940":0,"943":0,"947":0,"953":1,"954":0,"955":0,"961":0,"962":0,"963":0,"966":0,"967":0,"970":0,"971":0,"974":0,"976":0,"980":1,"981":0,"985":1,"986":0,"990":1,"991":0,"992":0,"994":0,"995":0,"999":1,"1000":0,"1001":0,"1003":0,"1004":0,"1008":1,"1009":0,"1010":0,"1011":0,"1012":0,"1013":0,"1014":0,"1016":0,"1018":0,"1019":0,"1020":0,"1024":0,"1026":0,"1027":0,"1028":0,"1029":0,"1031":0,"1035":0,"1036":0,"1040":0,"1041":0,"1046":0,"1049":0,"1051":1,"1052":0,"1054":0,"1055":0,"1057":0,"1058":0,"1059":0,"1060":0,"1061":0,"1062":0,"1064":0,"1065":0,"1067":0,"1068":0,"1071":0,"1072":0,"1077":0,"1081":1,"1082":0,"1083":0,"1085":0,"1088":0,"1091":0,"1092":0,"1094":0,"1095":0,"1097":0,"1099":0,"1105":0,"1106":0,"1108":0,"1109":0,"1110":0,"1115":0,"1116":0,"1119":0,"1120":0,"1123":0,"1124":0,"1126":0,"1127":0,"1131":0,"1132":0,"1134":0,"1142":0,"1143":0,"1147":0,"1148":0,"1149":0,"1155":0,"1157":0,"1158":0,"1163":0,"1170":1,"1171":0,"1173":0,"1174":0,"1176":0,"1177":0,"1180":0,"1181":0,"1186":0,"1187":0,"1189":0,"1190":0,"1191":0,"1196":0,"1197":0,"1202":1,"1204":0,"1205":0,"1207":0,"1208":0,"1219":0,"1223":0,"1226":0,"1227":0,"1230":0,"1231":0,"1233":0,"1241":0,"1243":0,"1244":0,"1247":0,"1248":0,"1251":0,"1257":1,"1259":0,"1261":0,"1262":0,"1273":0,"1276":0,"1277":0,"1279":0,"1291":0,"1293":0,"1294":0,"1299":1,"1300":0,"1302":0,"1304":0,"1306":0,"1307":0,"1308":0,"1309":0,"1312":0,"1316":1,"1317":0,"1318":0,"1320":0,"1321":0,"1323":0,"1325":0,"1326":0,"1327":0,"1328":0,"1329":0,"1330":0,"1331":0,"1334":0,"1337":0,"1340":0,"1344":0,"1345":0,"1346":0,"1351":0,"1353":0,"1354":0,"1357":0,"1358":0,"1361":0,"1365":1,"1366":0,"1368":0,"1369":0,"1376":0,"1380":0,"1381":0,"1382":0,"1383":0,"1390":0,"1394":1,"1395":0,"1396":0,"1401":1,"1402":0,"1403":0,"1404":0,"1407":0,"1413":0,"1415":0,"1419":1,"1420":0,"1424":0,"1425":0,"1426":0,"1427":0,"1429":0,"1434":0,"1435":0,"1436":0,"1438":0,"1440":0,"1447":0,"1448":0,"1449":0,"1455":0,"1456":0,"1461":0,"1462":0,"1463":0,"1468":0,"1469":0,"1470":0,"1471":0,"1475":0,"1476":0,"1478":0,"1482":1,"1483":0,"1486":1,"1487":0,"1488":0,"1491":1,"1492":0,"1493":0,"1495":0,"1496":0,"1497":0,"1500":0,"1501":0,"1502":0,"1504":0,"1505":0,"1507":0,"1511":0,"1512":0,"1515":0,"1516":0,"1521":0,"1522":0,"1524":0,"1527":0,"1529":1,"1530":0,"1532":0,"1533":0,"1534":0,"1536":0,"1539":0,"1540":0,"1541":0,"1545":1,"1546":0,"1548":0,"1551":1,"1552":0,"1554":0,"1555":0,"1556":0,"1559":0,"1560":0,"1561":0,"1566":0,"1571":1,"1572":0,"1588":1,"1589":0,"1590":0,"1591":0,"1597":0,"1601":1,"1602":0,"1603":0,"1606":0,"1607":0,"1609":0,"1612":1,"1613":0,"1614":0,"1615":0,"1617":0,"1618":0,"1621":0,"1625":1,"1626":1,"1627":0,"1628":0,"1631":0,"1632":0,"1633":0,"1634":0,"1635":0,"1638":1,"1639":0,"1640":0,"1641":0,"1645":1,"1646":0,"1647":0,"1648":0,"1652":1,"1653":0,"1655":0,"1662":0,"1665":0,"1666":0,"1671":0,"1672":0,"1674":0,"1675":0,"1676":0,"1679":0,"1681":0,"1682":0,"1683":0,"1684":0,"1686":0,"1687":0,"1688":0,"1689":0,"1690":0,"1692":0,"1693":0,"1694":0,"1696":0,"1697":0,"1698":0,"1699":0,"1700":0,"1702":0,"1707":0,"1711":0,"1712":0,"1715":0,"1716":0,"1721":0,"1725":0,"1726":0,"1727":0,"1731":0}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/actions.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/actions.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":1,"23":1,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":1,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":1,"112":0,"113":0,"114":0,"115":0,"116":0,"117":1,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":1,"128":0,"129":0,"130":0,"131":1,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":1,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0,0],"11":[0,0,0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0,0],"45":[0,0,0,0],"46":[0,0,0,0],"47":[0,0],"48":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"fnMap":{"1":{"name":"(anonymous_1)","line":17,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":41}}},"2":{"name":"(anonymous_2)","line":35,"loc":{"start":{"line":35,"column":14},"end":{"line":35,"column":33}}},"3":{"name":"(anonymous_3)","line":41,"loc":{"start":{"line":41,"column":15},"end":{"line":41,"column":34}}},"4":{"name":"inward_announce","line":72,"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":38}}},"5":{"name":"inward_closed","line":83,"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":36}}},"6":{"name":"inward_resolve_msg_id","line":96,"loc":{"start":{"line":96,"column":0},"end":{"line":96,"column":44}}},"7":{"name":"inward_act_stats","line":120,"loc":{"start":{"line":120,"column":0},"end":{"line":120,"column":39}}},"8":{"name":"outward_act_stats","line":138,"loc":{"start":{"line":138,"column":0},"end":{"line":138,"column":40}}},"9":{"name":"inward_act_default","line":172,"loc":{"start":{"line":172,"column":0},"end":{"line":172,"column":41}}},"10":{"name":"inward_act_not_found","line":208,"loc":{"start":{"line":208,"column":0},"end":{"line":208,"column":43}}},"11":{"name":"inward_validate_msg","line":229,"loc":{"start":{"line":229,"column":0},"end":{"line":229,"column":42}}},"12":{"name":"(anonymous_12)","line":243,"loc":{"start":{"line":243,"column":29},"end":{"line":243,"column":45}}},"13":{"name":"inward_act_cache","line":272,"loc":{"start":{"line":272,"column":0},"end":{"line":272,"column":39}}},"14":{"name":"outward_act_cache","line":310,"loc":{"start":{"line":310,"column":0},"end":{"line":310,"column":40}}},"15":{"name":"inward_warnings","line":329,"loc":{"start":{"line":329,"column":0},"end":{"line":329,"column":38}}},"16":{"name":"inward_msg_meta","line":348,"loc":{"start":{"line":348,"column":0},"end":{"line":348,"column":38}}},"17":{"name":"inward_msg_modify","line":364,"loc":{"start":{"line":364,"column":0},"end":{"line":364,"column":40}}},"18":{"name":"inward_prepare_delegate","line":378,"loc":{"start":{"line":378,"column":0},"end":{"line":378,"column":46}}},"19":{"name":"good","line":384,"loc":{"start":{"line":384,"column":21},"end":{"line":384,"column":41}}},"20":{"name":"bad","line":388,"loc":{"start":{"line":388,"column":20},"end":{"line":388,"column":39}}},"21":{"name":"outward_res_object","line":394,"loc":{"start":{"line":394,"column":0},"end":{"line":394,"column":41}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":25}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":30}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}},"6":{"start":{"line":17,"column":0},"end":{"line":31,"column":1}},"7":{"start":{"line":18,"column":2},"end":{"line":18,"column":19}},"8":{"start":{"line":20,"column":2},"end":{"line":20,"column":59}},"9":{"start":{"line":21,"column":2},"end":{"line":21,"column":30}},"10":{"start":{"line":22,"column":2},"end":{"line":22,"column":17}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":51}},"12":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"13":{"start":{"line":27,"column":4},"end":{"line":27,"column":48}},"14":{"start":{"line":30,"column":2},"end":{"line":30,"column":16}},"15":{"start":{"line":35,"column":0},"end":{"line":37,"column":1}},"16":{"start":{"line":36,"column":2},"end":{"line":36,"column":43}},"17":{"start":{"line":41,"column":0},"end":{"line":46,"column":1}},"18":{"start":{"line":42,"column":2},"end":{"line":42,"column":59}},"19":{"start":{"line":43,"column":2},"end":{"line":43,"column":47}},"20":{"start":{"line":44,"column":2},"end":{"line":44,"column":31}},"21":{"start":{"line":45,"column":2},"end":{"line":45,"column":14}},"22":{"start":{"line":49,"column":0},"end":{"line":62,"column":1}},"23":{"start":{"line":65,"column":0},"end":{"line":69,"column":1}},"24":{"start":{"line":72,"column":0},"end":{"line":80,"column":1}},"25":{"start":{"line":73,"column":2},"end":{"line":73,"column":27}},"26":{"start":{"line":73,"column":21},"end":{"line":73,"column":27}},"27":{"start":{"line":75,"column":2},"end":{"line":77,"column":3}},"28":{"start":{"line":76,"column":4},"end":{"line":76,"column":49}},"29":{"start":{"line":79,"column":2},"end":{"line":79,"column":38}},"30":{"start":{"line":83,"column":0},"end":{"line":93,"column":1}},"31":{"start":{"line":84,"column":2},"end":{"line":92,"column":3}},"32":{"start":{"line":85,"column":4},"end":{"line":91,"column":5}},"33":{"start":{"line":96,"column":0},"end":{"line":117,"column":1}},"34":{"start":{"line":97,"column":2},"end":{"line":97,"column":20}},"35":{"start":{"line":99,"column":2},"end":{"line":103,"column":19}},"36":{"start":{"line":105,"column":2},"end":{"line":110,"column":27}},"37":{"start":{"line":112,"column":2},"end":{"line":112,"column":44}},"38":{"start":{"line":114,"column":2},"end":{"line":114,"column":19}},"39":{"start":{"line":115,"column":2},"end":{"line":115,"column":19}},"40":{"start":{"line":116,"column":2},"end":{"line":116,"column":30}},"41":{"start":{"line":120,"column":0},"end":{"line":135,"column":1}},"42":{"start":{"line":121,"column":2},"end":{"line":123,"column":3}},"43":{"start":{"line":122,"column":4},"end":{"line":122,"column":10}},"44":{"start":{"line":125,"column":2},"end":{"line":125,"column":37}},"45":{"start":{"line":126,"column":2},"end":{"line":126,"column":28}},"46":{"start":{"line":128,"column":2},"end":{"line":128,"column":36}},"47":{"start":{"line":130,"column":2},"end":{"line":131,"column":55}},"48":{"start":{"line":134,"column":2},"end":{"line":134,"column":18}},"49":{"start":{"line":138,"column":0},"end":{"line":169,"column":1}},"50":{"start":{"line":139,"column":2},"end":{"line":141,"column":3}},"51":{"start":{"line":140,"column":4},"end":{"line":140,"column":10}},"52":{"start":{"line":143,"column":2},"end":{"line":143,"column":37}},"53":{"start":{"line":144,"column":2},"end":{"line":144,"column":27}},"54":{"start":{"line":146,"column":2},"end":{"line":146,"column":20}},"55":{"start":{"line":148,"column":2},"end":{"line":154,"column":3}},"56":{"start":{"line":153,"column":4},"end":{"line":153,"column":65}},"57":{"start":{"line":156,"column":2},"end":{"line":156,"column":36}},"58":{"start":{"line":158,"column":2},"end":{"line":159,"column":55}},"59":{"start":{"line":162,"column":2},"end":{"line":168,"column":3}},"60":{"start":{"line":163,"column":4},"end":{"line":163,"column":30}},"61":{"start":{"line":164,"column":4},"end":{"line":164,"column":20}},"62":{"start":{"line":167,"column":4},"end":{"line":167,"column":19}},"63":{"start":{"line":172,"column":0},"end":{"line":205,"column":1}},"64":{"start":{"line":173,"column":2},"end":{"line":173,"column":23}},"65":{"start":{"line":174,"column":2},"end":{"line":174,"column":20}},"66":{"start":{"line":177,"column":2},"end":{"line":204,"column":3}},"67":{"start":{"line":178,"column":4},"end":{"line":178,"column":72}},"68":{"start":{"line":180,"column":4},"end":{"line":203,"column":5}},"69":{"start":{"line":181,"column":6},"end":{"line":191,"column":7}},"70":{"start":{"line":194,"column":9},"end":{"line":203,"column":5}},"71":{"start":{"line":195,"column":6},"end":{"line":202,"column":7}},"72":{"start":{"line":208,"column":0},"end":{"line":226,"column":1}},"73":{"start":{"line":209,"column":2},"end":{"line":209,"column":23}},"74":{"start":{"line":210,"column":2},"end":{"line":210,"column":20}},"75":{"start":{"line":212,"column":2},"end":{"line":225,"column":3}},"76":{"start":{"line":213,"column":4},"end":{"line":224,"column":5}},"77":{"start":{"line":229,"column":0},"end":{"line":267,"column":1}},"78":{"start":{"line":230,"column":2},"end":{"line":230,"column":23}},"79":{"start":{"line":231,"column":2},"end":{"line":231,"column":20}},"80":{"start":{"line":233,"column":2},"end":{"line":233,"column":22}},"81":{"start":{"line":235,"column":2},"end":{"line":237,"column":3}},"82":{"start":{"line":236,"column":4},"end":{"line":236,"column":10}},"83":{"start":{"line":239,"column":2},"end":{"line":239,"column":16}},"84":{"start":{"line":243,"column":2},"end":{"line":245,"column":4}},"85":{"start":{"line":244,"column":4},"end":{"line":244,"column":14}},"86":{"start":{"line":247,"column":2},"end":{"line":266,"column":3}},"87":{"start":{"line":248,"column":4},"end":{"line":265,"column":5}},"88":{"start":{"line":272,"column":0},"end":{"line":306,"column":1}},"89":{"start":{"line":273,"column":2},"end":{"line":273,"column":23}},"90":{"start":{"line":274,"column":2},"end":{"line":274,"column":20}},"91":{"start":{"line":276,"column":2},"end":{"line":276,"column":26}},"92":{"start":{"line":277,"column":2},"end":{"line":277,"column":37}},"93":{"start":{"line":279,"column":2},"end":{"line":305,"column":3}},"94":{"start":{"line":280,"column":4},"end":{"line":280,"column":49}},"95":{"start":{"line":282,"column":4},"end":{"line":304,"column":5}},"96":{"start":{"line":283,"column":6},"end":{"line":283,"column":32}},"97":{"start":{"line":285,"column":6},"end":{"line":285,"column":36}},"98":{"start":{"line":286,"column":6},"end":{"line":286,"column":36}},"99":{"start":{"line":288,"column":6},"end":{"line":299,"column":7}},"100":{"start":{"line":301,"column":6},"end":{"line":301,"column":25}},"101":{"start":{"line":303,"column":6},"end":{"line":303,"column":16}},"102":{"start":{"line":310,"column":0},"end":{"line":326,"column":1}},"103":{"start":{"line":311,"column":2},"end":{"line":311,"column":23}},"104":{"start":{"line":312,"column":2},"end":{"line":312,"column":20}},"105":{"start":{"line":313,"column":2},"end":{"line":313,"column":20}},"106":{"start":{"line":314,"column":2},"end":{"line":314,"column":20}},"107":{"start":{"line":316,"column":2},"end":{"line":316,"column":26}},"108":{"start":{"line":317,"column":2},"end":{"line":317,"column":37}},"109":{"start":{"line":319,"column":2},"end":{"line":325,"column":3}},"110":{"start":{"line":320,"column":4},"end":{"line":324,"column":6}},"111":{"start":{"line":329,"column":0},"end":{"line":345,"column":1}},"112":{"start":{"line":330,"column":2},"end":{"line":330,"column":23}},"113":{"start":{"line":331,"column":2},"end":{"line":331,"column":20}},"114":{"start":{"line":333,"column":2},"end":{"line":333,"column":22}},"115":{"start":{"line":335,"column":2},"end":{"line":344,"column":3}},"116":{"start":{"line":336,"column":4},"end":{"line":343,"column":6}},"117":{"start":{"line":348,"column":0},"end":{"line":361,"column":1}},"118":{"start":{"line":349,"column":2},"end":{"line":349,"column":20}},"119":{"start":{"line":351,"column":2},"end":{"line":351,"column":22}},"120":{"start":{"line":353,"column":2},"end":{"line":353,"column":42}},"121":{"start":{"line":354,"column":2},"end":{"line":354,"column":36}},"122":{"start":{"line":355,"column":2},"end":{"line":355,"column":50}},"123":{"start":{"line":356,"column":2},"end":{"line":356,"column":48}},"124":{"start":{"line":358,"column":2},"end":{"line":358,"column":75}},"125":{"start":{"line":359,"column":2},"end":{"line":359,"column":30}},"126":{"start":{"line":360,"column":2},"end":{"line":360,"column":28}},"127":{"start":{"line":364,"column":0},"end":{"line":375,"column":1}},"128":{"start":{"line":365,"column":2},"end":{"line":369,"column":3}},"129":{"start":{"line":373,"column":2},"end":{"line":373,"column":21}},"130":{"start":{"line":374,"column":2},"end":{"line":374,"column":24}},"131":{"start":{"line":378,"column":0},"end":{"line":391,"column":1}},"132":{"start":{"line":379,"column":2},"end":{"line":379,"column":43}},"133":{"start":{"line":380,"column":2},"end":{"line":380,"column":33}},"134":{"start":{"line":382,"column":2},"end":{"line":382,"column":24}},"135":{"start":{"line":384,"column":2},"end":{"line":386,"column":3}},"136":{"start":{"line":385,"column":4},"end":{"line":385,"column":20}},"137":{"start":{"line":388,"column":2},"end":{"line":390,"column":3}},"138":{"start":{"line":389,"column":4},"end":{"line":389,"column":14}},"139":{"start":{"line":394,"column":0},"end":{"line":425,"column":1}},"140":{"start":{"line":395,"column":2},"end":{"line":395,"column":23}},"141":{"start":{"line":396,"column":2},"end":{"line":396,"column":20}},"142":{"start":{"line":397,"column":2},"end":{"line":397,"column":20}},"143":{"start":{"line":398,"column":2},"end":{"line":398,"column":20}},"144":{"start":{"line":400,"column":2},"end":{"line":406,"column":23}},"145":{"start":{"line":408,"column":2},"end":{"line":412,"column":34}},"146":{"start":{"line":414,"column":2},"end":{"line":424,"column":3}},"147":{"start":{"line":415,"column":4},"end":{"line":423,"column":5}}},"branchMap":{"1":{"line":20,"type":"cond-expr","locations":[{"start":{"line":20,"column":34},"end":{"line":20,"column":49}},{"start":{"line":20,"column":52},"end":{"line":20,"column":59}}]},"2":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":8},"end":{"line":22,"column":11}},{"start":{"line":22,"column":15},"end":{"line":22,"column":17}}]},"3":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":2}},{"start":{"line":26,"column":2},"end":{"line":26,"column":2}}]},"4":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":6},"end":{"line":26,"column":14}},{"start":{"line":26,"column":18},"end":{"line":26,"column":23}},{"start":{"line":26,"column":27},"end":{"line":26,"column":41}}]},"5":{"line":42,"type":"cond-expr","locations":[{"start":{"line":42,"column":34},"end":{"line":42,"column":49}},{"start":{"line":42,"column":52},"end":{"line":42,"column":59}}]},"6":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":73,"column":2}},{"start":{"line":73,"column":2},"end":{"line":73,"column":2}}]},"7":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":2},"end":{"line":75,"column":2}},{"start":{"line":75,"column":2},"end":{"line":75,"column":2}}]},"8":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":2},"end":{"line":84,"column":2}},{"start":{"line":84,"column":2},"end":{"line":84,"column":2}}]},"9":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":6},"end":{"line":84,"column":24}},{"start":{"line":84,"column":28},"end":{"line":84,"column":46}}]},"10":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":15},"end":{"line":99,"column":22}},{"start":{"line":100,"column":15},"end":{"line":100,"column":25}},{"start":{"line":101,"column":15},"end":{"line":101,"column":27}},{"start":{"line":102,"column":15},"end":{"line":102,"column":34}}]},"11":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":16}},{"start":{"line":107,"column":8},"end":{"line":107,"column":15}},{"start":{"line":108,"column":8},"end":{"line":108,"column":21}},{"start":{"line":109,"column":8},"end":{"line":109,"column":33}},{"start":{"line":110,"column":8},"end":{"line":110,"column":27}}]},"12":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":12},"end":{"line":112,"column":20}},{"start":{"line":112,"column":24},"end":{"line":112,"column":43}}]},"13":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":2},"end":{"line":121,"column":2}},{"start":{"line":121,"column":2},"end":{"line":121,"column":2}}]},"14":{"line":131,"type":"binary-expr","locations":[{"start":{"line":131,"column":18},"end":{"line":131,"column":48}},{"start":{"line":131,"column":52},"end":{"line":131,"column":54}}]},"15":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":2},"end":{"line":139,"column":2}},{"start":{"line":139,"column":2},"end":{"line":139,"column":2}}]},"16":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":6},"end":{"line":139,"column":19}},{"start":{"line":139,"column":23},"end":{"line":139,"column":35}}]},"17":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":2},"end":{"line":148,"column":2}},{"start":{"line":148,"column":2},"end":{"line":148,"column":2}}]},"18":{"line":148,"type":"binary-expr","locations":[{"start":{"line":148,"column":6},"end":{"line":148,"column":9}},{"start":{"line":149,"column":6},"end":{"line":149,"column":15}},{"start":{"line":150,"column":6},"end":{"line":150,"column":21}},{"start":{"line":151,"column":6},"end":{"line":151,"column":27}}]},"19":{"line":159,"type":"binary-expr","locations":[{"start":{"line":159,"column":18},"end":{"line":159,"column":48}},{"start":{"line":159,"column":52},"end":{"line":159,"column":54}}]},"20":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":2},"end":{"line":162,"column":2}},{"start":{"line":162,"column":2},"end":{"line":162,"column":2}}]},"21":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":2},"end":{"line":177,"column":2}},{"start":{"line":177,"column":2},"end":{"line":177,"column":2}}]},"22":{"line":178,"type":"binary-expr","locations":[{"start":{"line":178,"column":19},"end":{"line":178,"column":31}},{"start":{"line":178,"column":36},"end":{"line":178,"column":71}}]},"23":{"line":178,"type":"cond-expr","locations":[{"start":{"line":178,"column":54},"end":{"line":178,"column":56}},{"start":{"line":178,"column":59},"end":{"line":178,"column":71}}]},"24":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":4},"end":{"line":180,"column":4}},{"start":{"line":180,"column":4},"end":{"line":180,"column":4}}]},"25":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":8},"end":{"line":180,"column":33}},{"start":{"line":180,"column":37},"end":{"line":180,"column":56}}]},"26":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":9},"end":{"line":194,"column":9}},{"start":{"line":194,"column":9},"end":{"line":194,"column":9}}]},"27":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":2},"end":{"line":212,"column":2}},{"start":{"line":212,"column":2},"end":{"line":212,"column":2}}]},"28":{"line":218,"type":"cond-expr","locations":[{"start":{"line":218,"column":34},"end":{"line":218,"column":40}},{"start":{"line":218,"column":43},"end":{"line":218,"column":50}}]},"29":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":2},"end":{"line":235,"column":2}},{"start":{"line":235,"column":2},"end":{"line":235,"column":2}}]},"30":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":2},"end":{"line":247,"column":2}},{"start":{"line":247,"column":2},"end":{"line":247,"column":2}}]},"31":{"line":250,"type":"cond-expr","locations":[{"start":{"line":250,"column":36},"end":{"line":250,"column":54}},{"start":{"line":250,"column":57},"end":{"line":250,"column":74}}]},"32":{"line":258,"type":"cond-expr","locations":[{"start":{"line":258,"column":34},"end":{"line":258,"column":40}},{"start":{"line":258,"column":43},"end":{"line":258,"column":47}}]},"33":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":2},"end":{"line":279,"column":2}},{"start":{"line":279,"column":2},"end":{"line":279,"column":2}}]},"34":{"line":279,"type":"binary-expr","locations":[{"start":{"line":279,"column":6},"end":{"line":279,"column":19}},{"start":{"line":279,"column":23},"end":{"line":279,"column":41}}]},"35":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":4},"end":{"line":282,"column":4}},{"start":{"line":282,"column":4},"end":{"line":282,"column":4}}]},"36":{"line":289,"type":"cond-expr","locations":[{"start":{"line":289,"column":20},"end":{"line":289,"column":27}},{"start":{"line":289,"column":30},"end":{"line":289,"column":38}}]},"37":{"line":290,"type":"binary-expr","locations":[{"start":{"line":290,"column":16},"end":{"line":290,"column":19}},{"start":{"line":290,"column":23},"end":{"line":290,"column":27}}]},"38":{"line":291,"type":"binary-expr","locations":[{"start":{"line":291,"column":15},"end":{"line":291,"column":18}},{"start":{"line":291,"column":22},"end":{"line":291,"column":26}}]},"39":{"line":319,"type":"if","locations":[{"start":{"line":319,"column":2},"end":{"line":319,"column":2}},{"start":{"line":319,"column":2},"end":{"line":319,"column":2}}]},"40":{"line":319,"type":"binary-expr","locations":[{"start":{"line":319,"column":6},"end":{"line":319,"column":19}},{"start":{"line":319,"column":23},"end":{"line":319,"column":41}}]},"41":{"line":335,"type":"if","locations":[{"start":{"line":335,"column":2},"end":{"line":335,"column":2}},{"start":{"line":335,"column":2},"end":{"line":335,"column":2}}]},"42":{"line":335,"type":"binary-expr","locations":[{"start":{"line":335,"column":6},"end":{"line":335,"column":26}},{"start":{"line":335,"column":30},"end":{"line":335,"column":52}}]},"43":{"line":358,"type":"binary-expr","locations":[{"start":{"line":358,"column":20},"end":{"line":358,"column":35}},{"start":{"line":358,"column":39},"end":{"line":358,"column":75}}]},"44":{"line":401,"type":"binary-expr","locations":[{"start":{"line":401,"column":8},"end":{"line":401,"column":19}},{"start":{"line":402,"column":8},"end":{"line":402,"column":19}},{"start":{"line":403,"column":8},"end":{"line":406,"column":23}}]},"45":{"line":403,"type":"binary-expr","locations":[{"start":{"line":403,"column":10},"end":{"line":403,"column":30}},{"start":{"line":404,"column":10},"end":{"line":404,"column":24}},{"start":{"line":405,"column":10},"end":{"line":405,"column":23}},{"start":{"line":406,"column":10},"end":{"line":406,"column":22}}]},"46":{"line":409,"type":"binary-expr","locations":[{"start":{"line":409,"column":10},"end":{"line":409,"column":35}},{"start":{"line":410,"column":10},"end":{"line":410,"column":27}},{"start":{"line":411,"column":10},"end":{"line":411,"column":30}},{"start":{"line":412,"column":10},"end":{"line":412,"column":33}}]},"47":{"line":414,"type":"if","locations":[{"start":{"line":414,"column":2},"end":{"line":414,"column":2}},{"start":{"line":414,"column":2},"end":{"line":414,"column":2}}]},"48":{"line":414,"type":"binary-expr","locations":[{"start":{"line":414,"column":6},"end":{"line":414,"column":22}},{"start":{"line":414,"column":26},"end":{"line":414,"column":36}},{"start":{"line":414,"column":40},"end":{"line":414,"column":50}}]}},"code":["/* Copyright (c) 2010-2017 Richard Rodger and other contributors, MIT License */","'use strict'","","","var Util = require('util')","var Assert = require('assert')","","","var _ = require('lodash')","var Jsonic = require('jsonic')","","","var Common = require('./common')","","","// Find the action metadata for a given pattern, if it exists.","exports.find = function (pattern, flags) {","  var seneca = this","","  var pat = _.isString(pattern) ? Jsonic(pattern) : pattern","  pat = seneca.util.clean(pat)","  pat = pat || {}","","  var actmeta = seneca.private$.actrouter.find(pat)","","  if (!actmeta && flags && flags.catchall) {","    actmeta = seneca.private$.actrouter.find({})","  }","","  return actmeta","}","","","// True if an action matching the pattern exists.","exports.has = function (pattern) {","  return !!exports.find.call(this, pattern)","}","","","// List all actions that match the pattern.","exports.list = function (pattern) {","  var pat = _.isString(pattern) ? Jsonic(pattern) : pattern","  var found = this.private$.actrouter.list(pat)","  found = _.map(found, 'match')","  return found","}","","","exports.inward = {","  closed: inward_closed,","  resolve_msg_id: inward_resolve_msg_id,","  act_cache: inward_act_cache,","  act_default: inward_act_default,","  act_not_found: inward_act_not_found,","  validate_msg: inward_validate_msg,","  warnings: inward_warnings,","  msg_meta: inward_msg_meta,","  msg_modify: inward_msg_modify,","  act_stats: inward_act_stats,","  prepare_delegate: inward_prepare_delegate,","  announce: inward_announce","}","","","exports.outward = {","  act_cache: outward_act_cache,","  res_object: outward_res_object,","  act_stats: outward_act_stats","}","","","function inward_announce (ctxt, data) {","  if (!ctxt.actmeta) return","","  if (_.isFunction(ctxt.seneca.on_act_in)) {","    ctxt.seneca.on_act_in(ctxt.actmeta, data.msg)","  }","","  ctxt.seneca.emit('act-in', data.msg)","}","","","function inward_closed (ctxt, data) {","  if (ctxt.seneca.closed && !data.msg.closing$) {","    return {","      kind: 'error',","      code: 'closed',","      info: {","        args: Util.inspect(Common.clean(data.msg)).replace(/\\n/g, '')","      }","    }","  }","}","","","function inward_resolve_msg_id (ctxt, data) {","  var msg = data.msg","","  var id_tx = (msg.id$ ||","               msg.actid$ ||","               msg.meta$.id ||","               ctxt.seneca.idgen())","        .split('/')","","  var tx =","        id_tx[1] ||","        msg.tx$ ||","        msg.meta$.tx$ ||","        ctxt.seneca.fixedargs.tx$ ||","        ctxt.seneca.idgen()","","  var mi = (id_tx[0] || ctxt.seneca.idgen())","","  msg.meta$.mi = mi","  msg.meta$.tx = tx","  msg.meta$.id = mi + '/' + tx","}","","","function inward_act_stats (ctxt, data) {","  if (!ctxt.actmeta) {","    return","  }","","  var private$ = ctxt.seneca.private$","  ++private$.stats.act.calls","","  var pattern = ctxt.actmeta.pattern","","  var actstats = (private$.stats.actmap[pattern] =","                  private$.stats.actmap[pattern] || {})","","","  ++actstats.calls","}","","","function outward_act_stats (ctxt, data) {","  if (!ctxt.actmeta || ctxt.cached$) {","    return","  }","","  var private$ = ctxt.seneca.private$","  ++private$.stats.act.done","","  var msg = data.msg","","  if (msg &&","      msg.meta$ &&","      msg.meta$.prior &&","      msg.meta$.prior.entry","     ) {","    private$.timestats.point(ctxt.duration, ctxt.actmeta.pattern)","  }","","  var pattern = ctxt.actmeta.pattern","","  var actstats = (private$.stats.actmap[pattern] =","                  private$.stats.actmap[pattern] || {})","","","  if (data.err) {","    private$.stats.act.fails++","    ++actstats.fails","  }","  else {","    ++actstats.done","  }","}","","","function inward_act_default (ctxt, data) {","  var so = ctxt.options","  var msg = data.msg","","  // TODO: existence of pattern action needs own indicator flag","  if (!ctxt.actmeta) {","    var default$ = msg.default$ || (!so.strict.find ? {} : msg.default$)","","    if (_.isPlainObject(default$) || _.isArray(default$)) {","      return {","        kind: 'result',","        result: default$,","        log: {","          level: 'debug',","          data: {","            kind: 'act',","            case: 'DEFAULT'","          }","        }","      }","    }","","    else if (null != default$) {","      return {","        kind: 'error',","        code: 'act_default_bad',","        info: {","          args: Util.inspect(Common.clean(msg)).replace(/\\n/g, ''),","          xdefault: Util.inspect(default$)","        }","      }","    }","  }","}","","","function inward_act_not_found (ctxt, data) {","  var so = ctxt.options","  var msg = data.msg","","  if (!ctxt.actmeta) {","    return {","      kind: 'error',","      code: 'act_not_found',","      info: { args: Util.inspect(Common.clean(msg)).replace(/\\n/g, '') },","      log: {","        level: so.trace.unknown ? 'warn' : 'debug',","        data: {","          kind: 'act',","          case: 'UNKNOWN'","        }","      }","    }","  }","}","","","function inward_validate_msg (ctxt, data) {","  var so = ctxt.options","  var msg = data.msg","","  Assert(ctxt.actmeta)","","  if (!_.isFunction(ctxt.actmeta.validate)) {","    return","  }","","  var err = null","","  // FIX: this is assumed to be synchronous","  // seneca-parambulator and seneca-joi need to be updated","  ctxt.actmeta.validate(msg, function (verr) {","    err = verr","  })","","  if (err) {","    return {","      kind: 'error',","      code: so.legacy.error_codes ? 'act_invalid_args' : 'act_invalid_msg',","      info: {","        pattern: ctxt.actmeta.pattern,","        message: err.message,","        msg: Common.clean(msg),","        error: err","      },","      log: {","        level: so.trace.invalid ? 'warn' : null,","        data: {","          kind: 'act',","          case: 'INVALID'","        }","      }","","    }","  }","}","","","// Check if actid has already been seen, and if action cache is active,","// then provide cached result, if any. Return true in this case.","function inward_act_cache (ctxt, data) {","  var so = ctxt.options","  var msg = data.msg","","  var actid = msg.meta$.id","  var private$ = ctxt.seneca.private$","","  if (actid != null && so.actcache.active) {","    var actdetails = private$.actcache.get(actid)","","    if (actdetails) {","      private$.stats.act.cache++","","      var err = actdetails.result[0]","      var res = actdetails.result[1]","","      var out = {","        kind: err ? 'error' : 'result',","        result: res || null,","        error: err || null,","        log: {","          level: 'debug',","          data: {","            kind: 'act',","            case: 'CACHE'","          }","        }","      }","","      ctxt.cached$ = true","","      return out","    }","  }","}","","","// Store result in action cache","function outward_act_cache (ctxt, data) {","  var so = ctxt.options","  var msg = data.msg","  var res = data.res","  var err = data.err","","  var actid = msg.meta$.id","  var private$ = ctxt.seneca.private$","","  if (actid != null && so.actcache.active) {","    private$.actcache.set(actid, {","      result: [err, res],","      actmeta: ctxt.actmeta,","      when: Date.now()","    })","  }","}","","","function inward_warnings (ctxt, data) {","  var so = ctxt.options","  var msg = data.msg","","  Assert(ctxt.actmeta)","","  if (so.debug.deprecation && ctxt.actmeta.deprecate) {","    ctxt.seneca.log.warn({","      kind: 'act',","      case: 'DEPRECATED',","      msg: msg,","      pattern: ctxt.actmeta.pattern,","      notice: ctxt.actmeta.deprecate,","      callpoint: ctxt.callpoint","    })","  }","}","","","function inward_msg_meta (ctxt, data) {","  var msg = data.msg","","  Assert(ctxt.actmeta)","","  msg.meta$.pattern = ctxt.actmeta.pattern","  msg.meta$.action = ctxt.actmeta.id","  msg.meta$.plugin_name = ctxt.actmeta.plugin_name","  msg.meta$.plugin_tag = ctxt.actmeta.plugin_tag","","  msg.meta$.prior = msg.meta$.prior || { chain: [], entry: true, depth: 0 }","  msg.meta$.start = ctxt.start","  msg.meta$.sync = ctxt.sync","}","","","function inward_msg_modify (ctxt, data) {","  data.msg = _.extend(","    data.msg,","    ctxt.seneca.fixedargs,","    {tx$: data.msg.meta$.tx}","  )","","  // remove actid so that user manipulation of msg for subsequent use does","  // not cause inadvertent hit on existing action","  delete data.msg.id$","  delete data.msg.actid$ // legacy alias","}","","","function inward_prepare_delegate (ctxt, data) {","  data.reply = data.reply.bind(ctxt.seneca)","  data.reply.seneca = ctxt.seneca","","  var reply = data.reply","","  ctxt.seneca.good = function good (out) {","    reply(null, out)","  }","","  ctxt.seneca.bad = function bad (err) {","    reply(err)","  }","}","","","function outward_res_object (ctxt, data) {","  var so = ctxt.options","  var msg = data.msg","  var res = data.res","  var err = data.err","","  var not_object =","        err == null &&","        res != null &&","        !(_.isPlainObject(res) ||","          _.isArray(res) ||","          !!res.entity$ ||","          !!res.force$)","","  var not_legacy =","        !(msg.cmd === 'generate_id' ||","          msg.note === true ||","          msg.cmd === 'native' ||","          msg.cmd === 'quickcode')","","  if (so.strict.result && not_legacy && not_object) {","    return {","      kind: 'error',","      code: 'result_not_objarr',","      info: {","        pattern: ctxt.actmeta.pattern,","        args: Util.inspect(Common.clean(msg)).replace(/\\n/g, ''),","        result: res","      }","    }","  }","}",""],"l":{"5":1,"6":1,"9":1,"10":1,"13":1,"17":1,"18":0,"20":0,"21":0,"22":0,"24":0,"26":0,"27":0,"30":0,"35":1,"36":0,"41":1,"42":0,"43":0,"44":0,"45":0,"49":1,"65":1,"72":1,"73":0,"75":0,"76":0,"79":0,"83":1,"84":0,"85":0,"96":1,"97":0,"99":0,"105":0,"112":0,"114":0,"115":0,"116":0,"120":1,"121":0,"122":0,"125":0,"126":0,"128":0,"130":0,"134":0,"138":1,"139":0,"140":0,"143":0,"144":0,"146":0,"148":0,"153":0,"156":0,"158":0,"162":0,"163":0,"164":0,"167":0,"172":1,"173":0,"174":0,"177":0,"178":0,"180":0,"181":0,"194":0,"195":0,"208":1,"209":0,"210":0,"212":0,"213":0,"229":1,"230":0,"231":0,"233":0,"235":0,"236":0,"239":0,"243":0,"244":0,"247":0,"248":0,"272":1,"273":0,"274":0,"276":0,"277":0,"279":0,"280":0,"282":0,"283":0,"285":0,"286":0,"288":0,"301":0,"303":0,"310":1,"311":0,"312":0,"313":0,"314":0,"316":0,"317":0,"319":0,"320":0,"329":1,"330":0,"331":0,"333":0,"335":0,"336":0,"348":1,"349":0,"351":0,"353":0,"354":0,"355":0,"356":0,"358":0,"359":0,"360":0,"364":1,"365":0,"373":0,"374":0,"378":1,"379":0,"380":0,"382":0,"384":0,"385":0,"388":0,"389":0,"394":1,"395":0,"396":0,"397":0,"398":0,"400":0,"408":0,"414":0,"415":0}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/common.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/common.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":1,"14":1,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":1,"72":0,"73":0,"74":0,"75":0,"76":1,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":1,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":1,"99":0,"100":0,"101":0,"102":1,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":1,"146":0,"147":1,"148":0,"149":0,"150":0,"151":0,"152":0,"153":1,"154":0,"155":0,"156":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0,0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"fnMap":{"1":{"name":"(anonymous_1)","line":23,"loc":{"start":{"line":23,"column":18},"end":{"line":23,"column":31}}},"2":{"name":"(anonymous_2)","line":36,"loc":{"start":{"line":36,"column":19},"end":{"line":36,"column":42}}},"3":{"name":"(anonymous_3)","line":38,"loc":{"start":{"line":38,"column":9},"end":{"line":38,"column":21}}},"4":{"name":"argprops","line":49,"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":68}}},"5":{"name":"parse_pattern","line":66,"loc":{"start":{"line":66,"column":23},"end":{"line":66,"column":81}}},"6":{"name":"(anonymous_6)","line":96,"loc":{"start":{"line":96,"column":34},"end":{"line":96,"column":49}}},"7":{"name":"pattern","line":132,"loc":{"start":{"line":132,"column":32},"end":{"line":132,"column":58}}},"8":{"name":"(anonymous_8)","line":139,"loc":{"start":{"line":139,"column":17},"end":{"line":139,"column":33}}},"9":{"name":"pincanon","line":150,"loc":{"start":{"line":150,"column":19},"end":{"line":150,"column":45}}},"10":{"name":"nil","line":166,"loc":{"start":{"line":166,"column":14},"end":{"line":166,"column":30}}},"11":{"name":"(anonymous_11)","line":167,"loc":{"start":{"line":167,"column":20},"end":{"line":167,"column":35}}},"12":{"name":"clean","line":176,"loc":{"start":{"line":176,"column":0},"end":{"line":176,"column":21}}},"13":{"name":"(anonymous_13)","line":179,"loc":{"start":{"line":179,"column":23},"end":{"line":179,"column":44}}},"14":{"name":"deepextend","line":186,"loc":{"start":{"line":186,"column":0},"end":{"line":186,"column":23}}},"15":{"name":"recurse","line":204,"loc":{"start":{"line":204,"column":18},"end":{"line":204,"column":54}}},"16":{"name":"next","line":214,"loc":{"start":{"line":214,"column":2},"end":{"line":214,"column":27}}},"17":{"name":"print","line":231,"loc":{"start":{"line":231,"column":16},"end":{"line":231,"column":42}}},"18":{"name":"(anonymous_18)","line":237,"loc":{"start":{"line":237,"column":18},"end":{"line":237,"column":44}}},"19":{"name":"(anonymous_19)","line":240,"loc":{"start":{"line":240,"column":12},"end":{"line":240,"column":27}}},"20":{"name":"(anonymous_20)","line":315,"loc":{"start":{"line":315,"column":10},"end":{"line":315,"column":25}}},"21":{"name":"(anonymous_21)","line":317,"loc":{"start":{"line":317,"column":31},"end":{"line":317,"column":43}}},"22":{"name":"(anonymous_22)","line":334,"loc":{"start":{"line":334,"column":35},"end":{"line":334,"column":47}}},"23":{"name":"(anonymous_23)","line":362,"loc":{"start":{"line":362,"column":24},"end":{"line":362,"column":36}}},"24":{"name":"(anonymous_24)","line":367,"loc":{"start":{"line":367,"column":38},"end":{"line":368,"column":30}}},"25":{"name":"(anonymous_25)","line":392,"loc":{"start":{"line":392,"column":38},"end":{"line":393,"column":12}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":30}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":24}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":28}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":32}},"8":{"start":{"line":14,"column":0},"end":{"line":20,"column":1}},"9":{"start":{"line":23,"column":0},"end":{"line":30,"column":1}},"10":{"start":{"line":24,"column":2},"end":{"line":29,"column":3}},"11":{"start":{"line":25,"column":4},"end":{"line":25,"column":26}},"12":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"13":{"start":{"line":33,"column":0},"end":{"line":33,"column":73}},"14":{"start":{"line":36,"column":0},"end":{"line":41,"column":1}},"15":{"start":{"line":37,"column":2},"end":{"line":37,"column":53}},"16":{"start":{"line":38,"column":2},"end":{"line":40,"column":3}},"17":{"start":{"line":39,"column":4},"end":{"line":39,"column":80}},"18":{"start":{"line":49,"column":0},"end":{"line":62,"column":1}},"19":{"start":{"line":50,"column":2},"end":{"line":53,"column":16}},"20":{"start":{"line":56,"column":2},"end":{"line":56,"column":36}},"21":{"start":{"line":59,"column":2},"end":{"line":59,"column":28}},"22":{"start":{"line":61,"column":2},"end":{"line":61,"column":61}},"23":{"start":{"line":66,"column":0},"end":{"line":93,"column":1}},"24":{"start":{"line":67,"column":2},"end":{"line":68,"column":83}},"25":{"start":{"line":70,"column":2},"end":{"line":92,"column":3}},"26":{"start":{"line":71,"column":4},"end":{"line":82,"column":8}},"27":{"start":{"line":85,"column":4},"end":{"line":85,"column":54}},"28":{"start":{"line":86,"column":4},"end":{"line":91,"column":6}},"29":{"start":{"line":96,"column":0},"end":{"line":128,"column":1}},"30":{"start":{"line":97,"column":2},"end":{"line":97,"column":10}},"31":{"start":{"line":100,"column":2},"end":{"line":100,"column":57}},"32":{"start":{"line":100,"column":47},"end":{"line":100,"column":57}},"33":{"start":{"line":103,"column":2},"end":{"line":107,"column":3}},"34":{"start":{"line":104,"column":4},"end":{"line":104,"column":21}},"35":{"start":{"line":105,"column":4},"end":{"line":105,"column":31}},"36":{"start":{"line":106,"column":4},"end":{"line":106,"column":15}},"37":{"start":{"line":110,"column":2},"end":{"line":116,"column":3}},"38":{"start":{"line":111,"column":4},"end":{"line":111,"column":13}},"39":{"start":{"line":112,"column":4},"end":{"line":114,"column":5}},"40":{"start":{"line":113,"column":6},"end":{"line":113,"column":32}},"41":{"start":{"line":115,"column":4},"end":{"line":115,"column":15}},"42":{"start":{"line":119,"column":2},"end":{"line":125,"column":3}},"43":{"start":{"line":120,"column":4},"end":{"line":120,"column":13}},"44":{"start":{"line":121,"column":4},"end":{"line":123,"column":5}},"45":{"start":{"line":122,"column":6},"end":{"line":122,"column":68}},"46":{"start":{"line":122,"column":36},"end":{"line":122,"column":68}},"47":{"start":{"line":124,"column":4},"end":{"line":124,"column":15}},"48":{"start":{"line":127,"column":2},"end":{"line":127,"column":66}},"49":{"start":{"line":132,"column":0},"end":{"line":148,"column":1}},"50":{"start":{"line":133,"column":2},"end":{"line":135,"column":3}},"51":{"start":{"line":134,"column":4},"end":{"line":134,"column":17}},"52":{"start":{"line":137,"column":2},"end":{"line":137,"column":23}},"53":{"start":{"line":138,"column":2},"end":{"line":138,"column":13}},"54":{"start":{"line":139,"column":2},"end":{"line":143,"column":4}},"55":{"start":{"line":140,"column":4},"end":{"line":142,"column":5}},"56":{"start":{"line":141,"column":6},"end":{"line":141,"column":26}},"57":{"start":{"line":145,"column":2},"end":{"line":145,"column":11}},"58":{"start":{"line":147,"column":2},"end":{"line":147,"column":21}},"59":{"start":{"line":150,"column":0},"end":{"line":162,"column":1}},"60":{"start":{"line":151,"column":2},"end":{"line":161,"column":3}},"61":{"start":{"line":152,"column":4},"end":{"line":152,"column":33}},"62":{"start":{"line":154,"column":7},"end":{"line":161,"column":3}},"63":{"start":{"line":155,"column":4},"end":{"line":155,"column":36}},"64":{"start":{"line":156,"column":4},"end":{"line":156,"column":14}},"65":{"start":{"line":157,"column":4},"end":{"line":157,"column":24}},"66":{"start":{"line":160,"column":4},"end":{"line":160,"column":25}},"67":{"start":{"line":166,"column":0},"end":{"line":172,"column":1}},"68":{"start":{"line":167,"column":2},"end":{"line":171,"column":4}},"69":{"start":{"line":168,"column":4},"end":{"line":170,"column":5}},"70":{"start":{"line":169,"column":6},"end":{"line":169,"column":18}},"71":{"start":{"line":176,"column":0},"end":{"line":182,"column":1}},"72":{"start":{"line":177,"column":2},"end":{"line":177,"column":30}},"73":{"start":{"line":177,"column":20},"end":{"line":177,"column":30}},"74":{"start":{"line":179,"column":2},"end":{"line":181,"column":4}},"75":{"start":{"line":180,"column":4},"end":{"line":180,"column":33}},"76":{"start":{"line":183,"column":0},"end":{"line":183,"column":21}},"77":{"start":{"line":186,"column":0},"end":{"line":198,"column":1}},"78":{"start":{"line":187,"column":2},"end":{"line":187,"column":43}},"79":{"start":{"line":188,"column":2},"end":{"line":188,"column":72}},"80":{"start":{"line":188,"column":45},"end":{"line":188,"column":71}},"81":{"start":{"line":191,"column":2},"end":{"line":191,"column":29}},"82":{"start":{"line":195,"column":2},"end":{"line":195,"column":21}},"83":{"start":{"line":197,"column":2},"end":{"line":197,"column":41}},"84":{"start":{"line":199,"column":0},"end":{"line":199,"column":31}},"85":{"start":{"line":204,"column":0},"end":{"line":227,"column":1}},"86":{"start":{"line":205,"column":2},"end":{"line":205,"column":17}},"87":{"start":{"line":207,"column":2},"end":{"line":212,"column":3}},"88":{"start":{"line":208,"column":4},"end":{"line":208,"column":27}},"89":{"start":{"line":211,"column":4},"end":{"line":211,"column":24}},"90":{"start":{"line":214,"column":2},"end":{"line":225,"column":3}},"91":{"start":{"line":215,"column":4},"end":{"line":215,"column":34}},"92":{"start":{"line":215,"column":13},"end":{"line":215,"column":34}},"93":{"start":{"line":217,"column":4},"end":{"line":217,"column":27}},"94":{"start":{"line":219,"column":4},"end":{"line":224,"column":5}},"95":{"start":{"line":220,"column":6},"end":{"line":220,"column":33}},"96":{"start":{"line":223,"column":6},"end":{"line":223,"column":31}},"97":{"start":{"line":226,"column":2},"end":{"line":226,"column":17}},"98":{"start":{"line":231,"column":0},"end":{"line":234,"column":1}},"99":{"start":{"line":232,"column":2},"end":{"line":233,"column":56}},"100":{"start":{"line":232,"column":13},"end":{"line":232,"column":50}},"101":{"start":{"line":233,"column":9},"end":{"line":233,"column":55}},"102":{"start":{"line":237,"column":0},"end":{"line":358,"column":1}},"103":{"start":{"line":238,"column":2},"end":{"line":238,"column":65}},"104":{"start":{"line":240,"column":2},"end":{"line":353,"column":3}},"105":{"start":{"line":241,"column":4},"end":{"line":242,"column":35}},"106":{"start":{"line":244,"column":4},"end":{"line":352,"column":5}},"107":{"start":{"line":245,"column":6},"end":{"line":250,"column":7}},"108":{"start":{"line":246,"column":8},"end":{"line":246,"column":34}},"109":{"start":{"line":248,"column":11},"end":{"line":250,"column":7}},"110":{"start":{"line":249,"column":8},"end":{"line":249,"column":66}},"111":{"start":{"line":252,"column":6},"end":{"line":252,"column":23}},"112":{"start":{"line":254,"column":6},"end":{"line":254,"column":33}},"113":{"start":{"line":257,"column":6},"end":{"line":257,"column":71}},"114":{"start":{"line":259,"column":6},"end":{"line":268,"column":7}},"115":{"start":{"line":270,"column":6},"end":{"line":270,"column":49}},"116":{"start":{"line":272,"column":6},"end":{"line":272,"column":33}},"117":{"start":{"line":273,"column":6},"end":{"line":273,"column":43}},"118":{"start":{"line":275,"column":6},"end":{"line":280,"column":66}},"119":{"start":{"line":282,"column":6},"end":{"line":284,"column":80}},"120":{"start":{"line":286,"column":6},"end":{"line":300,"column":39}},"121":{"start":{"line":302,"column":6},"end":{"line":304,"column":7}},"122":{"start":{"line":303,"column":8},"end":{"line":303,"column":41}},"123":{"start":{"line":306,"column":6},"end":{"line":308,"column":7}},"124":{"start":{"line":307,"column":8},"end":{"line":307,"column":14}},"125":{"start":{"line":310,"column":6},"end":{"line":330,"column":7}},"126":{"start":{"line":311,"column":8},"end":{"line":311,"column":72}},"127":{"start":{"line":313,"column":8},"end":{"line":329,"column":8}},"128":{"start":{"line":316,"column":12},"end":{"line":327,"column":13}},"129":{"start":{"line":317,"column":14},"end":{"line":326,"column":16}},"130":{"start":{"line":318,"column":16},"end":{"line":320,"column":17}},"131":{"start":{"line":319,"column":18},"end":{"line":319,"column":44}},"132":{"start":{"line":322,"column":16},"end":{"line":322,"column":48}},"133":{"start":{"line":323,"column":16},"end":{"line":324,"column":54}},"134":{"start":{"line":325,"column":16},"end":{"line":325,"column":31}},"135":{"start":{"line":333,"column":6},"end":{"line":341,"column":7}},"136":{"start":{"line":334,"column":8},"end":{"line":339,"column":25}},"137":{"start":{"line":335,"column":10},"end":{"line":335,"column":42}},"138":{"start":{"line":336,"column":10},"end":{"line":337,"column":49}},"139":{"start":{"line":338,"column":10},"end":{"line":338,"column":25}},"140":{"start":{"line":340,"column":8},"end":{"line":340,"column":25}},"141":{"start":{"line":344,"column":6},"end":{"line":350,"column":80}},"142":{"start":{"line":351,"column":6},"end":{"line":351,"column":32}},"143":{"start":{"line":355,"column":2},"end":{"line":355,"column":20}},"144":{"start":{"line":357,"column":2},"end":{"line":357,"column":12}},"145":{"start":{"line":362,"column":0},"end":{"line":364,"column":1}},"146":{"start":{"line":363,"column":2},"end":{"line":363,"column":38}},"147":{"start":{"line":367,"column":0},"end":{"line":389,"column":1}},"148":{"start":{"line":369,"column":2},"end":{"line":369,"column":42}},"149":{"start":{"line":370,"column":2},"end":{"line":370,"column":32}},"150":{"start":{"line":371,"column":2},"end":{"line":371,"column":34}},"151":{"start":{"line":372,"column":2},"end":{"line":372,"column":25}},"152":{"start":{"line":374,"column":2},"end":{"line":388,"column":10}},"153":{"start":{"line":392,"column":0},"end":{"line":401,"column":1}},"154":{"start":{"line":394,"column":2},"end":{"line":394,"column":23}},"155":{"start":{"line":394,"column":12},"end":{"line":394,"column":23}},"156":{"start":{"line":396,"column":2},"end":{"line":400,"column":10}}},"branchMap":{"1":{"line":50,"type":"cond-expr","locations":[{"start":{"line":50,"column":29},"end":{"line":50,"column":34}},{"start":{"line":51,"column":6},"end":{"line":53,"column":16}}]},"2":{"line":51,"type":"cond-expr","locations":[{"start":{"line":51,"column":26},"end":{"line":51,"column":39}},{"start":{"line":52,"column":6},"end":{"line":53,"column":16}}]},"3":{"line":52,"type":"cond-expr","locations":[{"start":{"line":52,"column":26},"end":{"line":52,"column":48}},{"start":{"line":53,"column":6},"end":{"line":53,"column":16}}]},"4":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":54},"end":{"line":68,"column":63}},{"start":{"line":68,"column":67},"end":{"line":68,"column":69}}]},"5":{"line":77,"type":"cond-expr","locations":[{"start":{"line":77,"column":29},"end":{"line":77,"column":45}},{"start":{"line":77,"column":48},"end":{"line":77,"column":50}}]},"6":{"line":78,"type":"cond-expr","locations":[{"start":{"line":78,"column":25},"end":{"line":78,"column":37}},{"start":{"line":78,"column":40},"end":{"line":78,"column":42}}]},"7":{"line":79,"type":"cond-expr","locations":[{"start":{"line":79,"column":25},"end":{"line":79,"column":45}},{"start":{"line":79,"column":48},"end":{"line":79,"column":50}}]},"8":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":10},"end":{"line":81,"column":15}},{"start":{"line":81,"column":19},"end":{"line":81,"column":21}}]},"9":{"line":85,"type":"cond-expr","locations":[{"start":{"line":85,"column":31},"end":{"line":85,"column":43}},{"start":{"line":85,"column":46},"end":{"line":85,"column":54}}]},"10":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":2},"end":{"line":100,"column":2}},{"start":{"line":100,"column":2},"end":{"line":100,"column":2}}]},"11":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":6},"end":{"line":100,"column":18}},{"start":{"line":100,"column":22},"end":{"line":100,"column":45}}]},"12":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":2},"end":{"line":103,"column":2}},{"start":{"line":103,"column":2},"end":{"line":103,"column":2}}]},"13":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":2},"end":{"line":110,"column":2}},{"start":{"line":110,"column":2},"end":{"line":110,"column":2}}]},"14":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":2},"end":{"line":119,"column":2}},{"start":{"line":119,"column":2},"end":{"line":119,"column":2}}]},"15":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":6},"end":{"line":122,"column":6}},{"start":{"line":122,"column":6},"end":{"line":122,"column":6}}]},"16":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":2},"end":{"line":133,"column":2}},{"start":{"line":133,"column":2},"end":{"line":133,"column":2}}]},"17":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":11},"end":{"line":137,"column":17}},{"start":{"line":137,"column":21},"end":{"line":137,"column":23}}]},"18":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":4},"end":{"line":140,"column":4}},{"start":{"line":140,"column":4},"end":{"line":140,"column":4}}]},"19":{"line":140,"type":"binary-expr","locations":[{"start":{"line":140,"column":8},"end":{"line":140,"column":24}},{"start":{"line":140,"column":28},"end":{"line":140,"column":44}}]},"20":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":2},"end":{"line":151,"column":2}},{"start":{"line":151,"column":2},"end":{"line":151,"column":2}}]},"21":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":7},"end":{"line":154,"column":7}},{"start":{"line":154,"column":7},"end":{"line":154,"column":7}}]},"22":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":4},"end":{"line":168,"column":4}},{"start":{"line":168,"column":4},"end":{"line":168,"column":4}}]},"23":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":2},"end":{"line":177,"column":2}},{"start":{"line":177,"column":2},"end":{"line":177,"column":2}}]},"24":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":2},"end":{"line":207,"column":2}},{"start":{"line":207,"column":2},"end":{"line":207,"column":2}}]},"25":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":4},"end":{"line":215,"column":4}},{"start":{"line":215,"column":4},"end":{"line":215,"column":4}}]},"26":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":4},"end":{"line":219,"column":4}},{"start":{"line":219,"column":4},"end":{"line":219,"column":4}}]},"27":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":2},"end":{"line":232,"column":2}},{"start":{"line":232,"column":2},"end":{"line":232,"column":2}}]},"28":{"line":238,"type":"cond-expr","locations":[{"start":{"line":238,"column":39},"end":{"line":238,"column":59}},{"start":{"line":238,"column":62},"end":{"line":238,"column":64}}]},"29":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":6},"end":{"line":245,"column":6}},{"start":{"line":245,"column":6},"end":{"line":245,"column":6}}]},"30":{"line":248,"type":"if","locations":[{"start":{"line":248,"column":11},"end":{"line":248,"column":11}},{"start":{"line":248,"column":11},"end":{"line":248,"column":11}}]},"31":{"line":249,"type":"cond-expr","locations":[{"start":{"line":249,"column":42},"end":{"line":249,"column":45}},{"start":{"line":249,"column":48},"end":{"line":249,"column":65}}]},"32":{"line":257,"type":"binary-expr","locations":[{"start":{"line":257,"column":20},"end":{"line":257,"column":28}},{"start":{"line":257,"column":32},"end":{"line":257,"column":47}},{"start":{"line":257,"column":53},"end":{"line":257,"column":56}},{"start":{"line":257,"column":60},"end":{"line":257,"column":70}}]},"33":{"line":272,"type":"binary-expr","locations":[{"start":{"line":272,"column":18},"end":{"line":272,"column":27}},{"start":{"line":272,"column":31},"end":{"line":272,"column":33}}]},"34":{"line":282,"type":"cond-expr","locations":[{"start":{"line":283,"column":10},"end":{"line":284,"column":75}},{"start":{"line":284,"column":78},"end":{"line":284,"column":80}}]},"35":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":6},"end":{"line":302,"column":6}},{"start":{"line":302,"column":6},"end":{"line":302,"column":6}}]},"36":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":6},"end":{"line":306,"column":6}},{"start":{"line":306,"column":6},"end":{"line":306,"column":6}}]},"37":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":6},"end":{"line":310,"column":6}},{"start":{"line":310,"column":6},"end":{"line":310,"column":6}}]},"38":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":12},"end":{"line":316,"column":12}},{"start":{"line":316,"column":12},"end":{"line":316,"column":12}}]},"39":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":16},"end":{"line":318,"column":16}},{"start":{"line":318,"column":16},"end":{"line":318,"column":16}}]},"40":{"line":333,"type":"if","locations":[{"start":{"line":333,"column":6},"end":{"line":333,"column":6}},{"start":{"line":333,"column":6},"end":{"line":333,"column":6}}]},"41":{"line":350,"type":"cond-expr","locations":[{"start":{"line":350,"column":46},"end":{"line":350,"column":64}},{"start":{"line":350,"column":67},"end":{"line":350,"column":79}}]},"42":{"line":350,"type":"binary-expr","locations":[{"start":{"line":350,"column":9},"end":{"line":350,"column":21}},{"start":{"line":350,"column":25},"end":{"line":350,"column":43}}]},"43":{"line":369,"type":"binary-expr","locations":[{"start":{"line":369,"column":18},"end":{"line":369,"column":36}},{"start":{"line":369,"column":40},"end":{"line":369,"column":42}}]},"44":{"line":370,"type":"binary-expr","locations":[{"start":{"line":370,"column":17},"end":{"line":370,"column":26}},{"start":{"line":370,"column":30},"end":{"line":370,"column":32}}]},"45":{"line":371,"type":"binary-expr","locations":[{"start":{"line":371,"column":14},"end":{"line":371,"column":28}},{"start":{"line":371,"column":32},"end":{"line":371,"column":34}}]},"46":{"line":372,"type":"binary-expr","locations":[{"start":{"line":372,"column":12},"end":{"line":372,"column":19}},{"start":{"line":372,"column":23},"end":{"line":372,"column":25}}]},"47":{"line":394,"type":"if","locations":[{"start":{"line":394,"column":2},"end":{"line":394,"column":2}},{"start":{"line":394,"column":2},"end":{"line":394,"column":2}}]}},"code":["/* Copyright (c) 2010-2016 Richard Rodger and other contributors, MIT License */","'use strict'","","","var Util = require('util')","var _ = require('lodash')","var Eraro = require('eraro')","var Jsonic = require('jsonic')","var Nid = require('nid')","var Norma = require('norma')","var Errors = require('./errors')","","","var internals = {","  error: Eraro({","    package: 'seneca',","    msgmap: Errors,","    override: true","  })","}","","","exports.boolify = function (v) {","  try {","    return !!JSON.parse(v)","  }","  catch (e) {","    return !!v","  }","}","","","exports.tagnid = Nid({length: 3, alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'})","","","exports.delegate = function (scope, func) {","  var args = Array.prototype.slice.call(arguments, 2)","  return function () {","    return func.apply(scope, args.concat(Array.prototype.slice.call(arguments)))","  }","}","","// use args properties as fields","// defaults: map of default values","// args: args object","// fixed: map of fixed values - cannot be overriden","// omits: array of prop names to exclude","// defaults, args, and fixed are deepextended together in that order","exports.argprops = function argprops (defaults, args, fixed, omits) {","  omits = _.isArray(omits) ? omits","    : _.isObject(omits) ? _.keys(omits)","    : _.isString(omits) ? omits.split(/\\s*,\\s*/)","    : '' + omits","","  // a little pre omit to avoid entities named in omits","  var usedargs = _.omit(args, omits)","","  // don't support $ args","  usedargs = clean(usedargs)","","  return _.omit(deepextend(defaults, usedargs, fixed), omits)","}","","","// string args override object args","exports.parsePattern = function parse_pattern (instance, args, normaspec, fixed) {","  args =","    Norma('{strargs:s? objargs:o? moreobjargs:o? ' + (normaspec || '') + '}', args)","","  try {","    return _.extend(","      args,","      { pattern: _.extend(","          {},","","          // Precedence of arguments in add,act is left-to-right","          args.moreobjargs ? args.moreobjargs : {},","          args.objargs ? args.objargs : {},","          args.strargs ? Jsonic(args.strargs) : {},","","          fixed || {})","      })","  }","  catch (e) {","    var col = (e.line === 1) ? e.column - 1 : e.column","    throw internals.error('add_string_pattern_syntax', {","      argstr: args,","      syntax: e.message,","      line: e.line,","      col: col","    })","  }","}","","","var copydata = exports.copydata = function (obj) {","  var copy","","  // Handle the 3 simple types, and null or undefined","  if (obj === null || typeof obj !== 'object') return obj","","  // Handle Date","  if (_.isDate(obj)) {","    copy = new Date()","    copy.setTime(obj.getTime())","    return copy","  }","","  // Handle Array","  if (_.isArray(obj)) {","    copy = []","    for (var i = 0, len = obj.length; i < len; ++i) {","      copy[i] = copydata(obj[i])","    }","    return copy","  }","","  // Handle Object","  if (_.isObject(obj)) {","    copy = {}","    for (var attr in obj) {","      if (obj.hasOwnProperty(attr)) copy[attr] = copydata(obj[attr])","    }","    return copy","  }","","  throw new Error(\"Unable to copy obj! Its type isn't supported.\")","}","","","// Convert pattern object into a normalized jsonic String.","var pattern = exports.pattern = function pattern (patobj) {","  if (_.isString(patobj)) {","    return patobj","  }","","  patobj = patobj || {}","  var sb = []","  _.each(patobj, function (v, k) {","    if (!~k.indexOf('$') && !_.isFunction(v)) {","      sb.push(k + ':' + v)","    }","  })","","  sb.sort()","","  return sb.join(',')","}","","exports.pincanon = function pincanon (inpin) {","  if (_.isString(inpin)) {","    return pattern(Jsonic(inpin))","  }","  else if (_.isArray(inpin)) {","    var pin = _.map(inpin, pincanon)","    pin.sort()","    return pin.join(';')","  }","  else {","    return pattern(inpin)","  }","}","","","// noop for callbacks","exports.nil = function nil () {","  _.each(arguments, function (arg) {","    if (_.isFunction(arg)) {","      return arg()","    }","  })","}","","","// remove any props containing $","function clean (obj) {","  if (obj === null) return obj","","  return _.pickBy(obj, function (val, prop) {","    return !_.includes(prop, '$')","  })","}","exports.clean = clean","","","function deepextend () {","  var argsarr = new Array(arguments.length)","  for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","  // Lodash uses the reverse order to apply defaults than the deepextend API.","  argsarr = argsarr.reverse()","","  // Add an empty object to the front of the args.  Defaults will be written","  // to this empty object.","  argsarr.unshift({})","","  return _.defaultsDeep.apply(_, argsarr)","}","exports.deepextend = deepextend","","","// loop over a list of items recursively","// list can be an integer - number of times to recurse","exports.recurse = function recurse (list, work, done) {","  var ctxt = this","","  if (_.isNumber(list)) {","    list = _.range(0, list)","  }","  else {","    list = _.clone(list)","  }","","  function next (err, out) {","    if (err) return done(err, out)","","    var item = list.shift()","","    if (void 0 !== item) {","      work.call(ctxt, item, next)","    }","    else {","      done.call(ctxt, err, out)","    }","  }","  next.call(ctxt)","}","","","// Print action result","exports.print = function print (err, out) {","  if (err) { console.log('ERROR: ' + err.message) }","  else { console.log(Util.inspect(out, {depth: null})) }","}","","","exports.makedie = function (instance, ctxt) {","  ctxt = _.extend(ctxt, instance.die ? instance.die.context : {})","","  var die = function (err) {","    var die_trace = '\\n' + (new Error('die trace').stack)","        .match(/^.*?\\n.*\\n(.*)/)[1]","","    try {","      if (!err) {","        err = new Error('unknown')","      }","      else if (!Util.isError(err)) {","        err = new Error(_.isString(err) ? err : Util.inspect(err))","      }","","      err.fatal$ = true","","      var so = instance.options()","","      // undead is only for testing, do not use in production","      var undead = (so.debug && so.debug.undead) || (err && err.undead)","","      var logdesc = {","        kind: ctxt.txt,","        plugin: ctxt.plugin,","        tag: ctxt.tag,","        id: ctxt.id,","        code: err.code,","        notice: err.message,","        err: err,","        callpoint: ctxt.callpoint()","      }","","      instance.log.fatal.apply(instance, logdesc)","","      var stack = err.stack || ''","      stack = stack.replace(/^.*?\\n/, '\\n')","","      var procdesc = '\\n  pid=' + process.pid +","        ', arch=' + process.arch +","        ', platform=' + process.platform +","        ',\\n  path=' + process.execPath +","        ',\\n  argv=' + Util.inspect(process.argv).replace(/\\n/g, '') +","        ',\\n  env=' + Util.inspect(process.env).replace(/\\n/g, '')","","      var fatalmodemsg = instance.fixedargs.fatal$","        ? '\\n  ALL ERRORS FATAL: action called with argument fatal$:true ' +","        '(probably a plugin init error, or using a plugin seneca instance)' : ''","","      var stderrmsg =","      '\\n\\n' +","        'Seneca Fatal Error\\n' +","        '==================\\n\\n' +","        'Message: ' + err.message + '\\n\\n' +","        'Code: ' + err.code + '\\n\\n' +","        'Details: ' + Util.inspect(err.details, {depth: null}) + '\\n\\n' +","        'Stack: ' + stack + '\\n\\n' +","        'Instance: ' + instance.toString() + fatalmodemsg + die_trace + '\\n\\n' +","        'When: ' + new Date().toISOString() + '\\n\\n' +","        'Log: ' + Jsonic.stringify(logdesc) + '\\n\\n' +","        'Node:\\n  ' + Util.inspect(process.versions).replace(/\\s+/g, ' ') +","        ',\\n  ' + Util.inspect(process.features).replace(/\\s+/g, ' ') +","        ',\\n  ' + Util.inspect(process.moduleLoadList).replace(/\\s+/g, ' ') + '\\n\\n' +","        'Process: ' + procdesc + '\\n\\n'","","      if (so.errhandler) {","        so.errhandler.call(instance, err)","      }","","      if (instance.closed) {","        return","      }","","      if (!undead) {","        instance.act('role:seneca,info:fatal,closing$:true', {err: err})","","        instance.close(","          // terminate process, err (if defined) is from seneca.close","          function (err) {","            if (!undead) {","              process.nextTick(function () {","                if (err) {","                  exports.console_error(err)","                }","","                exports.console_error(stderrmsg)","                exports.console_error('\\n\\nSENECA TERMINATED at ' + (new Date().toISOString()) +","                  '. See above for error report.\\n\\n')","                process.exit(1)","              })","            }","          }","       )","      }","","      // make sure we close down within options.deathdelay seconds","      if (!undead) {","        var killtimer = setTimeout(function () {","          exports.console_error(stderrmsg)","          exports.console_error('\\n\\nSENECA TERMINATED (on timeout) at ' +","            (new Date().toISOString()) + '.\\n\\n')","          process.exit(2)","        }, so.deathdelay)","        killtimer.unref()","      }","    }","    catch (panic) {","      var msg =","      '\\n\\n' +","        'Seneca Panic\\n' +","        '============\\n\\n' +","        panic.stack +","        '\\n\\nOriginal Error:\\n' +","        (arguments[0] && arguments[0].stack ? arguments[0].stack : arguments[0])","      exports.console_error(msg)","    }","  }","","  die.context = ctxt","","  return die","}","","","// Intentional console errors use this function. Helps to find spurious debugging.","exports.console_error = function () {","  console.error.apply(null, arguments)","}","","","exports.make_standard_act_log_entry = function","(actmeta, msg, origmsg, ctxt) {","  var transport = origmsg.transport$ || {}","  var callmeta = msg.meta$ || {}","  var prior = callmeta.prior || {}","  actmeta = actmeta || {}","","  return _.extend({","    actid: callmeta.id,","    msg: msg,","    entry: prior.entry,","    prior: prior.chain,","    gate: origmsg.gate$,","    caller: origmsg.caller$,","    meta: actmeta,","","    // these are transitional as need to be updated","    // to standard transport metadata","    client: actmeta.client,","    listen: !!transport.origin,","    transport: transport","  }, ctxt)","}","","","exports.make_standard_err_log_entry = function","(err, ctxt) {","  if (!err) return ctxt","","  return _.extend({","    notice: err.message,","    code: err.code,","    err: err","  }, ctxt)","}",""],"l":{"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"14":1,"23":1,"24":0,"25":0,"28":0,"33":1,"36":1,"37":0,"38":0,"39":0,"49":1,"50":0,"56":0,"59":0,"61":0,"66":1,"67":0,"70":0,"71":0,"85":0,"86":0,"96":1,"97":0,"100":0,"103":0,"104":0,"105":0,"106":0,"110":0,"111":0,"112":0,"113":0,"115":0,"119":0,"120":0,"121":0,"122":0,"124":0,"127":0,"132":1,"133":0,"134":0,"137":0,"138":0,"139":0,"140":0,"141":0,"145":0,"147":0,"150":1,"151":0,"152":0,"154":0,"155":0,"156":0,"157":0,"160":0,"166":1,"167":0,"168":0,"169":0,"176":1,"177":0,"179":0,"180":0,"183":1,"186":1,"187":0,"188":0,"191":0,"195":0,"197":0,"199":1,"204":1,"205":0,"207":0,"208":0,"211":0,"214":1,"215":0,"217":0,"219":0,"220":0,"223":0,"226":0,"231":1,"232":0,"233":0,"237":1,"238":0,"240":0,"241":0,"244":0,"245":0,"246":0,"248":0,"249":0,"252":0,"254":0,"257":0,"259":0,"270":0,"272":0,"273":0,"275":0,"282":0,"286":0,"302":0,"303":0,"306":0,"307":0,"310":0,"311":0,"313":0,"316":0,"317":0,"318":0,"319":0,"322":0,"323":0,"325":0,"333":0,"334":0,"335":0,"336":0,"338":0,"340":0,"344":0,"351":0,"355":0,"357":0,"362":1,"363":0,"367":1,"369":0,"370":0,"371":0,"372":0,"374":0,"392":1,"394":0,"396":0}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/errors.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/errors.js","s":{"1":1,"2":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":86,"column":1}},"2":{"start":{"line":89,"column":0},"end":{"line":93,"column":1}}},"branchMap":{},"code":["/* Copyright (c) 2010-2015 Richard Rodger, MIT License */","'use strict'","","// Error code messages.","module.exports = {","  test_msg: 'Test message.',","","  test_prop: 'TESTING: exists: <%=exists%>, notfound:<%=notfound%>, str=<%=str%>,' +","    ' obj=<%=obj%>, arr=<%=arr%>, bool=<%=bool%>, null=<%=null$%>, delete=<%=delete$%>, undefined=<%=undefined$%>, void=<%=void$%>, NaN=<%=NaN$%>',","","  add_string_pattern_syntax: 'Could not add action due to syntax error in ' +","    'pattern string: \"<%=argstr%>\": Line:<%=line%>, Column:<%=col%>; <%=syntax%>',","","  act_string_args_syntax: 'Could execute action due to syntax error in argument' +","    ' string: \"<%=argstr%>\": Line:<%=line%>, Column:<%=col%>; <%=syntax%>',","","  add_pattern_object_expected_after_string_pattern: 'Could not add action; ' +","    'unexpected argument; a pattern object or function should follow the pattern' +","    ' string; arguments were: \"<%=args%>\".',","","  add_pattern_object_expected: 'Could not add action; unexpected argument; ' +","    'a pattern object or string should be the first argument; ' +","    'arguments were: \"<%=args%>\".',","","  add_action_function_expected: 'Could not add action: the action function ' +","    'should appear after the pattern; arguments were: \"<%=args%>\".',","","  add_action_metadata_not_an_object: 'Could not add action: the argument after ' +","    'the action function should be a metadata object: <%=actmeta%>.',","","  add_empty_pattern: 'Could not add action, as the action pattern is empty: ' +","    '\"<%=args%>\"',","","  act_if_expects_boolean: 'The method act_if expects a boolean value as its ' +","    'first argument, was: \"<%=first%>\".',","","  act_not_found: 'No matching action pattern found for <%=args%>, and no default ' +","    'result provided (using a default$ property).',","","  act_default_bad: 'No matching action pattern found for <%=args%>, and default ' +","    'result is not a plain object or an array: <%=xdefault%>.',","","  act_no_args: 'No action pattern defined in \"<%=args%>\"; the first argument ' +","    'should be a string or object pattern.',","","  act_invalid_msg: 'Action <%=pattern%> received an invalid message; <%=message%>; ' +","    'message content was: <%=msg%>.',","","  act_execute: 'Action <%=pattern%> failed: <%=message%>.',","","  act_callback: 'Action <%=pattern%> callback threw: <%=message%>.',","","  act_loop: 'Action <%=pattern%> loops back on itself. Action details: <%=actmeta%>, history: <%=history%>',","","  result_not_objarr: 'Action <%=pattern%> responded with result that was not an ' +","    'object or array: <%=result%>; Use option strict:{result:false} to allow; ' +","    'arguments were: <%=args%>',","","  no_client: 'Transport client was not created; arguments were: \"<%=args%>\".',","","  invalid_options: 'Invalid options; <%=message%>',","","  plugin_required: 'The <%=name%> plugin depends on the <%=dependency%> plugin, ' +","    'which is not loaded yet.',","","  plugin_init: 'The <%=name%> plugin failed to initialize: <%=plugin_error%>.',","","  plugin_init_timeout: 'The <%=name%> plugin failed to initialize within ' +","    '<%=timeout%> milliseconds (The init:<%=name%> action did not call the \"done\"' +","    ' callback in time).',","","  export_not_found: 'The export <%=key%> has not been defined by a plugin.',","","  store_cmd_missing: 'Entity data store implementation is missing a command; ' +","    '\"<%=cmd%>\": \"<%=store%>\".',","","  sub_function_catch: 'Pattern subscription function threw: <%=message%> on ' +","    'args: <%=args%>, result: <%=result%>.',","","  ready_failed: 'Ready function failed: <%=message%>',","","  // Legacy error message codes","","  act_invalid_args: 'Action <%=pattern%> has invalid arguments; <%=message%>; ' +","    'arguments were: <%=msg%>.'","}","","","module.exports.deprecation = {","  seneca_parent: 'Seneca.parent has been renamed to Seneca.prior. Seneca.parent will be removed in Seneca 4.x.',","","  seneca_next_act: 'Seneca.next_act will be removed in Seneca 3.x'","}",""],"l":{"5":1,"89":1}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/legacy.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/legacy.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"make_legacy_fail","line":17,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":46}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":21}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":25}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":28}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":32}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}},"5":{"start":{"line":9,"column":0},"end":{"line":15,"column":1}},"6":{"start":{"line":17,"column":0},"end":{"line":51,"column":1}},"7":{"start":{"line":18,"column":2},"end":{"line":50,"column":3}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":45}},"9":{"start":{"line":20,"column":4},"end":{"line":20,"column":74}},"10":{"start":{"line":20,"column":47},"end":{"line":20,"column":73}},"11":{"start":{"line":22,"column":4},"end":{"line":23,"column":42}},"12":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"13":{"start":{"line":26,"column":6},"end":{"line":26,"column":19}},"14":{"start":{"line":29,"column":4},"end":{"line":34,"column":5}},"15":{"start":{"line":30,"column":6},"end":{"line":30,"column":32}},"16":{"start":{"line":31,"column":6},"end":{"line":33,"column":7}},"17":{"start":{"line":32,"column":8},"end":{"line":32,"column":29}},"18":{"start":{"line":36,"column":4},"end":{"line":36,"column":50}},"19":{"start":{"line":37,"column":4},"end":{"line":37,"column":66}},"20":{"start":{"line":38,"column":4},"end":{"line":38,"column":56}},"21":{"start":{"line":40,"column":4},"end":{"line":40,"column":59}},"22":{"start":{"line":41,"column":4},"end":{"line":43,"column":5}},"23":{"start":{"line":42,"column":6},"end":{"line":42,"column":35}},"24":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"25":{"start":{"line":46,"column":6},"end":{"line":46,"column":24}},"26":{"start":{"line":49,"column":4},"end":{"line":49,"column":14}}},"branchMap":{"1":{"line":22,"type":"cond-expr","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":35}},{"start":{"line":23,"column":38},"end":{"line":23,"column":42}}]},"2":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":25,"column":4}},{"start":{"line":25,"column":4},"end":{"line":25,"column":4}}]},"3":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":4}},{"start":{"line":29,"column":4},"end":{"line":29,"column":4}}]},"4":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":6},"end":{"line":31,"column":6}},{"start":{"line":31,"column":6},"end":{"line":31,"column":6}}]},"5":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":41,"column":4}},{"start":{"line":41,"column":4},"end":{"line":41,"column":4}}]},"6":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]}},"code":["/* Copyright (c) 2010-2016 Richard Rodger and other contributors, MIT License */","'use strict'","","var _ = require('lodash')","var Eraro = require('eraro')","var Common = require('./common')","var Errors = require('./errors')","","var internals = {","  error: Eraro({","    package: 'seneca',","    msgmap: Errors,","    override: true","  })","}","","exports.fail = function make_legacy_fail (so) {","  return function () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var cb = _.isFunction(argsarr[argsarr.length - 1])","      ? argsarr[argsarr.length - 1] : null","","    if (cb) {","      argsarr.pop()","    }","","    if (_.isObject(argsarr[0])) {","      var code = argsarr[0].code","      if (_.isString(code)) {","        argsarr.unshift(code)","      }","    }","","    var err = internals.error.apply(null, argsarr)","    err.callpoint = new Error().stack.match(/^.*\\n.*\\n\\s*(.*)/)[1]","    err.seneca = { code: err.code, valmap: err.details }","","    this.log.error(Common.make_standard_err_log_entry(err))","    if (so.errhandler) {","      so.errhandler.call(this, err)","    }","","    if (cb) {","      cb.call(this, err)","    }","","    return err","  }","}",""],"l":{"4":1,"5":1,"6":1,"7":1,"9":1,"17":1,"18":0,"19":0,"20":0,"22":0,"25":0,"26":0,"29":0,"30":0,"31":0,"32":0,"36":0,"37":0,"38":0,"40":0,"41":0,"42":0,"45":0,"46":0,"49":0}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/optioner.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/optioner.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1,"87":1},"b":{"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":17},"end":{"line":14,"column":63}}},"2":{"name":"prepare","line":33,"loc":{"start":{"line":33,"column":2},"end":{"line":33,"column":51}}},"3":{"name":"parse_command_line","line":133,"loc":{"start":{"line":133,"column":2},"end":{"line":133,"column":49}}},"4":{"name":"set_options","line":156,"loc":{"start":{"line":156,"column":2},"end":{"line":156,"column":31}}},"5":{"name":"get_options","line":171,"loc":{"start":{"line":171,"column":2},"end":{"line":171,"column":26}}},"6":{"name":"load_options","line":176,"loc":{"start":{"line":176,"column":2},"end":{"line":176,"column":31}}},"7":{"name":"ERRMSGMAP","line":211,"loc":{"start":{"line":211,"column":0},"end":{"line":211,"column":22}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":22}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":25}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":30}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":61}},"8":{"start":{"line":14,"column":0},"end":{"line":208,"column":1}},"9":{"start":{"line":16,"column":2},"end":{"line":21,"column":3}},"10":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}},"11":{"start":{"line":26,"column":2},"end":{"line":26,"column":73}},"12":{"start":{"line":27,"column":2},"end":{"line":27,"column":55}},"13":{"start":{"line":30,"column":2},"end":{"line":30,"column":23}},"14":{"start":{"line":33,"column":2},"end":{"line":130,"column":3}},"15":{"start":{"line":34,"column":4},"end":{"line":34,"column":52}},"16":{"start":{"line":35,"column":4},"end":{"line":35,"column":50}},"17":{"start":{"line":41,"column":4},"end":{"line":41,"column":27}},"18":{"start":{"line":42,"column":4},"end":{"line":45,"column":5}},"19":{"start":{"line":43,"column":6},"end":{"line":43,"column":20}},"20":{"start":{"line":44,"column":6},"end":{"line":44,"column":18}},"21":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"22":{"start":{"line":48,"column":6},"end":{"line":48,"column":43}},"23":{"start":{"line":52,"column":4},"end":{"line":52,"column":46}},"24":{"start":{"line":55,"column":4},"end":{"line":59,"column":5}},"25":{"start":{"line":56,"column":6},"end":{"line":58,"column":8}},"26":{"start":{"line":61,"column":4},"end":{"line":74,"column":5}},"27":{"start":{"line":62,"column":6},"end":{"line":62,"column":71}},"28":{"start":{"line":65,"column":6},"end":{"line":73,"column":7}},"29":{"start":{"line":66,"column":8},"end":{"line":70,"column":9}},"30":{"start":{"line":72,"column":8},"end":{"line":72,"column":63}},"31":{"start":{"line":76,"column":4},"end":{"line":79,"column":5}},"32":{"start":{"line":77,"column":6},"end":{"line":78,"column":75}},"33":{"start":{"line":81,"column":4},"end":{"line":107,"column":5}},"34":{"start":{"line":82,"column":6},"end":{"line":92,"column":7}},"35":{"start":{"line":83,"column":8},"end":{"line":83,"column":44}},"36":{"start":{"line":85,"column":11},"end":{"line":92,"column":7}},"37":{"start":{"line":86,"column":8},"end":{"line":91,"column":9}},"38":{"start":{"line":87,"column":10},"end":{"line":87,"column":62}},"39":{"start":{"line":90,"column":10},"end":{"line":90,"column":54}},"40":{"start":{"line":94,"column":6},"end":{"line":97,"column":7}},"41":{"start":{"line":95,"column":8},"end":{"line":96,"column":58}},"42":{"start":{"line":99,"column":6},"end":{"line":101,"column":7}},"43":{"start":{"line":100,"column":8},"end":{"line":100,"column":49}},"44":{"start":{"line":103,"column":6},"end":{"line":106,"column":7}},"45":{"start":{"line":104,"column":8},"end":{"line":104,"column":53}},"46":{"start":{"line":105,"column":8},"end":{"line":105,"column":59}},"47":{"start":{"line":112,"column":4},"end":{"line":121,"column":5}},"48":{"start":{"line":124,"column":4},"end":{"line":124,"column":56}},"49":{"start":{"line":127,"column":4},"end":{"line":127,"column":59}},"50":{"start":{"line":129,"column":4},"end":{"line":129,"column":14}},"51":{"start":{"line":133,"column":2},"end":{"line":153,"column":3}},"52":{"start":{"line":134,"column":4},"end":{"line":134,"column":50}},"53":{"start":{"line":136,"column":4},"end":{"line":144,"column":5}},"54":{"start":{"line":137,"column":6},"end":{"line":142,"column":7}},"55":{"start":{"line":138,"column":8},"end":{"line":138,"column":40}},"56":{"start":{"line":141,"column":8},"end":{"line":141,"column":27}},"57":{"start":{"line":143,"column":6},"end":{"line":143,"column":12}},"58":{"start":{"line":146,"column":4},"end":{"line":152,"column":5}},"59":{"start":{"line":147,"column":6},"end":{"line":147,"column":25}},"60":{"start":{"line":148,"column":6},"end":{"line":148,"column":57}},"61":{"start":{"line":149,"column":6},"end":{"line":151,"column":7}},"62":{"start":{"line":150,"column":8},"end":{"line":150,"column":46}},"63":{"start":{"line":156,"column":2},"end":{"line":168,"column":3}},"64":{"start":{"line":157,"column":4},"end":{"line":157,"column":48}},"65":{"start":{"line":157,"column":23},"end":{"line":157,"column":48}},"66":{"start":{"line":160,"column":4},"end":{"line":165,"column":5}},"67":{"start":{"line":161,"column":6},"end":{"line":161,"column":52}},"68":{"start":{"line":164,"column":6},"end":{"line":164,"column":49}},"69":{"start":{"line":167,"column":4},"end":{"line":167,"column":18}},"70":{"start":{"line":171,"column":2},"end":{"line":173,"column":3}},"71":{"start":{"line":172,"column":4},"end":{"line":172,"column":18}},"72":{"start":{"line":176,"column":2},"end":{"line":201,"column":3}},"73":{"start":{"line":177,"column":4},"end":{"line":177,"column":16}},"74":{"start":{"line":180,"column":4},"end":{"line":198,"column":5}},"75":{"start":{"line":182,"column":6},"end":{"line":182,"column":49}},"76":{"start":{"line":183,"column":6},"end":{"line":183,"column":24}},"77":{"start":{"line":185,"column":9},"end":{"line":198,"column":5}},"78":{"start":{"line":186,"column":6},"end":{"line":188,"column":7}},"79":{"start":{"line":187,"column":8},"end":{"line":187,"column":26}},"80":{"start":{"line":190,"column":6},"end":{"line":197,"column":7}},"81":{"start":{"line":191,"column":8},"end":{"line":191,"column":38}},"82":{"start":{"line":194,"column":8},"end":{"line":196,"column":9}},"83":{"start":{"line":195,"column":10},"end":{"line":195,"column":79}},"84":{"start":{"line":200,"column":4},"end":{"line":200,"column":14}},"85":{"start":{"line":204,"column":2},"end":{"line":207,"column":3}},"86":{"start":{"line":211,"column":0},"end":{"line":218,"column":1}},"87":{"start":{"line":212,"column":2},"end":{"line":217,"column":3}}},"branchMap":{"1":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":19},"end":{"line":26,"column":38}},{"start":{"line":26,"column":42},"end":{"line":26,"column":59}},{"start":{"line":26,"column":63},"end":{"line":26,"column":73}}]},"2":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":42,"column":4}},{"start":{"line":42,"column":4},"end":{"line":42,"column":4}}]},"3":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"4":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":4},"end":{"line":55,"column":4}},{"start":{"line":55,"column":4},"end":{"line":55,"column":4}}]},"5":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":6},"end":{"line":65,"column":6}},{"start":{"line":65,"column":6},"end":{"line":65,"column":6}}]},"6":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"7":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"8":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":6},"end":{"line":82,"column":6}},{"start":{"line":82,"column":6},"end":{"line":82,"column":6}}]},"9":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":11},"end":{"line":85,"column":11}},{"start":{"line":85,"column":11},"end":{"line":85,"column":11}}]},"10":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":8},"end":{"line":86,"column":8}},{"start":{"line":86,"column":8},"end":{"line":86,"column":8}}]},"11":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":6},"end":{"line":94,"column":6}},{"start":{"line":94,"column":6},"end":{"line":94,"column":6}}]},"12":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":6},"end":{"line":99,"column":6}},{"start":{"line":99,"column":6},"end":{"line":99,"column":6}}]},"13":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":6},"end":{"line":103,"column":6}},{"start":{"line":103,"column":6},"end":{"line":103,"column":6}}]},"14":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":29},"end":{"line":104,"column":47}},{"start":{"line":104,"column":51},"end":{"line":104,"column":53}}]},"15":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":14},"end":{"line":124,"column":21}},{"start":{"line":124,"column":25},"end":{"line":124,"column":35}},{"start":{"line":124,"column":39},"end":{"line":124,"column":50}},{"start":{"line":124,"column":54},"end":{"line":124,"column":56}}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":134,"column":36},"end":{"line":134,"column":43}},{"start":{"line":134,"column":46},"end":{"line":134,"column":50}}]},"17":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":4},"end":{"line":136,"column":4}},{"start":{"line":136,"column":4},"end":{"line":136,"column":4}}]},"18":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"19":{"line":148,"type":"binary-expr","locations":[{"start":{"line":148,"column":32},"end":{"line":148,"column":45}},{"start":{"line":148,"column":49},"end":{"line":148,"column":56}}]},"20":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":6},"end":{"line":149,"column":6}},{"start":{"line":149,"column":6},"end":{"line":149,"column":6}}]},"21":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":4},"end":{"line":157,"column":4}},{"start":{"line":157,"column":4},"end":{"line":157,"column":4}}]},"22":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":4},"end":{"line":160,"column":4}},{"start":{"line":160,"column":4},"end":{"line":160,"column":4}}]},"23":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":4},"end":{"line":180,"column":4}},{"start":{"line":180,"column":4},"end":{"line":180,"column":4}}]},"24":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":9},"end":{"line":185,"column":9}},{"start":{"line":185,"column":9},"end":{"line":185,"column":9}}]},"25":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":6},"end":{"line":186,"column":6}},{"start":{"line":186,"column":6},"end":{"line":186,"column":6}}]},"26":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":8},"end":{"line":194,"column":8}},{"start":{"line":194,"column":8},"end":{"line":194,"column":8}}]}},"code":["/* Copyright (c) 2014-2016 Richard Rodger and other contributors, MIT License */","'use strict'","","var Fs = require('fs')","var _ = require('lodash')","var Error = require('eraro')","var Jsonic = require('jsonic')","var Minimist = require('minimist')","var Common = require('./common')","","var error = Error({ package: 'seneca', msgmap: ERRMSGMAP() })","","","module.exports = function (callmodule, defaults, orig_initial) {","","  var sourcemap = {","    argv: {},","    env: {},","    default_file: {},","    loaded: {}","  }","","  // Must be defined here as prepare depends on it.","  var options = {}","","  var basemodule = orig_initial.module || callmodule.parent || callmodule","  options = prepare(basemodule, defaults, orig_initial)","","  // Not needed after this point, and screws up debug printing.","  delete options.module","","","  function prepare (basemodule, defaults, initial) {","    var DEFAULT_OPTIONS_FILE = './seneca.options.js'","    var FATAL_OPTIONS_FILE = './options.seneca.js'","","    // Load from custom file, either by providing a string,","    // or having a property 'from' that is a string.","    // The string is interpreted as a file path.","","    var from = initial.from","    if (_.isString(initial)) {","      from = initial","      initial = {}","    }","","    if (_.isString(from)) {","      sourcemap.loaded = load_options(from)","    }","","","    var argv = Minimist(process.argv.slice(2))","","","    if (Fs.existsSync(FATAL_OPTIONS_FILE)) {","      throw error('inverted_file_name', {","        from: FATAL_OPTIONS_FILE, module: basemodule","      })","    }","","    try {","      sourcemap.default_file = basemodule.require(DEFAULT_OPTIONS_FILE)","    }","    catch (e) {","      if (e.code !== 'MODULE_NOT_FOUND') {","        var wrappedError = {","          errmsg: e.message,","          from: DEFAULT_OPTIONS_FILE,","          module: basemodule","        }","","        throw error(e, 'require_default_options', wrappedError)","      }","    }","","    if (process.env.SENECA_OPTIONS) {","      sourcemap.env = Common.deepextend({}, sourcemap.env,","                                        Jsonic(process.env.SENECA_OPTIONS))","    }","","    if (argv.seneca) {","      if (_.isObject(argv.seneca.options)) {","        sourcemap.argv = argv.seneca.options","      }","      else if (_.isString(argv.seneca.options)) {","        if (argv.seneca.options === 'print') {","          sourcemap.argv = { debug: {print: {options: true}} }","        }","        else {","          sourcemap.argv = Jsonic(argv.seneca.options)","        }","      }","","      if (_.isString(sourcemap.argv.from)) {","        sourcemap.argv = Common.deepextend(load_options(sourcemap.argv.from),","                                           sourcemap.argv)","      }","","      if (null != argv.seneca.tag) {","        sourcemap.argv.tag = '' + argv.seneca.tag","      }","","      if (argv.seneca.log) {","        sourcemap.argv.log = sourcemap.argv.log || {}","        parse_command_line(argv.seneca.log, sourcemap.argv)","      }","    }","","    // This is the list of option sources.","    // The list is in reverse precedence order,","    // i.e. command line arguments (argv) win","    var out = Common.deepextend(","      {},","      defaults,","      sourcemap.default_file,","      options,","      sourcemap.loaded,","      initial,","      sourcemap.env,","      sourcemap.argv","    )","","    // Legacy log settings.","    out.log = out.log || out.logger || out.logging || {}","","    // boolean corrections","    out.legacy.logging = Common.boolify(out.legacy.logging)","","    return out","  }","","","  function parse_command_line (spec, parsedSpec) {","    var logSpec = _.isArray(spec) ? spec[0] : spec","","    if (_.isString(logSpec)) {","      try {","        parsedSpec.log = Jsonic(logSpec)","      }","      catch (e) {","        parsedSpec.log = {}","      }","      return","    }","","    if (_.isObject(logSpec)) {","      parsedSpec.log = {}","      var logType = Object.keys(logSpec.level || logSpec)","      if (logType.length > 0) {","        parsedSpec.log = { level: logType[0] }","      }","    }","  }","","","  function set_options (input) {","    if (null == input) throw error('no_options')","","    // DEPRECATED: Remove when Seneca >= 4.x","    if (_.isString(input)) {","      options = prepare(basemodule, defaults, input)","    }","    else {","      options = Common.deepextend(options, input)","    }","","    return options","  }","","","  function get_options () {","    return options","  }","","","  function load_options (from) {","    var out = {}","","","    if (from.match(/\\.json$/i)) {","      // this is deliberate, options are ALWAYS loaded synchronously","      var text = Fs.readFileSync(from).toString()","      out = Jsonic(text)","    }","    else if (from.match(/\\.js$/i)) {","      if (!from.match(/^\\//)) {","        from = './' + from","      }","","      try {","        out = basemodule.require(from)","      }","      catch (e) {","        if (e.code !== 'MODULE_NOT_FOUND') {","          throw error(e, 'require_options', { from: from, module: basemodule })","        }","      }","    }","","    return out","  }","","","  return {","    set: set_options,","    get: get_options","  }","}","","","function ERRMSGMAP () {","  return {","    inverted_file_name: 'Please use seneca.options.js as the default options ' +","      'file name. The alternate name options.seneca.js is not supported.',","","    require_default_options: 'Call to require failed for <%=from%>: <%=errmsg%>.'","  }","}",""],"l":{"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"14":1,"16":0,"24":0,"26":0,"27":0,"30":0,"33":1,"34":0,"35":0,"41":0,"42":0,"43":0,"44":0,"47":0,"48":0,"52":0,"55":0,"56":0,"61":0,"62":0,"65":0,"66":0,"72":0,"76":0,"77":0,"81":0,"82":0,"83":0,"85":0,"86":0,"87":0,"90":0,"94":0,"95":0,"99":0,"100":0,"103":0,"104":0,"105":0,"112":0,"124":0,"127":0,"129":0,"133":1,"134":0,"136":0,"137":0,"138":0,"141":0,"143":0,"146":0,"147":0,"148":0,"149":0,"150":0,"156":1,"157":0,"160":0,"161":0,"164":0,"167":0,"171":1,"172":0,"176":1,"177":0,"180":0,"182":0,"183":0,"185":0,"186":0,"187":0,"190":0,"191":0,"194":0,"195":0,"200":0,"204":0,"211":1,"212":1}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/plugins.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/plugins.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":1,"76":0,"77":1,"78":1,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":1,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0,0],"36":[0,0,0],"37":[0,0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"(anonymous_1)","line":21,"loc":{"start":{"line":21,"column":26},"end":{"line":21,"column":51}}},"2":{"name":"api_register","line":24,"loc":{"start":{"line":24,"column":9},"end":{"line":24,"column":40}}},"3":{"name":"plugin_definition","line":71,"loc":{"start":{"line":71,"column":4},"end":{"line":71,"column":50}}},"4":{"name":"(anonymous_4)","line":140,"loc":{"start":{"line":140,"column":8},"end":{"line":140,"column":28}}},"5":{"name":"api_hasplugin","line":178,"loc":{"start":{"line":178,"column":25},"end":{"line":178,"column":66}}},"6":{"name":"find","line":184,"loc":{"start":{"line":184,"column":17},"end":{"line":184,"column":49}}},"7":{"name":"all","line":195,"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":32}}},"8":{"name":"resolve_options","line":201,"loc":{"start":{"line":201,"column":0},"end":{"line":201,"column":55}}},"9":{"name":"make_delegate","line":233,"loc":{"start":{"line":233,"column":0},"end":{"line":233,"column":42}}},"10":{"name":"plugin_delegate_log_modifier","line":253,"loc":{"start":{"line":253,"column":4},"end":{"line":253,"column":49}}},"11":{"name":"(anonymous_11)","line":262,"loc":{"start":{"line":262,"column":17},"end":{"line":262,"column":29}}},"12":{"name":"(anonymous_12)","line":287,"loc":{"start":{"line":287,"column":31},"end":{"line":287,"column":49}}},"13":{"name":"(anonymous_13)","line":292,"loc":{"start":{"line":292,"column":24},"end":{"line":292,"column":43}}},"14":{"name":"define_plugin","line":309,"loc":{"start":{"line":309,"column":0},"end":{"line":309,"column":51}}},"15":{"name":"resolve_plugin_exports","line":329,"loc":{"start":{"line":329,"column":0},"end":{"line":329,"column":58}}},"16":{"name":"(anonymous_16)","line":339,"loc":{"start":{"line":339,"column":27},"end":{"line":339,"column":43}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":26}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":25}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}},"5":{"start":{"line":9,"column":0},"end":{"line":19,"column":1}},"6":{"start":{"line":21,"column":0},"end":{"line":176,"column":1}},"7":{"start":{"line":22,"column":2},"end":{"line":22,"column":13}},"8":{"start":{"line":24,"column":2},"end":{"line":175,"column":3}},"9":{"start":{"line":25,"column":4},"end":{"line":25,"column":21}},"10":{"start":{"line":27,"column":4},"end":{"line":27,"column":37}},"11":{"start":{"line":28,"column":4},"end":{"line":28,"column":54}},"12":{"start":{"line":29,"column":4},"end":{"line":29,"column":49}},"13":{"start":{"line":31,"column":4},"end":{"line":31,"column":69}},"14":{"start":{"line":32,"column":4},"end":{"line":32,"column":30}},"15":{"start":{"line":34,"column":4},"end":{"line":34,"column":48}},"16":{"start":{"line":36,"column":4},"end":{"line":36,"column":9}},"17":{"start":{"line":38,"column":4},"end":{"line":43,"column":5}},"18":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"19":{"start":{"line":46,"column":6},"end":{"line":46,"column":44}},"20":{"start":{"line":50,"column":4},"end":{"line":62,"column":8}},"21":{"start":{"line":65,"column":4},"end":{"line":65,"column":46}},"22":{"start":{"line":66,"column":4},"end":{"line":66,"column":71}},"23":{"start":{"line":67,"column":4},"end":{"line":67,"column":64}},"24":{"start":{"line":69,"column":4},"end":{"line":69,"column":52}},"25":{"start":{"line":71,"column":4},"end":{"line":174,"column":5}},"26":{"start":{"line":72,"column":6},"end":{"line":72,"column":30}},"27":{"start":{"line":73,"column":6},"end":{"line":73,"column":68}},"28":{"start":{"line":76,"column":6},"end":{"line":76,"column":39}},"29":{"start":{"line":77,"column":6},"end":{"line":77,"column":54}},"30":{"start":{"line":78,"column":6},"end":{"line":78,"column":36}},"31":{"start":{"line":80,"column":6},"end":{"line":87,"column":8}},"32":{"start":{"line":89,"column":6},"end":{"line":95,"column":7}},"33":{"start":{"line":90,"column":8},"end":{"line":90,"column":67}},"34":{"start":{"line":94,"column":8},"end":{"line":94,"column":29}},"35":{"start":{"line":98,"column":6},"end":{"line":100,"column":7}},"36":{"start":{"line":99,"column":8},"end":{"line":99,"column":30}},"37":{"start":{"line":102,"column":6},"end":{"line":102,"column":44}},"38":{"start":{"line":103,"column":6},"end":{"line":106,"column":47}},"39":{"start":{"line":108,"column":6},"end":{"line":108,"column":74}},"40":{"start":{"line":110,"column":6},"end":{"line":110,"column":53}},"41":{"start":{"line":112,"column":6},"end":{"line":112,"column":45}},"42":{"start":{"line":114,"column":6},"end":{"line":114,"column":72}},"43":{"start":{"line":115,"column":6},"end":{"line":115,"column":49}},"44":{"start":{"line":117,"column":6},"end":{"line":117,"column":59}},"45":{"start":{"line":118,"column":6},"end":{"line":118,"column":87}},"46":{"start":{"line":119,"column":6},"end":{"line":119,"column":56}},"47":{"start":{"line":122,"column":6},"end":{"line":122,"column":74}},"48":{"start":{"line":124,"column":6},"end":{"line":130,"column":8}},"49":{"start":{"line":132,"column":6},"end":{"line":173,"column":7}},"50":{"start":{"line":141,"column":10},"end":{"line":152,"column":11}},"51":{"start":{"line":142,"column":12},"end":{"line":142,"column":47}},"52":{"start":{"line":144,"column":12},"end":{"line":144,"column":45}},"53":{"start":{"line":146,"column":12},"end":{"line":149,"column":13}},"54":{"start":{"line":147,"column":14},"end":{"line":147,"column":53}},"55":{"start":{"line":148,"column":14},"end":{"line":148,"column":41}},"56":{"start":{"line":151,"column":12},"end":{"line":151,"column":83}},"57":{"start":{"line":154,"column":10},"end":{"line":154,"column":75}},"58":{"start":{"line":156,"column":10},"end":{"line":162,"column":11}},"59":{"start":{"line":157,"column":12},"end":{"line":159,"column":32}},"60":{"start":{"line":160,"column":12},"end":{"line":160,"column":70}},"61":{"start":{"line":161,"column":12},"end":{"line":161,"column":27}},"62":{"start":{"line":164,"column":10},"end":{"line":169,"column":12}},"63":{"start":{"line":171,"column":10},"end":{"line":171,"column":23}},"64":{"start":{"line":178,"column":0},"end":{"line":182,"column":1}},"65":{"start":{"line":179,"column":2},"end":{"line":179,"column":19}},"66":{"start":{"line":180,"column":2},"end":{"line":180,"column":48}},"67":{"start":{"line":181,"column":2},"end":{"line":181,"column":45}},"68":{"start":{"line":184,"column":0},"end":{"line":193,"column":1}},"69":{"start":{"line":185,"column":2},"end":{"line":185,"column":19}},"70":{"start":{"line":186,"column":2},"end":{"line":186,"column":42}},"71":{"start":{"line":187,"column":2},"end":{"line":187,"column":29}},"72":{"start":{"line":189,"column":2},"end":{"line":189,"column":41}},"73":{"start":{"line":190,"column":2},"end":{"line":190,"column":43}},"74":{"start":{"line":192,"column":2},"end":{"line":192,"column":15}},"75":{"start":{"line":195,"column":0},"end":{"line":197,"column":1}},"76":{"start":{"line":196,"column":2},"end":{"line":196,"column":39}},"77":{"start":{"line":199,"column":0},"end":{"line":199,"column":44}},"78":{"start":{"line":201,"column":0},"end":{"line":231,"column":1}},"79":{"start":{"line":202,"column":2},"end":{"line":202,"column":27}},"80":{"start":{"line":204,"column":2},"end":{"line":210,"column":2}},"81":{"start":{"line":212,"column":2},"end":{"line":212,"column":69}},"82":{"start":{"line":213,"column":2},"end":{"line":215,"column":3}},"83":{"start":{"line":214,"column":4},"end":{"line":214,"column":52}},"84":{"start":{"line":217,"column":2},"end":{"line":223,"column":2}},"85":{"start":{"line":225,"column":2},"end":{"line":228,"column":28}},"86":{"start":{"line":230,"column":2},"end":{"line":230,"column":16}},"87":{"start":{"line":233,"column":0},"end":{"line":307,"column":1}},"88":{"start":{"line":235,"column":2},"end":{"line":244,"column":4}},"89":{"start":{"line":246,"column":2},"end":{"line":246,"column":28}},"90":{"start":{"line":248,"column":2},"end":{"line":248,"column":54}},"91":{"start":{"line":249,"column":2},"end":{"line":249,"column":52}},"92":{"start":{"line":251,"column":2},"end":{"line":256,"column":6}},"93":{"start":{"line":254,"column":6},"end":{"line":254,"column":36}},"94":{"start":{"line":255,"column":6},"end":{"line":255,"column":34}},"95":{"start":{"line":258,"column":2},"end":{"line":258,"column":82}},"96":{"start":{"line":260,"column":2},"end":{"line":260,"column":22}},"97":{"start":{"line":262,"column":2},"end":{"line":285,"column":3}},"98":{"start":{"line":263,"column":4},"end":{"line":263,"column":45}},"99":{"start":{"line":264,"column":4},"end":{"line":264,"column":74}},"100":{"start":{"line":264,"column":47},"end":{"line":264,"column":73}},"101":{"start":{"line":266,"column":4},"end":{"line":266,"column":51}},"102":{"start":{"line":268,"column":4},"end":{"line":271,"column":5}},"103":{"start":{"line":269,"column":6},"end":{"line":269,"column":18}},"104":{"start":{"line":270,"column":6},"end":{"line":270,"column":27}},"105":{"start":{"line":273,"column":4},"end":{"line":273,"column":44}},"106":{"start":{"line":274,"column":4},"end":{"line":274,"column":42}},"107":{"start":{"line":275,"column":4},"end":{"line":275,"column":45}},"108":{"start":{"line":278,"column":4},"end":{"line":278,"column":30}},"109":{"start":{"line":280,"column":4},"end":{"line":280,"column":29}},"110":{"start":{"line":282,"column":4},"end":{"line":282,"column":41}},"111":{"start":{"line":284,"column":4},"end":{"line":284,"column":19}},"112":{"start":{"line":287,"column":2},"end":{"line":298,"column":3}},"113":{"start":{"line":288,"column":4},"end":{"line":288,"column":46}},"114":{"start":{"line":289,"column":4},"end":{"line":289,"column":44}},"115":{"start":{"line":290,"column":4},"end":{"line":290,"column":50}},"116":{"start":{"line":292,"column":4},"end":{"line":297,"column":6}},"117":{"start":{"line":293,"column":6},"end":{"line":293,"column":69}},"118":{"start":{"line":294,"column":6},"end":{"line":294,"column":66}},"119":{"start":{"line":295,"column":6},"end":{"line":296,"column":57}},"120":{"start":{"line":300,"column":2},"end":{"line":300,"column":51}},"121":{"start":{"line":301,"column":2},"end":{"line":301,"column":44}},"122":{"start":{"line":302,"column":2},"end":{"line":302,"column":42}},"123":{"start":{"line":303,"column":2},"end":{"line":303,"column":41}},"124":{"start":{"line":304,"column":2},"end":{"line":304,"column":34}},"125":{"start":{"line":306,"column":2},"end":{"line":306,"column":17}},"126":{"start":{"line":309,"column":0},"end":{"line":326,"column":1}},"127":{"start":{"line":311,"column":2},"end":{"line":314,"column":3}},"128":{"start":{"line":312,"column":4},"end":{"line":312,"column":69}},"129":{"start":{"line":313,"column":4},"end":{"line":313,"column":62}},"130":{"start":{"line":316,"column":2},"end":{"line":316,"column":54}},"131":{"start":{"line":318,"column":2},"end":{"line":318,"column":47}},"132":{"start":{"line":319,"column":2},"end":{"line":319,"column":40}},"133":{"start":{"line":321,"column":2},"end":{"line":321,"column":26}},"134":{"start":{"line":322,"column":2},"end":{"line":322,"column":49}},"135":{"start":{"line":323,"column":2},"end":{"line":323,"column":35}},"136":{"start":{"line":325,"column":2},"end":{"line":325,"column":13}},"137":{"start":{"line":329,"column":0},"end":{"line":366,"column":1}},"138":{"start":{"line":330,"column":2},"end":{"line":330,"column":18}},"139":{"start":{"line":332,"column":2},"end":{"line":335,"column":3}},"140":{"start":{"line":333,"column":4},"end":{"line":333,"column":52}},"141":{"start":{"line":334,"column":4},"end":{"line":334,"column":27}},"142":{"start":{"line":337,"column":2},"end":{"line":346,"column":3}},"143":{"start":{"line":338,"column":4},"end":{"line":338,"column":51}},"144":{"start":{"line":339,"column":4},"end":{"line":345,"column":6}},"145":{"start":{"line":340,"column":6},"end":{"line":344,"column":7}},"146":{"start":{"line":341,"column":8},"end":{"line":341,"column":44}},"147":{"start":{"line":342,"column":8},"end":{"line":342,"column":47}},"148":{"start":{"line":343,"column":8},"end":{"line":343,"column":32}},"149":{"start":{"line":349,"column":2},"end":{"line":363,"column":3}},"150":{"start":{"line":350,"column":4},"end":{"line":352,"column":5}},"151":{"start":{"line":351,"column":6},"end":{"line":351,"column":72}},"152":{"start":{"line":354,"column":4},"end":{"line":362,"column":5}},"153":{"start":{"line":355,"column":6},"end":{"line":361,"column":7}},"154":{"start":{"line":357,"column":8},"end":{"line":357,"column":54}},"155":{"start":{"line":360,"column":8},"end":{"line":360,"column":51}},"156":{"start":{"line":365,"column":2},"end":{"line":365,"column":16}},"157":{"start":{"line":369,"column":0},"end":{"line":373,"column":1}}},"branchMap":{"1":{"line":28,"type":"cond-expr","locations":[{"start":{"line":28,"column":38},"end":{"line":28,"column":45}},{"start":{"line":28,"column":48},"end":{"line":28,"column":54}}]},"2":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":15},"end":{"line":29,"column":43}},{"start":{"line":29,"column":47},"end":{"line":29,"column":49}}]},"3":{"line":31,"type":"cond-expr","locations":[{"start":{"line":31,"column":47},"end":{"line":31,"column":63}},{"start":{"line":31,"column":66},"end":{"line":31,"column":68}}]},"4":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"5":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":22},"end":{"line":65,"column":31}},{"start":{"line":65,"column":35},"end":{"line":65,"column":46}}]},"6":{"line":66,"type":"cond-expr","locations":[{"start":{"line":66,"column":49},"end":{"line":66,"column":65}},{"start":{"line":66,"column":68},"end":{"line":66,"column":70}}]},"7":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":43},"end":{"line":67,"column":54}},{"start":{"line":67,"column":58},"end":{"line":67,"column":64}}]},"8":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":6},"end":{"line":98,"column":6}},{"start":{"line":98,"column":6},"end":{"line":98,"column":6}}]},"9":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":20},"end":{"line":102,"column":29}},{"start":{"line":102,"column":33},"end":{"line":102,"column":44}}]},"10":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":8},"end":{"line":104,"column":16}},{"start":{"line":105,"column":8},"end":{"line":105,"column":18}},{"start":{"line":106,"column":9},"end":{"line":106,"column":23}},{"start":{"line":106,"column":27},"end":{"line":106,"column":46}}]},"11":{"line":108,"type":"cond-expr","locations":[{"start":{"line":108,"column":52},"end":{"line":108,"column":68}},{"start":{"line":108,"column":71},"end":{"line":108,"column":73}}]},"12":{"line":110,"type":"binary-expr","locations":[{"start":{"line":110,"column":23},"end":{"line":110,"column":35}},{"start":{"line":110,"column":39},"end":{"line":110,"column":53}}]},"13":{"line":114,"type":"cond-expr","locations":[{"start":{"line":114,"column":50},"end":{"line":114,"column":66}},{"start":{"line":114,"column":69},"end":{"line":114,"column":71}}]},"14":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":10},"end":{"line":141,"column":10}},{"start":{"line":141,"column":10},"end":{"line":141,"column":10}}]},"15":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":12},"end":{"line":146,"column":12}},{"start":{"line":146,"column":12},"end":{"line":146,"column":12}}]},"16":{"line":154,"type":"cond-expr","locations":[{"start":{"line":154,"column":53},"end":{"line":154,"column":69}},{"start":{"line":154,"column":72},"end":{"line":154,"column":74}}]},"17":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":10},"end":{"line":156,"column":10}},{"start":{"line":156,"column":10},"end":{"line":156,"column":10}}]},"18":{"line":156,"type":"binary-expr","locations":[{"start":{"line":156,"column":14},"end":{"line":156,"column":28}},{"start":{"line":156,"column":32},"end":{"line":156,"column":54}}]},"19":{"line":180,"type":"cond-expr","locations":[{"start":{"line":180,"column":38},"end":{"line":180,"column":42}},{"start":{"line":180,"column":45},"end":{"line":180,"column":48}}]},"20":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":9},"end":{"line":180,"column":19}},{"start":{"line":180,"column":23},"end":{"line":180,"column":34}}]},"21":{"line":186,"type":"binary-expr","locations":[{"start":{"line":186,"column":13},"end":{"line":186,"column":28}},{"start":{"line":186,"column":32},"end":{"line":186,"column":42}}]},"22":{"line":187,"type":"binary-expr","locations":[{"start":{"line":187,"column":8},"end":{"line":187,"column":22}},{"start":{"line":187,"column":26},"end":{"line":187,"column":29}}]},"23":{"line":189,"type":"cond-expr","locations":[{"start":{"line":189,"column":26},"end":{"line":189,"column":35}},{"start":{"line":189,"column":38},"end":{"line":189,"column":40}}]},"24":{"line":212,"type":"cond-expr","locations":[{"start":{"line":212,"column":48},"end":{"line":212,"column":62}},{"start":{"line":212,"column":65},"end":{"line":212,"column":69}}]},"25":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":2},"end":{"line":213,"column":2}},{"start":{"line":213,"column":2},"end":{"line":213,"column":2}}]},"26":{"line":213,"type":"binary-expr","locations":[{"start":{"line":213,"column":6},"end":{"line":213,"column":16}},{"start":{"line":213,"column":20},"end":{"line":213,"column":53}}]},"27":{"line":228,"type":"binary-expr","locations":[{"start":{"line":228,"column":4},"end":{"line":228,"column":21}},{"start":{"line":228,"column":25},"end":{"line":228,"column":27}}]},"28":{"line":266,"type":"binary-expr","locations":[{"start":{"line":266,"column":18},"end":{"line":266,"column":45}},{"start":{"line":266,"column":49},"end":{"line":266,"column":51}}]},"29":{"line":268,"type":"if","locations":[{"start":{"line":268,"column":4},"end":{"line":268,"column":4}},{"start":{"line":268,"column":4},"end":{"line":268,"column":4}}]},"30":{"line":273,"type":"binary-expr","locations":[{"start":{"line":273,"column":26},"end":{"line":273,"column":37}},{"start":{"line":273,"column":41},"end":{"line":273,"column":44}}]},"31":{"line":274,"type":"binary-expr","locations":[{"start":{"line":274,"column":25},"end":{"line":274,"column":35}},{"start":{"line":274,"column":39},"end":{"line":274,"column":42}}]},"32":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":28},"end":{"line":288,"column":39}},{"start":{"line":288,"column":43},"end":{"line":288,"column":46}}]},"33":{"line":289,"type":"binary-expr","locations":[{"start":{"line":289,"column":27},"end":{"line":289,"column":37}},{"start":{"line":289,"column":41},"end":{"line":289,"column":44}}]},"34":{"line":290,"type":"binary-expr","locations":[{"start":{"line":290,"column":28},"end":{"line":290,"column":43}},{"start":{"line":290,"column":47},"end":{"line":290,"column":50}}]},"35":{"line":293,"type":"binary-expr","locations":[{"start":{"line":293,"column":28},"end":{"line":293,"column":39}},{"start":{"line":293,"column":43},"end":{"line":293,"column":62}},{"start":{"line":293,"column":66},"end":{"line":293,"column":69}}]},"36":{"line":294,"type":"binary-expr","locations":[{"start":{"line":294,"column":27},"end":{"line":294,"column":37}},{"start":{"line":294,"column":41},"end":{"line":294,"column":59}},{"start":{"line":294,"column":63},"end":{"line":294,"column":66}}]},"37":{"line":296,"type":"binary-expr","locations":[{"start":{"line":296,"column":8},"end":{"line":296,"column":23}},{"start":{"line":296,"column":27},"end":{"line":296,"column":50}},{"start":{"line":296,"column":54},"end":{"line":296,"column":57}}]},"38":{"line":300,"type":"binary-expr","locations":[{"start":{"line":300,"column":28},"end":{"line":300,"column":41}},{"start":{"line":300,"column":45},"end":{"line":300,"column":51}}]},"39":{"line":301,"type":"binary-expr","locations":[{"start":{"line":301,"column":26},"end":{"line":301,"column":37}},{"start":{"line":301,"column":41},"end":{"line":301,"column":44}}]},"40":{"line":302,"type":"binary-expr","locations":[{"start":{"line":302,"column":25},"end":{"line":302,"column":35}},{"start":{"line":302,"column":39},"end":{"line":302,"column":42}}]},"41":{"line":311,"type":"if","locations":[{"start":{"line":311,"column":2},"end":{"line":311,"column":2}},{"start":{"line":311,"column":2},"end":{"line":311,"column":2}}]},"42":{"line":316,"type":"binary-expr","locations":[{"start":{"line":316,"column":13},"end":{"line":316,"column":48}},{"start":{"line":316,"column":52},"end":{"line":316,"column":54}}]},"43":{"line":318,"type":"cond-expr","locations":[{"start":{"line":318,"column":28},"end":{"line":318,"column":40}},{"start":{"line":318,"column":43},"end":{"line":318,"column":47}}]},"44":{"line":319,"type":"binary-expr","locations":[{"start":{"line":319,"column":17},"end":{"line":319,"column":29}},{"start":{"line":319,"column":33},"end":{"line":319,"column":40}}]},"45":{"line":332,"type":"if","locations":[{"start":{"line":332,"column":2},"end":{"line":332,"column":2}},{"start":{"line":332,"column":2},"end":{"line":332,"column":2}}]},"46":{"line":337,"type":"if","locations":[{"start":{"line":337,"column":2},"end":{"line":337,"column":2}},{"start":{"line":337,"column":2},"end":{"line":337,"column":2}}]},"47":{"line":337,"type":"binary-expr","locations":[{"start":{"line":337,"column":6},"end":{"line":337,"column":32}},{"start":{"line":337,"column":36},"end":{"line":337,"column":60}}]},"48":{"line":338,"type":"binary-expr","locations":[{"start":{"line":338,"column":21},"end":{"line":338,"column":35}},{"start":{"line":338,"column":39},"end":{"line":338,"column":51}}]},"49":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":6},"end":{"line":340,"column":6}},{"start":{"line":340,"column":6},"end":{"line":340,"column":6}}]},"50":{"line":349,"type":"if","locations":[{"start":{"line":349,"column":2},"end":{"line":349,"column":2}},{"start":{"line":349,"column":2},"end":{"line":349,"column":2}}]},"51":{"line":350,"type":"if","locations":[{"start":{"line":350,"column":4},"end":{"line":350,"column":4}},{"start":{"line":350,"column":4},"end":{"line":350,"column":4}}]},"52":{"line":354,"type":"if","locations":[{"start":{"line":354,"column":4},"end":{"line":354,"column":4}},{"start":{"line":354,"column":4},"end":{"line":354,"column":4}}]},"53":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":6},"end":{"line":355,"column":6}},{"start":{"line":355,"column":6},"end":{"line":355,"column":6}}]},"54":{"line":355,"type":"binary-expr","locations":[{"start":{"line":355,"column":10},"end":{"line":355,"column":37}},{"start":{"line":356,"column":10},"end":{"line":356,"column":50}}]}},"code":["/* Copyright (c) 2014-2015 Richard Rodger, MIT License */","'use strict'","","var Util = require('util')","var _ = require('lodash')","var Eraro = require('eraro')","var Common = require('./common')","","var internals = {","  error: Eraro({","    package: 'seneca',","    msgmap: {","      unsupported_legacy_plugin: 'The plugin <%=name%> uses an unsupported legacy ' +","        'callback to indicate plugin definition is complete: <%=init_func_sig%> ' +","        '... }. The correct format is: function(options) { ... }. For more details, ' +","        'please see http://senecajs.org/tutorials/how-to-write-a-plugin.html'","    }","  })","}","","module.exports.register = function (so, callpoint) {","  var seq = 0","","  return function api_register (plugin) {","    var seneca = this","","    var preload = plugin.init.preload","    preload = _.isFunction(preload) ? preload : _.noop","    var meta = preload.call(seneca, plugin) || {}","","    var fullname = plugin.name + (plugin.tag ? '/' + plugin.tag : '')","    plugin.fullname = fullname","","    var delegate = make_delegate(seneca, plugin)","","    seq++","","    var plugin_define_pattern = {","      role: 'seneca',","      plugin: 'define',","      name: plugin.name,","      seq: seq","    }","","    if (plugin.tag !== null) {","      plugin_define_pattern.tag = plugin.tag","    }","","    // seneca","    delegate","      .add(plugin_define_pattern, plugin_definition)","      .act({","        role: 'seneca',","        plugin: 'define',","        name: plugin.name,","        tag: plugin.tag,","        seq: seq,","        default$: {},","        // gate$: true,","        fatal$: true,","        local$: true","      })","","    // needed for seneca.export to operate for plugins like seneca-web","    var preloadName = meta.name || plugin.name","    var preloadRef = preloadName + (plugin.tag ? '/' + plugin.tag : '')","    seneca.private$.exports[preloadName] = meta.export || plugin","","    resolve_plugin_exports(seneca, preloadRef, meta)","","    function plugin_definition (msg, plugin_done) {","      var plugin_seneca = this","      var plugin_options = resolve_options(fullname, plugin, seneca)","","      // Update plugin options data in Seneca options.","      var seneca_options = {plugin: {}}","      seneca_options.plugin[fullname] = plugin_options","      seneca.options(seneca_options)","","      plugin_seneca.log.debug({","        kind: 'plugin',","        case: 'init',","        name: plugin.name,","        tag: plugin.tag,","        options: plugin_options,","        callpoint: callpoint","      })","","      try {","        meta = define_plugin(plugin_seneca, plugin, plugin_options)","      }","      catch (e) {","        // TODO: needs wrapping","        return plugin_done(e)","      }","","      // legacy api for service function","      if (_.isFunction(meta)) {","        meta = {service: meta}","      }","","      plugin.name = meta.name || plugin.name","      plugin.tag =","        meta.tag ||","        plugin.tag ||","        (plugin.options && plugin.options.tag$)","","      plugin.fullname = plugin.name + (plugin.tag ? '/' + plugin.tag : '')","","      plugin.service = meta.service || plugin.service","","      plugin_seneca.__update_plugin__(plugin)","","      var pluginref = plugin.name + (plugin.tag ? '/' + plugin.tag : '')","      seneca.private$.plugins[pluginref] = plugin","","      seneca.private$.plugin_order.byname.push(plugin.name)","      seneca.private$.plugin_order.byname = _.uniq(seneca.private$.plugin_order.byname)","      seneca.private$.plugin_order.byref.push(pluginref)","","","      var exports = resolve_plugin_exports(plugin_seneca, pluginref, meta)","","      plugin_seneca.log.debug({","        kind: 'plugin',","        case: 'install',","        name: plugin.name,","        tag: plugin.tag,","        exports: exports","      })","","      plugin_seneca.act(","        {","          init: plugin.name,","          tag: plugin.tag,","          default$: {},","          fatal$: true,","          local$: true","        },","        function (err, out) {","          if (err) {","            var plugin_err_code = 'plugin_init'","","            plugin.plugin_error = err.message","","            if (err.code === 'action-timeout') {","              plugin_err_code = 'plugin_init_timeout'","              plugin.timeout = so.timeout","            }","","            return plugin_seneca.die(internals.error(err, plugin_err_code, plugin))","          }","","          var fullname = plugin.name + (plugin.tag ? '$' + plugin.tag : '')","","          if (so.debug.print && so.debug.print.options) {","            console.log('\\nSeneca Options (' + seneca.id + '): plugin: ' +","                        fullname + '\\n' +","                        '===\\n')","            console.log(Util.inspect(plugin_options, { depth: null }))","            console.log('')","          }","","          plugin_seneca.log.debug({","            kind: 'plugin',","            case: 'ready',","            name: plugin.name,","            tag: plugin.tag","          })","","          plugin_done()","        }","      )","    }","  }","}","","internals.isRegistered = function api_hasplugin (plugindesc, tag) {","  var seneca = this","  tag = (tag === '' || tag === '-') ? null : tag","  return !!seneca.findplugin(plugindesc, tag)","}","","internals.find = function find (plugindesc, tag) {","  var seneca = this","  var name = plugindesc.name || plugindesc","  tag = plugindesc.tag || tag","","  var key = name + (tag ? '/' + tag : '')","  var plugin = seneca.private$.plugins[key]","","  return plugin","}","","internals.all = function all () {","  return _.clone(this.private$.plugins)","}","","module.exports.make_delegate = make_delegate","","function resolve_options (fullname, plugindef, seneca) {","  var so = seneca.options()","","  var fullname_options = _.extend(","    {},","    so[fullname],","    so.plugin[fullname],","    so[fullname + '$' + plugindef.tag],","    so.plugin[fullname + '$' + plugindef.tag]"," )","","  var shortname = fullname !== plugindef.name ? plugindef.name : null","  if (!shortname && fullname.indexOf('seneca-') === 0) {","    shortname = fullname.substring('seneca-'.length)","  }","","  var shortname_options = _.extend(","    {},","    so[shortname],","    so.plugin[shortname],","    so[shortname + '$' + plugindef.tag],","    so.plugin[shortname + '$' + plugindef.tag]"," )","","  var outopts = _.extend({},","    shortname_options,","    fullname_options,","    plugindef.options || {})","","  return outopts","}","","function make_delegate (instance, plugin) {","  // Adjust Seneca API to be plugin specific.","  var delegate = instance.delegate({","    plugin$: {","      name: plugin.name,","      tag: plugin.tag","    },","","    // Act calls inside the plugin definition function are not gated.","    // ungate$: true,","    fatal$: true","  })","","  delegate.plugin_foo = true","","  delegate.private$ = Object.create(instance.private$)","  delegate.private$.ge = delegate.private$.ge.gate()","","  delegate.log = instance.make_log(","    delegate,","    function plugin_delegate_log_modifier (data) {","      data.plugin_name = plugin.name","      data.plugin_tag = plugin.tag","    })","","  delegate.die = Common.makedie(delegate, { type: 'plugin', plugin: plugin.name })","","  var actmetalist = []","","  delegate.add = function () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var actmeta = argsarr[argsarr.length - 1] || {}","","    if (_.isFunction(actmeta)) {","      actmeta = {}","      argsarr.push(actmeta)","    }","","    actmeta.plugin_name = plugin.name || '-'","    actmeta.plugin_tag = plugin.tag || '-'","    actmeta.plugin_fullname = plugin.fullname","","    // TODO: is this necessary?","    actmeta.log = delegate.log","","    actmetalist.push(actmeta)","","    instance.add.apply(delegate, argsarr)","","    return delegate","  }","","  delegate.__update_plugin__ = function (plugin) {","    delegate.context.name = plugin.name || '-'","    delegate.context.tag = plugin.tag || '-'","    delegate.context.full = plugin.fullname || '-'","","    _.each(actmetalist, function (actmeta) {","      actmeta.plugin_name = plugin.name || actmeta.plugin_name || '-'","      actmeta.plugin_tag = plugin.tag || actmeta.plugin_tag || '-'","      actmeta.plugin_fullname =","        plugin.fullname || actmeta.plugin_fullname || '-'","    })","  }","","  delegate.context.module = plugin.parent || module","  delegate.context.name = plugin.name || '-'","  delegate.context.tag = plugin.tag || '-'","  delegate.context.full = plugin.fullname","  delegate.context.isplugin = true","","  return delegate","}","","function define_plugin (delegate, plugin, options) {","  // legacy plugins","  if (plugin.init.length > 1) {","    plugin.init_func_sig = plugin.init.toString().match(/^(.*)\\n/)[1]","    throw internals.error('unsupported_legacy_plugin', plugin)","  }","","  var meta = plugin.init.call(delegate, options) || {}","","  meta = _.isString(meta) ? {name: meta} : meta","  meta.options = meta.options || options","","  var updated_options = {}","  updated_options[plugin.fullname] = meta.options","  delegate.options(updated_options)","","  return meta","}","","","function resolve_plugin_exports (seneca, pluginref, meta) {","  var exports = []","","  if (meta.export !== void 0) {","    seneca.private$.exports[pluginref] = meta.export","    exports.push(pluginref)","  }","","  if (_.isObject(meta.exportmap) || _.isObject(meta.exports)) {","    meta.exportmap = meta.exportmap || meta.exports","    _.each(meta.exportmap, function (v, k) {","      if (v !== void 0) {","        var exportname = pluginref + '/' + k","        seneca.private$.exports[exportname] = v","        exports.push(exportname)","      }","    })","  }","","  // Specific Seneca extension points","  if (_.isObject(meta.extend)) {","    if (_.isFunction(meta.extend.action_modifier)) {","      seneca.private$.action_modifiers.push(meta.extend.action_modifier)","    }","","    if (_.isFunction(meta.extend.logger)) {","      if (!meta.extend.logger.replace &&","          _.isFunction(seneca.private$.logger.add)) {","        seneca.private$.logger.add(meta.extend.logger)","      }","      else {","        seneca.private$.logger = meta.extend.logger","      }","    }","  }","","  return exports","}","","","module.exports.api_decorations = {","  hasplugin: internals.isRegistered,","  findplugin: internals.find,","  plugins: internals.all","}",""],"l":{"4":1,"5":1,"6":1,"7":1,"9":1,"21":1,"22":0,"24":0,"25":0,"27":0,"28":0,"29":0,"31":0,"32":0,"34":0,"36":0,"38":0,"45":0,"46":0,"50":0,"65":0,"66":0,"67":0,"69":0,"71":1,"72":0,"73":0,"76":0,"77":0,"78":0,"80":0,"89":0,"90":0,"94":0,"98":0,"99":0,"102":0,"103":0,"108":0,"110":0,"112":0,"114":0,"115":0,"117":0,"118":0,"119":0,"122":0,"124":0,"132":0,"141":0,"142":0,"144":0,"146":0,"147":0,"148":0,"151":0,"154":0,"156":0,"157":0,"160":0,"161":0,"164":0,"171":0,"178":1,"179":0,"180":0,"181":0,"184":1,"185":0,"186":0,"187":0,"189":0,"190":0,"192":0,"195":1,"196":0,"199":1,"201":1,"202":0,"204":0,"212":0,"213":0,"214":0,"217":0,"225":0,"230":0,"233":1,"235":0,"246":0,"248":0,"249":0,"251":0,"254":0,"255":0,"258":0,"260":0,"262":0,"263":0,"264":0,"266":0,"268":0,"269":0,"270":0,"273":0,"274":0,"275":0,"278":0,"280":0,"282":0,"284":0,"287":0,"288":0,"289":0,"290":0,"292":0,"293":0,"294":0,"295":0,"300":0,"301":0,"302":0,"303":0,"304":0,"306":0,"309":1,"311":0,"312":0,"313":0,"316":0,"318":0,"319":0,"321":0,"322":0,"323":0,"325":0,"329":1,"330":0,"332":0,"333":0,"334":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"349":0,"350":0,"351":0,"354":0,"355":0,"357":0,"360":0,"365":0,"369":1}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/print.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/print.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0,0,0,0,0,0,0,0,0,0],"13":[0,0],"14":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":16,"loc":{"start":{"line":16,"column":17},"end":{"line":16,"column":35}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":19},"end":{"line":28,"column":31}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":21},"end":{"line":34,"column":33}}},"4":{"name":"print_options","line":47,"loc":{"start":{"line":47,"column":31},"end":{"line":47,"column":64}}},"5":{"name":"print_tree","line":56,"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":38}}},"6":{"name":"insert","line":62,"loc":{"start":{"line":62,"column":2},"end":{"line":62,"column":35}}},"7":{"name":"(anonymous_7)","line":76,"loc":{"start":{"line":76,"column":24},"end":{"line":76,"column":39}}},"8":{"name":"(anonymous_8)","line":79,"loc":{"start":{"line":79,"column":16},"end":{"line":79,"column":32}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"2":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}},"3":{"start":{"line":11,"column":0},"end":{"line":11,"column":28}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":34}},"5":{"start":{"line":16,"column":0},"end":{"line":44,"column":1}},"6":{"start":{"line":17,"column":2},"end":{"line":17,"column":44}},"7":{"start":{"line":18,"column":2},"end":{"line":20,"column":3}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":10}},"9":{"start":{"line":21,"column":2},"end":{"line":21,"column":27}},"10":{"start":{"line":22,"column":2},"end":{"line":43,"column":3}},"11":{"start":{"line":23,"column":4},"end":{"line":38,"column":5}},"12":{"start":{"line":26,"column":6},"end":{"line":26,"column":70}},"13":{"start":{"line":27,"column":6},"end":{"line":37,"column":7}},"14":{"start":{"line":28,"column":8},"end":{"line":30,"column":32}},"15":{"start":{"line":29,"column":10},"end":{"line":29,"column":37}},"16":{"start":{"line":34,"column":8},"end":{"line":36,"column":10}},"17":{"start":{"line":35,"column":10},"end":{"line":35,"column":35}},"18":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"19":{"start":{"line":41,"column":6},"end":{"line":41,"column":61}},"20":{"start":{"line":47,"column":0},"end":{"line":53,"column":1}},"21":{"start":{"line":48,"column":2},"end":{"line":52,"column":3}},"22":{"start":{"line":49,"column":4},"end":{"line":49,"column":81}},"23":{"start":{"line":50,"column":4},"end":{"line":50,"column":55}},"24":{"start":{"line":51,"column":4},"end":{"line":51,"column":19}},"25":{"start":{"line":56,"column":0},"end":{"line":118,"column":1}},"26":{"start":{"line":57,"column":2},"end":{"line":60,"column":3}},"27":{"start":{"line":62,"column":2},"end":{"line":74,"column":3}},"28":{"start":{"line":63,"column":4},"end":{"line":63,"column":34}},"29":{"start":{"line":63,"column":28},"end":{"line":63,"column":34}},"30":{"start":{"line":65,"column":4},"end":{"line":69,"column":5}},"31":{"start":{"line":66,"column":6},"end":{"line":68,"column":7}},"32":{"start":{"line":67,"column":8},"end":{"line":67,"column":55}},"33":{"start":{"line":71,"column":4},"end":{"line":71,"column":41}},"34":{"start":{"line":72,"column":4},"end":{"line":72,"column":26}},"35":{"start":{"line":73,"column":4},"end":{"line":73,"column":30}},"36":{"start":{"line":76,"column":2},"end":{"line":115,"column":4}},"37":{"start":{"line":77,"column":4},"end":{"line":77,"column":18}},"38":{"start":{"line":78,"column":4},"end":{"line":78,"column":22}},"39":{"start":{"line":79,"column":4},"end":{"line":99,"column":6}},"40":{"start":{"line":80,"column":6},"end":{"line":98,"column":7}},"41":{"start":{"line":94,"column":8},"end":{"line":94,"column":21}},"42":{"start":{"line":97,"column":8},"end":{"line":97,"column":31}},"43":{"start":{"line":101,"column":4},"end":{"line":114,"column":5}},"44":{"start":{"line":102,"column":6},"end":{"line":102,"column":33}},"45":{"start":{"line":104,"column":6},"end":{"line":104,"column":23}},"46":{"start":{"line":105,"column":6},"end":{"line":109,"column":7}},"47":{"start":{"line":106,"column":8},"end":{"line":107,"column":49}},"48":{"start":{"line":108,"column":8},"end":{"line":108,"column":29}},"49":{"start":{"line":111,"column":6},"end":{"line":111,"column":39}},"50":{"start":{"line":113,"column":6},"end":{"line":113,"column":25}},"51":{"start":{"line":117,"column":2},"end":{"line":117,"column":26}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":18,"column":2}},{"start":{"line":18,"column":2},"end":{"line":18,"column":2}}]},"2":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":6},"end":{"line":18,"column":11}},{"start":{"line":18,"column":15},"end":{"line":18,"column":27}}]},"3":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":22,"column":2}},{"start":{"line":22,"column":2},"end":{"line":22,"column":2}}]},"4":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"5":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":26},"end":{"line":26,"column":48}},{"start":{"line":26,"column":52},"end":{"line":26,"column":70}}]},"6":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":6},"end":{"line":27,"column":6}},{"start":{"line":27,"column":6},"end":{"line":27,"column":6}}]},"7":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]},"8":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":2}},{"start":{"line":48,"column":2},"end":{"line":48,"column":2}}]},"9":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":63,"column":4}},{"start":{"line":63,"column":4},"end":{"line":63,"column":4}}]},"10":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":6},"end":{"line":66,"column":6}},{"start":{"line":66,"column":6},"end":{"line":66,"column":6}}]},"11":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":6}},{"start":{"line":80,"column":6},"end":{"line":80,"column":6}}]},"12":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":10},"end":{"line":80,"column":33}},{"start":{"line":81,"column":9},"end":{"line":81,"column":21}},{"start":{"line":82,"column":9},"end":{"line":82,"column":23}},{"start":{"line":83,"column":8},"end":{"line":83,"column":21}},{"start":{"line":84,"column":8},"end":{"line":84,"column":20}},{"start":{"line":85,"column":8},"end":{"line":85,"column":22}},{"start":{"line":86,"column":8},"end":{"line":86,"column":19}},{"start":{"line":87,"column":8},"end":{"line":87,"column":25}},{"start":{"line":88,"column":8},"end":{"line":88,"column":23}},{"start":{"line":89,"column":8},"end":{"line":89,"column":25}},{"start":{"line":90,"column":8},"end":{"line":90,"column":22}},{"start":{"line":92,"column":8},"end":{"line":92,"column":20}}]},"13":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"14":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":30},"end":{"line":106,"column":50}},{"start":{"line":106,"column":54},"end":{"line":106,"column":57}}]}},"code":["/* Copyright (c) 2015 Richard Rodger, MIT License */","'use strict'","","","// Node API modules","var Util = require('util')","","","// External modules.","var _ = require('lodash')","var Archy = require('archy')","var Minimist = require('minimist')","","","/** Handle command line specific functionality */","module.exports = function (seneca) {","  var argv = Minimist(process.argv.slice(2))","  if (!argv || !argv.seneca) {","    return","  }","  var cmdspec = argv.seneca","  if (cmdspec.print) {","    if (cmdspec.print.tree) {","      // Hack! Complex init means non-deterministic or multiple ready calls,","      // so just delay tree print by some number of seconds to capture full tree.","      var delay_seconds = cmdspec.print.tree.all || cmdspec.print.tree","      if (_.isNumber(delay_seconds)) {","        setTimeout(function () {","          print_tree(seneca, cmdspec)","        }, 1000 * delay_seconds)","      }","      else {","        // Print after first ready","        seneca.ready(function () {","          print_tree(this, cmdspec)","        })","      }","    }","","    if (cmdspec.print.options) {","      seneca.options({ debug: { print: { options: true } } })","    }","  }","}","","","module.exports.print_options = function print_options (options) {","  if (options.debug.print.options) {","    console.log('\\nSeneca Options (' + root.id + '): before plugins\\n' + '===\\n')","    console.log(Util.inspect(options, { depth: null }))","    console.log('')","  }","}","","","function print_tree (seneca, cmdspec) {","  var tree = {","    label: 'Seneca action patterns for instance: ' + seneca.id,","    nodes: []","  }","","  function insert (nodes, current) {","    if (nodes.length === 0) return","","    for (var i = 0; i < current.nodes.length; i++) {","      if (nodes[0] === current.nodes[i].label) {","        return insert(nodes.slice(1), current.nodes[i])","      }","    }","","    var nn = {label: nodes[0], nodes: []}","    current.nodes.push(nn)","    insert(nodes.slice(1), nn)","  }","","  _.each(seneca.list(), function (pat) {","    var nodes = []","    var ignore = false","    _.each(pat, function (v, k) {","      if (!cmdspec.print.tree.all &&","        (k === 'role' &&","        (v === 'seneca' ||","        v === 'basic' ||","        v === 'util' ||","        v === 'entity' ||","        v === 'web' ||","        v === 'transport' ||","        v === 'options' ||","        v === 'mem-store' ||","        v === 'seneca'","       )) ||","        k === 'init'","     ) {","        ignore = true","      }","      else {","        nodes.push(k + ':' + v)","      }","    })","","    if (!ignore) {","      var meta = seneca.find(pat)","","      var metadesc = []","      while (meta) {","        metadesc.push('# ' + (meta.plugin_fullname || '-') +","          ', ' + meta.id + ', ' + meta.func.name)","        meta = meta.priormeta","      }","","      nodes.push((metadesc.join('\\n')))","","      insert(nodes, tree)","    }","  })","","  console.log(Archy(tree))","}",""],"l":{"6":1,"10":1,"11":1,"12":1,"16":1,"17":0,"18":0,"19":0,"21":0,"22":0,"23":0,"26":0,"27":0,"28":0,"29":0,"34":0,"35":0,"40":0,"41":0,"47":1,"48":0,"49":0,"50":0,"51":0,"56":1,"57":0,"62":1,"63":0,"65":0,"66":0,"67":0,"71":0,"72":0,"73":0,"76":0,"77":0,"78":0,"79":0,"80":0,"94":0,"97":0,"101":0,"102":0,"104":0,"105":0,"106":0,"108":0,"111":0,"113":0,"117":0}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/transport.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/transport.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":1,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":20,"loc":{"start":{"line":20,"column":17},"end":{"line":20,"column":38}}},"2":{"name":"api_listen","line":21,"loc":{"start":{"line":21,"column":9},"end":{"line":21,"column":32}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":6},"end":{"line":43,"column":29}}},"4":{"name":"(anonymous_4)","line":59,"loc":{"start":{"line":59,"column":17},"end":{"line":59,"column":38}}},"5":{"name":"api_client","line":60,"loc":{"start":{"line":60,"column":9},"end":{"line":60,"column":32}}},"6":{"name":"(anonymous_6)","line":86,"loc":{"start":{"line":86,"column":23},"end":{"line":86,"column":38}}},"7":{"name":"transport_client","line":95,"loc":{"start":{"line":95,"column":27},"end":{"line":95,"column":65}}},"8":{"name":"(anonymous_8)","line":110,"loc":{"start":{"line":110,"column":17},"end":{"line":110,"column":32}}},"9":{"name":"(anonymous_9)","line":123,"loc":{"start":{"line":123,"column":6},"end":{"line":123,"column":33}}},"10":{"name":"(anonymous_10)","line":141,"loc":{"start":{"line":141,"column":25},"end":{"line":141,"column":41}}},"11":{"name":"(anonymous_11)","line":169,"loc":{"start":{"line":169,"column":26},"end":{"line":169,"column":53}}},"12":{"name":"(anonymous_12)","line":172,"loc":{"start":{"line":172,"column":18},"end":{"line":172,"column":40}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":25}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":28}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":32}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":34}},"7":{"start":{"line":11,"column":0},"end":{"line":17,"column":1}},"8":{"start":{"line":20,"column":0},"end":{"line":56,"column":1}},"9":{"start":{"line":21,"column":2},"end":{"line":55,"column":3}},"10":{"start":{"line":22,"column":4},"end":{"line":22,"column":45}},"11":{"start":{"line":23,"column":4},"end":{"line":23,"column":74}},"12":{"start":{"line":23,"column":47},"end":{"line":23,"column":73}},"13":{"start":{"line":25,"column":4},"end":{"line":25,"column":19}},"14":{"start":{"line":26,"column":4},"end":{"line":26,"column":33}},"15":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"16":{"start":{"line":28,"column":6},"end":{"line":28,"column":19}},"17":{"start":{"line":31,"column":4},"end":{"line":35,"column":6}},"18":{"start":{"line":37,"column":4},"end":{"line":37,"column":45}},"19":{"start":{"line":38,"column":4},"end":{"line":38,"column":79}},"20":{"start":{"line":40,"column":4},"end":{"line":52,"column":8}},"21":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"22":{"start":{"line":45,"column":10},"end":{"line":45,"column":75}},"23":{"start":{"line":48,"column":8},"end":{"line":51,"column":9}},"24":{"start":{"line":49,"column":10},"end":{"line":49,"column":31}},"25":{"start":{"line":50,"column":10},"end":{"line":50,"column":26}},"26":{"start":{"line":54,"column":4},"end":{"line":54,"column":15}},"27":{"start":{"line":59,"column":0},"end":{"line":138,"column":1}},"28":{"start":{"line":60,"column":2},"end":{"line":137,"column":3}},"29":{"start":{"line":61,"column":4},"end":{"line":61,"column":45}},"30":{"start":{"line":62,"column":4},"end":{"line":62,"column":74}},"31":{"start":{"line":62,"column":47},"end":{"line":62,"column":73}},"32":{"start":{"line":64,"column":4},"end":{"line":64,"column":19}},"33":{"start":{"line":66,"column":4},"end":{"line":70,"column":6}},"34":{"start":{"line":72,"column":4},"end":{"line":72,"column":49}},"35":{"start":{"line":74,"column":4},"end":{"line":74,"column":52}},"36":{"start":{"line":77,"column":4},"end":{"line":77,"column":70}},"37":{"start":{"line":79,"column":4},"end":{"line":79,"column":58}},"38":{"start":{"line":81,"column":4},"end":{"line":81,"column":55}},"39":{"start":{"line":83,"column":4},"end":{"line":84,"column":67}},"40":{"start":{"line":86,"column":4},"end":{"line":88,"column":6}},"41":{"start":{"line":87,"column":6},"end":{"line":87,"column":48}},"42":{"start":{"line":90,"column":4},"end":{"line":90,"column":74}},"43":{"start":{"line":92,"column":4},"end":{"line":92,"column":18}},"44":{"start":{"line":95,"column":4},"end":{"line":102,"column":5}},"45":{"start":{"line":96,"column":6},"end":{"line":101,"column":7}},"46":{"start":{"line":97,"column":8},"end":{"line":97,"column":29}},"47":{"start":{"line":100,"column":8},"end":{"line":100,"column":45}},"48":{"start":{"line":104,"column":4},"end":{"line":104,"column":35}},"49":{"start":{"line":106,"column":4},"end":{"line":108,"column":5}},"50":{"start":{"line":107,"column":6},"end":{"line":107,"column":57}},"51":{"start":{"line":110,"column":4},"end":{"line":116,"column":6}},"52":{"start":{"line":111,"column":6},"end":{"line":111,"column":24}},"53":{"start":{"line":112,"column":6},"end":{"line":112,"column":24}},"54":{"start":{"line":113,"column":6},"end":{"line":113,"column":38}},"55":{"start":{"line":115,"column":6},"end":{"line":115,"column":35}},"56":{"start":{"line":120,"column":4},"end":{"line":134,"column":8}},"57":{"start":{"line":124,"column":8},"end":{"line":126,"column":9}},"58":{"start":{"line":125,"column":10},"end":{"line":125,"column":73}},"59":{"start":{"line":128,"column":8},"end":{"line":131,"column":9}},"60":{"start":{"line":129,"column":10},"end":{"line":130,"column":62}},"61":{"start":{"line":133,"column":8},"end":{"line":133,"column":31}},"62":{"start":{"line":136,"column":4},"end":{"line":136,"column":15}},"63":{"start":{"line":141,"column":0},"end":{"line":167,"column":1}},"64":{"start":{"line":142,"column":2},"end":{"line":142,"column":14}},"65":{"start":{"line":144,"column":2},"end":{"line":144,"column":30}},"66":{"start":{"line":146,"column":2},"end":{"line":146,"column":28}},"67":{"start":{"line":148,"column":2},"end":{"line":164,"column":3}},"68":{"start":{"line":149,"column":4},"end":{"line":154,"column":5}},"69":{"start":{"line":150,"column":6},"end":{"line":150,"column":30}},"70":{"start":{"line":153,"column":6},"end":{"line":153,"column":40}},"71":{"start":{"line":156,"column":7},"end":{"line":164,"column":3}},"72":{"start":{"line":157,"column":4},"end":{"line":157,"column":38}},"73":{"start":{"line":158,"column":4},"end":{"line":158,"column":24}},"74":{"start":{"line":160,"column":7},"end":{"line":164,"column":3}},"75":{"start":{"line":161,"column":4},"end":{"line":161,"column":38}},"76":{"start":{"line":162,"column":4},"end":{"line":162,"column":24}},"77":{"start":{"line":163,"column":4},"end":{"line":163,"column":24}},"78":{"start":{"line":166,"column":2},"end":{"line":166,"column":12}},"79":{"start":{"line":169,"column":0},"end":{"line":198,"column":1}},"80":{"start":{"line":170,"column":2},"end":{"line":170,"column":27}},"81":{"start":{"line":172,"column":2},"end":{"line":177,"column":4}},"82":{"start":{"line":173,"column":4},"end":{"line":175,"column":5}},"83":{"start":{"line":174,"column":6},"end":{"line":174,"column":12}},"84":{"start":{"line":176,"column":4},"end":{"line":176,"column":55}},"85":{"start":{"line":180,"column":2},"end":{"line":180,"column":30}},"86":{"start":{"line":183,"column":2},"end":{"line":185,"column":3}},"87":{"start":{"line":184,"column":4},"end":{"line":184,"column":20}},"88":{"start":{"line":187,"column":2},"end":{"line":187,"column":36}},"89":{"start":{"line":189,"column":2},"end":{"line":189,"column":31}},"90":{"start":{"line":191,"column":2},"end":{"line":195,"column":3}},"91":{"start":{"line":192,"column":4},"end":{"line":192,"column":54}},"92":{"start":{"line":193,"column":4},"end":{"line":193,"column":54}},"93":{"start":{"line":194,"column":4},"end":{"line":194,"column":54}},"94":{"start":{"line":197,"column":2},"end":{"line":197,"column":12}}},"branchMap":{"1":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"2":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":15},"end":{"line":37,"column":39}},{"start":{"line":37,"column":43},"end":{"line":37,"column":45}}]},"3":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":8}},{"start":{"line":44,"column":8},"end":{"line":44,"column":8}}]},"4":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"5":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":15},"end":{"line":72,"column":43}},{"start":{"line":72,"column":47},"end":{"line":72,"column":49}}]},"6":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":36},"end":{"line":77,"column":50}},{"start":{"line":77,"column":54},"end":{"line":77,"column":69}}]},"7":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":16},"end":{"line":81,"column":25}},{"start":{"line":81,"column":29},"end":{"line":81,"column":55}}]},"8":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":15},"end":{"line":83,"column":26}},{"start":{"line":84,"column":11},"end":{"line":84,"column":66}}]},"9":{"line":84,"type":"cond-expr","locations":[{"start":{"line":84,"column":35},"end":{"line":84,"column":45}},{"start":{"line":84,"column":48},"end":{"line":84,"column":66}}]},"10":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":49},"end":{"line":84,"column":59}},{"start":{"line":84,"column":63},"end":{"line":84,"column":65}}]},"11":{"line":87,"type":"cond-expr","locations":[{"start":{"line":87,"column":31},"end":{"line":87,"column":42}},{"start":{"line":87,"column":45},"end":{"line":87,"column":48}}]},"12":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":6},"end":{"line":96,"column":6}},{"start":{"line":96,"column":6},"end":{"line":96,"column":6}}]},"13":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":4},"end":{"line":106,"column":4}},{"start":{"line":106,"column":4},"end":{"line":106,"column":4}}]},"14":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":124,"column":8}},{"start":{"line":124,"column":8},"end":{"line":124,"column":8}}]},"15":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"16":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":2},"end":{"line":148,"column":2}},{"start":{"line":148,"column":2},"end":{"line":148,"column":2}}]},"17":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":149,"column":4}},{"start":{"line":149,"column":4},"end":{"line":149,"column":4}}]},"18":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":7},"end":{"line":156,"column":7}},{"start":{"line":156,"column":7},"end":{"line":156,"column":7}}]},"19":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":7},"end":{"line":160,"column":7}},{"start":{"line":160,"column":7},"end":{"line":160,"column":7}}]},"20":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":4},"end":{"line":173,"column":4}},{"start":{"line":173,"column":4},"end":{"line":173,"column":4}}]},"21":{"line":176,"type":"cond-expr","locations":[{"start":{"line":176,"column":38},"end":{"line":176,"column":43}},{"start":{"line":176,"column":46},"end":{"line":176,"column":54}}]},"22":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":13},"end":{"line":180,"column":21}},{"start":{"line":180,"column":25},"end":{"line":180,"column":30}}]},"23":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":2},"end":{"line":183,"column":2}},{"start":{"line":183,"column":2},"end":{"line":183,"column":2}}]},"24":{"line":183,"type":"binary-expr","locations":[{"start":{"line":183,"column":6},"end":{"line":183,"column":27}},{"start":{"line":183,"column":31},"end":{"line":183,"column":50}}]},"25":{"line":187,"type":"binary-expr","locations":[{"start":{"line":187,"column":13},"end":{"line":187,"column":30}},{"start":{"line":187,"column":34},"end":{"line":187,"column":36}}]},"26":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":2},"end":{"line":191,"column":2}},{"start":{"line":191,"column":2},"end":{"line":191,"column":2}}]},"27":{"line":191,"type":"binary-expr","locations":[{"start":{"line":191,"column":6},"end":{"line":191,"column":24}},{"start":{"line":191,"column":28},"end":{"line":191,"column":46}}]},"28":{"line":192,"type":"cond-expr","locations":[{"start":{"line":192,"column":34},"end":{"line":192,"column":43}},{"start":{"line":192,"column":46},"end":{"line":192,"column":54}}]},"29":{"line":193,"type":"cond-expr","locations":[{"start":{"line":193,"column":34},"end":{"line":193,"column":43}},{"start":{"line":193,"column":46},"end":{"line":193,"column":54}}]},"30":{"line":194,"type":"cond-expr","locations":[{"start":{"line":194,"column":34},"end":{"line":194,"column":43}},{"start":{"line":194,"column":46},"end":{"line":194,"column":54}}]}},"code":["/* Copyright (c) 2010-2016 Richard Rodger and other contributors, MIT License */","'use strict'","","var _ = require('lodash')","var Eraro = require('eraro')","var Jsonic = require('jsonic')","var Common = require('./common')","var Errors = require('./errors')","var Plugins = require('./plugins')","","var internals = {","  error: Eraro({","    package: 'seneca',","    msgmap: Errors,","    override: true","  })","}","","","exports.listen = function (callpoint) {","  return function api_listen () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var self = this","    var lastArg = _.last(argsarr)","    if (typeof lastArg === 'function') {","      argsarr.pop()","    }","","    self.log.debug({","      kind: 'listen',","      options: argsarr,","      callpoint: callpoint()","    })","","    var opts = self.options().transport || {}","    var config = internals.resolveConfig(internals.parse_config(argsarr), opts)","","    self.act(","      'role:transport,cmd:listen',","      { config: config, gate$: true },","      function (err, result) {","        if (err) {","          return self.die(internals.error(err, 'transport_listen', config))","        }","","        if (typeof lastArg === 'function') {","          lastArg(null, result)","          lastArg = _.noop","        }","      })","","    return self","  }","}","","","exports.client = function (callpoint) {","  return function api_client () {","    var argsarr = new Array(arguments.length)","    for (var l = 0; l < argsarr.length; ++l) { argsarr[l] = arguments[l] }","","    var self = this","","    self.log.debug({","      kind: 'client',","      options: argsarr,","      callpoint: callpoint()","    })","","    var opts = self.options(null).transport || {}","","    var raw_config = internals.parse_config(argsarr)","","    // pg: pin group","    raw_config.pg = Common.pincanon(raw_config.pin || raw_config.pins)","","    var config = internals.resolveConfig(raw_config, opts)","","    config.id = config.id || Common.pattern(raw_config)","","    var pins = config.pins ||","          (_.isArray(config.pin) ? config.pin : [config.pin || ''])","","    pins = _.map(pins, function (pin) {","      return _.isString(pin) ? Jsonic(pin) : pin","    })","","    var sd = Plugins.make_delegate(self, { name: 'client$', tag: void 0 })","","    var sendclient","","","    var transport_client = function transport_client (msg, done) {","      if (msg.local$) {","        this.prior(msg, done)","      }","      else {","        sendclient.send.call(this, msg, done)","      }","    }","","    transport_client.id = config.id","","    if (config.makehandle) {","      transport_client.handle = config.makehandle(config)","    }","","    _.each(pins, function (pin) {","      pin = _.clone(pin)","      pin.client$ = true","      pin.internal$ = {catchall: true}","","      sd.add(pin, transport_client)","    })","","","    // Create client.","    sd.act(","      'role:transport,cmd:client',","      { config: config, gate$: true },","      function (err, liveclient) {","        if (err) {","          return sd.die(internals.error(err, 'transport_client', config))","        }","","        if (liveclient === null) {","          return sd.die(internals.error('transport_client_null',","                                        Common.clean(config)))","        }","","        sendclient = liveclient","      })","","    return self","  }","}","","","internals.parse_config = function (args) {","  var out = {}","","  var config = _.compact(args)","","  var arglen = config.length","","  if (arglen === 1) {","    if (_.isObject(config[0])) {","      out = _.clone(config[0])","    }","    else {","      out.port = parseInt(config[0], 10)","    }","  }","  else if (arglen === 2) {","    out.port = parseInt(config[0], 10)","    out.host = config[1]","  }","  else if (arglen === 3) {","    out.port = parseInt(config[0], 10)","    out.host = config[1]","    out.path = config[2]","  }","","  return out","}","","internals.resolveConfig = function (config, options) {","  var out = _.clone(config)","","  _.each(options, function (value, key) {","    if (_.isObject(value)) {","      return","    }","    out[key] = (out[key] === void 0 ? value : out[key])","  })","","  // Default transport is web","  out.type = out.type || 'web'","","  // Aliases.","  if (out.type === 'direct' || out.type === 'http') {","    out.type = 'web'","  }","","  var base = options[out.type] || {}","","  out = _.extend({}, base, out)","","  if (out.type === 'web' || out.type === 'tcp') {","    out.port = out.port == null ? base.port : out.port","    out.host = out.host == null ? base.host : out.host","    out.path = out.path == null ? base.path : out.path","  }","","  return out","}",""],"l":{"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"20":1,"21":0,"22":0,"23":0,"25":0,"26":0,"27":0,"28":0,"31":0,"37":0,"38":0,"40":0,"44":0,"45":0,"48":0,"49":0,"50":0,"54":0,"59":1,"60":0,"61":0,"62":0,"64":0,"66":0,"72":0,"74":0,"77":0,"79":0,"81":0,"83":0,"86":0,"87":0,"90":0,"92":0,"95":0,"96":0,"97":0,"100":0,"104":0,"106":0,"107":0,"110":0,"111":0,"112":0,"113":0,"115":0,"120":0,"124":0,"125":0,"128":0,"129":0,"133":0,"136":0,"141":1,"142":0,"144":0,"146":0,"148":0,"149":0,"150":0,"153":0,"156":0,"157":0,"158":0,"160":0,"161":0,"162":0,"163":0,"166":0,"169":1,"170":0,"172":0,"173":0,"174":0,"176":0,"180":0,"183":0,"184":0,"187":0,"189":0,"191":0,"192":0,"193":0,"194":0,"197":0}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/logging.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca/lib/logging.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},"b":{"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"logging","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":27}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":18},"end":{"line":19,"column":30}}},"3":{"name":"(anonymous_3)","line":52,"loc":{"start":{"line":52,"column":15},"end":{"line":52,"column":39}}},"4":{"name":"(anonymous_4)","line":60,"loc":{"start":{"line":60,"column":13},"end":{"line":60,"column":37}}},"5":{"name":"(anonymous_5)","line":73,"loc":{"start":{"line":73,"column":59},"end":{"line":73,"column":72}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":26}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":46}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":44}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}},"5":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}},"6":{"start":{"line":14,"column":0},"end":{"line":17,"column":1}},"7":{"start":{"line":19,"column":0},"end":{"line":132,"column":1}},"8":{"start":{"line":20,"column":2},"end":{"line":20,"column":19}},"9":{"start":{"line":21,"column":2},"end":{"line":21,"column":27}},"10":{"start":{"line":22,"column":2},"end":{"line":22,"column":44}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":24}},"12":{"start":{"line":26,"column":2},"end":{"line":48,"column":3}},"13":{"start":{"line":27,"column":4},"end":{"line":47,"column":5}},"14":{"start":{"line":28,"column":6},"end":{"line":28,"column":31}},"15":{"start":{"line":30,"column":9},"end":{"line":47,"column":5}},"16":{"start":{"line":31,"column":6},"end":{"line":31,"column":31}},"17":{"start":{"line":33,"column":9},"end":{"line":47,"column":5}},"18":{"start":{"line":34,"column":6},"end":{"line":34,"column":33}},"19":{"start":{"line":36,"column":9},"end":{"line":47,"column":5}},"20":{"start":{"line":37,"column":6},"end":{"line":37,"column":33}},"21":{"start":{"line":39,"column":9},"end":{"line":47,"column":5}},"22":{"start":{"line":40,"column":6},"end":{"line":40,"column":33}},"23":{"start":{"line":42,"column":9},"end":{"line":47,"column":5}},"24":{"start":{"line":43,"column":6},"end":{"line":43,"column":32}},"25":{"start":{"line":45,"column":9},"end":{"line":47,"column":5}},"26":{"start":{"line":46,"column":6},"end":{"line":46,"column":32}},"27":{"start":{"line":50,"column":2},"end":{"line":50,"column":36}},"28":{"start":{"line":52,"column":2},"end":{"line":56,"column":3}},"29":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"30":{"start":{"line":54,"column":6},"end":{"line":54,"column":34}},"31":{"start":{"line":59,"column":2},"end":{"line":125,"column":3}},"32":{"start":{"line":60,"column":4},"end":{"line":124,"column":5}},"33":{"start":{"line":61,"column":6},"end":{"line":123,"column":7}},"34":{"start":{"line":62,"column":8},"end":{"line":122,"column":9}},"35":{"start":{"line":63,"column":10},"end":{"line":63,"column":20}},"36":{"start":{"line":64,"column":10},"end":{"line":64,"column":50}},"37":{"start":{"line":66,"column":10},"end":{"line":116,"column":11}},"38":{"start":{"line":67,"column":12},"end":{"line":69,"column":61}},"39":{"start":{"line":71,"column":12},"end":{"line":106,"column":13}},"40":{"start":{"line":72,"column":14},"end":{"line":78,"column":15}},"41":{"start":{"line":73,"column":16},"end":{"line":75,"column":29}},"42":{"start":{"line":74,"column":18},"end":{"line":74,"column":42}},"43":{"start":{"line":77,"column":16},"end":{"line":77,"column":49}},"44":{"start":{"line":80,"column":14},"end":{"line":82,"column":42}},"45":{"start":{"line":84,"column":14},"end":{"line":86,"column":15}},"46":{"start":{"line":85,"column":16},"end":{"line":85,"column":38}},"47":{"start":{"line":88,"column":14},"end":{"line":90,"column":15}},"48":{"start":{"line":89,"column":16},"end":{"line":89,"column":78}},"49":{"start":{"line":92,"column":17},"end":{"line":106,"column":13}},"50":{"start":{"line":93,"column":14},"end":{"line":93,"column":37}},"51":{"start":{"line":95,"column":17},"end":{"line":106,"column":13}},"52":{"start":{"line":96,"column":14},"end":{"line":97,"column":71}},"53":{"start":{"line":99,"column":17},"end":{"line":106,"column":13}},"54":{"start":{"line":101,"column":17},"end":{"line":106,"column":13}},"55":{"start":{"line":102,"column":14},"end":{"line":102,"column":36}},"56":{"start":{"line":105,"column":14},"end":{"line":105,"column":63}},"57":{"start":{"line":108,"column":12},"end":{"line":108,"column":36}},"58":{"start":{"line":111,"column":12},"end":{"line":111,"column":54}},"59":{"start":{"line":112,"column":12},"end":{"line":115,"column":70}},"60":{"start":{"line":118,"column":10},"end":{"line":118,"column":29}},"61":{"start":{"line":121,"column":10},"end":{"line":121,"column":27}},"62":{"start":{"line":127,"column":2},"end":{"line":131,"column":3}}},"branchMap":{"1":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":16},"end":{"line":22,"column":28}},{"start":{"line":22,"column":32},"end":{"line":22,"column":38}},{"start":{"line":22,"column":42},"end":{"line":22,"column":44}}]},"2":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":2}},{"start":{"line":26,"column":2},"end":{"line":26,"column":2}}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"4":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":9},"end":{"line":30,"column":9}},{"start":{"line":30,"column":9},"end":{"line":30,"column":9}}]},"5":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":9},"end":{"line":33,"column":9}},{"start":{"line":33,"column":9},"end":{"line":33,"column":9}}]},"6":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":9},"end":{"line":36,"column":9}},{"start":{"line":36,"column":9},"end":{"line":36,"column":9}}]},"7":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":9},"end":{"line":39,"column":9}},{"start":{"line":39,"column":9},"end":{"line":39,"column":9}}]},"8":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":9},"end":{"line":42,"column":9}},{"start":{"line":42,"column":9},"end":{"line":42,"column":9}}]},"9":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":9},"end":{"line":45,"column":9}},{"start":{"line":45,"column":9},"end":{"line":45,"column":9}}]},"10":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"11":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":2},"end":{"line":59,"column":2}},{"start":{"line":59,"column":2},"end":{"line":59,"column":2}}]},"12":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":6},"end":{"line":61,"column":6}},{"start":{"line":61,"column":6},"end":{"line":61,"column":6}}]},"13":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":10},"end":{"line":66,"column":10}},{"start":{"line":66,"column":10},"end":{"line":66,"column":10}}]},"14":{"line":66,"type":"binary-expr","locations":[{"start":{"line":66,"column":14},"end":{"line":66,"column":33}},{"start":{"line":66,"column":37},"end":{"line":66,"column":57}}]},"15":{"line":69,"type":"cond-expr","locations":[{"start":{"line":69,"column":39},"end":{"line":69,"column":54}},{"start":{"line":69,"column":57},"end":{"line":69,"column":59}}]},"16":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":12}},{"start":{"line":71,"column":12},"end":{"line":71,"column":12}}]},"17":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":14},"end":{"line":72,"column":14}},{"start":{"line":72,"column":14},"end":{"line":72,"column":14}}]},"18":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":55},"end":{"line":80,"column":66}},{"start":{"line":80,"column":70},"end":{"line":80,"column":78}}]},"19":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":14},"end":{"line":84,"column":14}},{"start":{"line":84,"column":14},"end":{"line":84,"column":14}}]},"20":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":14},"end":{"line":88,"column":14}},{"start":{"line":88,"column":14},"end":{"line":88,"column":14}}]},"21":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":17},"end":{"line":92,"column":17}},{"start":{"line":92,"column":17},"end":{"line":92,"column":17}}]},"22":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":17},"end":{"line":95,"column":17}},{"start":{"line":95,"column":17},"end":{"line":95,"column":17}}]},"23":{"line":97,"type":"cond-expr","locations":[{"start":{"line":97,"column":43},"end":{"line":97,"column":64}},{"start":{"line":97,"column":67},"end":{"line":97,"column":69}}]},"24":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":17},"end":{"line":99,"column":17}},{"start":{"line":99,"column":17},"end":{"line":99,"column":17}}]},"25":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":17},"end":{"line":101,"column":17}},{"start":{"line":101,"column":17},"end":{"line":101,"column":17}}]}},"code":["/* Copyright (c) 2016 Richard Rodger and other contributors, MIT License */","'use strict'","","","var Util = require('util')","","","var Stringify = require('json-stringify-safe')","var LogFilter = require('seneca-log-filter')","var _ = require('lodash')","","module.exports = logging","","function logging (options) {","  // Everything is in preload as logging plugins are","  // a special case that need to be loaded before any calls to seneca.log.","}","","logging.preload = function () {","  var seneca = this","  var so = seneca.options()","  var logspec = so.log.basic || so.log || {}","","  var origspec = logspec","","  if (_.isString(logspec)) {","    if ('quiet' === logspec) {","      logspec = {level: 'none'}","    }","    else if ('silent' === logspec) {","      logspec = {level: 'none'}","    }","    else if ('any' === logspec) {","      logspec = {level: 'debug+'}","    }","    else if ('all' === logspec) {","      logspec = {level: 'debug+'}","    }","    else if ('print' === logspec) {","      logspec = {level: 'debug+'}","    }","    else if ('standard' === logspec) {","      logspec = {level: 'info+'}","    }","    else if ('test' === logspec) {","      logspec = {level: 'warn+'}","    }","  }","","  var logrouter = LogFilter(logspec)","","  var logger = function (seneca, data) {","    if (logrouter(data)) {","      console.log(Stringify(data))","    }","  }","","  // Test mode prints more readable logs","  if (so.test) {","    logger = function (seneca, data) {","      if (logrouter(data)) {","        try {","          var logstr","          var time = data.when - seneca.start_time","","          if ('test' === origspec || 'print' === origspec) {","            var logb = [","              time + '/' + seneca.id.substring(0, 2),","              data.kind + (data.case ? '/' + data.case : '')]","","            if ('act' === data.kind) {","              if (data.msg) {","                logb.push(data.msg.meta$.id.split('/').map(function (s) {","                  return s.substring(0, 2)","                }).join('/'))","","                logb.push(data.msg.meta$.pattern)","              }","","              logb.push(Util.inspect(seneca.util.clean(data.result || data.msg))","                        .replace(/\\s+/g, '')","                        .substring(0, 88))","","              if (data.notice) {","                logb.push(data.notice)","              }","","              if ('ERR' === data.case) {","                logb.push('\\n\\n' + data.err.stack + '\\n' + data.caller + '\\n')","              }","            }","            else if ('add' === data.kind) {","              logb.push(data.pattern)","            }","            else if ('plugin' === data.kind) {","              logb.push(data.plugin_name +","                        (data.plugin_tag ? '/' + data.plugin_tag : ''))","            }","            else if ('options' === data.kind) {","            }","            else if ('notice' === data.kind) {","              logb.push(data.notice)","            }","            else {","              logb.push(Util.inspect(data).replace(/\\n/g, ' '))","            }","","            logstr = logb.join('\\t')","          }","          else {","            logstr = Util.inspect(data, {depth: null})","            logstr =","              time + ':\\n\\t' +","              logstr.replace(/\\n/g, '\\n\\t') +","              '\\n------------------------------------------------\\n\\n'","          }","","          console.log(logstr)","        }","        catch (e) {","          console.log(data)","        }","      }","    }","  }","","  return {","    extend: {","      logger: logger","    }","  }","}",""],"l":{"5":1,"8":1,"9":1,"10":1,"12":1,"14":1,"19":1,"20":0,"21":0,"22":0,"24":0,"26":0,"27":0,"28":0,"30":0,"31":0,"33":0,"34":0,"36":0,"37":0,"39":0,"40":0,"42":0,"43":0,"45":0,"46":0,"50":0,"52":0,"53":0,"54":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"66":0,"67":0,"71":0,"72":0,"73":0,"74":0,"77":0,"80":0,"84":0,"85":0,"88":0,"89":0,"92":0,"93":0,"95":0,"96":0,"99":0,"101":0,"102":0,"105":0,"108":0,"111":0,"112":0,"118":0,"121":0,"127":0}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca-log-filter/seneca-log-filter.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca-log-filter/seneca-log-filter.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"logfilter","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":29}}},"2":{"name":"filter","line":31,"loc":{"start":{"line":31,"column":9},"end":{"line":31,"column":32}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":40}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":27}},"4":{"start":{"line":7,"column":0},"end":{"line":44,"column":1}},"5":{"start":{"line":8,"column":2},"end":{"line":8,"column":38}},"6":{"start":{"line":10,"column":2},"end":{"line":10,"column":27}},"7":{"start":{"line":12,"column":2},"end":{"line":29,"column":3}},"8":{"start":{"line":13,"column":4},"end":{"line":13,"column":32}},"9":{"start":{"line":16,"column":7},"end":{"line":29,"column":3}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":80}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":66}},"12":{"start":{"line":22,"column":4},"end":{"line":22,"column":43}},"13":{"start":{"line":23,"column":4},"end":{"line":28,"column":5}},"14":{"start":{"line":24,"column":6},"end":{"line":24,"column":53}},"15":{"start":{"line":25,"column":6},"end":{"line":27,"column":7}},"16":{"start":{"line":26,"column":8},"end":{"line":26,"column":53}},"17":{"start":{"line":31,"column":2},"end":{"line":43,"column":3}},"18":{"start":{"line":32,"column":4},"end":{"line":41,"column":5}},"19":{"start":{"line":33,"column":6},"end":{"line":33,"column":32}},"20":{"start":{"line":34,"column":6},"end":{"line":36,"column":7}},"21":{"start":{"line":35,"column":8},"end":{"line":35,"column":60}},"22":{"start":{"line":37,"column":6},"end":{"line":39,"column":7}},"23":{"start":{"line":38,"column":8},"end":{"line":38,"column":45}},"24":{"start":{"line":40,"column":6},"end":{"line":40,"column":19}},"25":{"start":{"line":42,"column":4},"end":{"line":42,"column":15}},"26":{"start":{"line":46,"column":0},"end":{"line":46,"column":26}}},"branchMap":{"1":{"line":8,"type":"binary-expr","locations":[{"start":{"line":8,"column":14},"end":{"line":8,"column":27}},{"start":{"line":8,"column":31},"end":{"line":8,"column":38}}]},"2":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"3":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":7},"end":{"line":16,"column":7}},{"start":{"line":16,"column":7},"end":{"line":16,"column":7}}]},"4":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"5":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":6}},{"start":{"line":25,"column":6},"end":{"line":25,"column":6}}]},"6":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"7":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":6},"end":{"line":34,"column":6}},{"start":{"line":34,"column":6},"end":{"line":34,"column":6}}]},"8":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":6},"end":{"line":37,"column":6}},{"start":{"line":37,"column":6},"end":{"line":37,"column":6}}]},"9":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":10},"end":{"line":37,"column":22}},{"start":{"line":37,"column":26},"end":{"line":37,"column":49}}]}},"code":["'use strict'","","const Util = require('./lib/util')","const Aliases = require('./lib/aliases')","const _ = require('lodash')","","function logfilter (options) {","  let level = options.level || 'info+'","","  let calculatedLevels = []","","  if (Util.level_exists(level)) {","    calculatedLevels.push(level)","  }","  // Level + notation","  else if (_.endsWith(level, '+')) {","    calculatedLevels = Util.log_level_plus(level.substring(0, level.length - 1))","  }","  // No level nor level+... it must be a custom alias","  else {","    let processedAliases = Object.assign(Aliases, options.aliases)","    let aliasInfo = processedAliases[level]","    if (aliasInfo) {","      let handled = _.get(aliasInfo, 'handled', true)","      if (handled) {","        calculatedLevels = aliasInfo.handler(options)","      }","    }","  }","","  return function filter (data) {","    if (calculatedLevels.indexOf(data.level) !== -1) {","      let cloned = _.clone(data)","      if (options['omit-metadata']) {","        cloned = _.omit(cloned, ['seneca', 'level', 'when'])","      }","      if (options.omit && _.isArray(options.omit)) {","        cloned = _.omit(cloned, options.omit)","      }","      return cloned","    }","    return null","  }","}","","module.exports = logfilter",""],"l":{"3":1,"4":1,"5":1,"7":1,"8":0,"10":0,"12":0,"13":0,"16":0,"17":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"31":0,"32":0,"33":0,"34":0,"35":0,"37":0,"38":0,"40":0,"42":0,"46":1}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca-log-filter/lib/util.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca-log-filter/lib/util.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":1,"10":1},"b":{"1":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"log_level_plus","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":35}}},"2":{"name":"level_exists","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":30}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":62}},"2":{"start":{"line":10,"column":0},"end":{"line":18,"column":1}},"3":{"start":{"line":11,"column":2},"end":{"line":11,"column":42}},"4":{"start":{"line":12,"column":2},"end":{"line":17,"column":3}},"5":{"start":{"line":13,"column":4},"end":{"line":13,"column":13}},"6":{"start":{"line":16,"column":4},"end":{"line":16,"column":53}},"7":{"start":{"line":25,"column":0},"end":{"line":27,"column":1}},"8":{"start":{"line":26,"column":2},"end":{"line":26,"column":41}},"9":{"start":{"line":29,"column":0},"end":{"line":29,"column":46}},"10":{"start":{"line":30,"column":0},"end":{"line":30,"column":42}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]}},"code":["'use strict'","","const log_levels = ['debug', 'info', 'warn', 'error', 'fatal']","","/**"," * It returns the levels above the argument"," * @param  {String} logLevel the log level to calculate"," * @return {Array}           the list of logs above the argument"," */","function log_level_plus (logLevel) {","  let index = log_levels.indexOf(logLevel)","  if (index < 0) {","    return []","  }","  else {","    return log_levels.slice(index, log_levels.length)","  }","}","","/**"," * Checks if a log level exists"," * @param  {string} level the level itself"," * @return {boolean}      true if the level exists"," */","function level_exists (level) {","  return log_levels.indexOf(level) !== -1","}","","module.exports.log_level_plus = log_level_plus","module.exports.level_exists = level_exists",""],"l":{"3":1,"10":1,"11":0,"12":0,"13":0,"16":0,"25":1,"26":0,"29":1,"30":1}},"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca-log-filter/lib/aliases.js":{"path":"/home/travis/build/npmtest/node-npmtest-seneca/node_modules/seneca-log-filter/lib/aliases.js","s":{"1":1,"2":0,"3":0,"4":0},"b":{},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":13},"end":{"line":7,"column":25}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":13},"end":{"line":11,"column":25}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":13},"end":{"line":15,"column":25}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":17,"column":1}},"2":{"start":{"line":7,"column":27},"end":{"line":7,"column":37}},"3":{"start":{"line":11,"column":27},"end":{"line":11,"column":78}},"4":{"start":{"line":15,"column":27},"end":{"line":15,"column":53}}},"branchMap":{},"code":["/**"," * Default aliases for seneca."," */","module.exports = {","  'silent': {","    handled: true,","    handler: function () { return [] }","  },","  'all': {","    handled: true,","    handler: function () { return ['debug', 'info', 'warn', 'error', 'fatal'] }","  },","  'test': {","    handled: true,","    handler: function () { return ['error', 'fatal'] }","  }","}",""],"l":{"4":1,"7":0,"11":0,"15":0}}}